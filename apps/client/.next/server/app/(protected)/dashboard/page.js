(()=>{var e={};e.id=311,e.ids=[311],e.modules={1498:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(38828),i=r(64652),n=r(77877);r(61365);let o=async()=>{let e=await (0,n.V1)();return console.log(e),(0,s.jsx)("div",{children:(0,s.jsx)(i.default,{marketsData:e})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3314:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(38828),i=r(31316),n=r(27785),o=r(42543);r(61365);let a=async({children:e})=>{let t=await (0,n.getServerSession)(i.N);return console.log(JSON.stringify(t)+"===========session"),t?.user?.name!="secured"&&(0,o.redirect)("/login"),(0,s.jsx)("div",{children:e})}},10368:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var s=r(17097),i=r(55511);class n{constructor(){this.client=(0,s.createClient)({url:process.env.REDIS_URL}),this.pubsubclient=this.client.duplicate()}async init(){this.client.isOpen||await this.client.connect(),this.pubsubclient.isOpen||await this.pubsubclient.connect(),console.log("Both clients are connected")}static getInstance(){return n.instance||(n.instance=new n),n.instance}async pushToEngine(e,t,r){let s=(0,i.randomUUID)();return await this.client.lPush("order.queue",JSON.stringify({type:t,eventId:r||s,payload:e})),console.log("pushed to engine"),s}async subscribeToEvent(e){return new Promise(async(t,r)=>{let s=setTimeout(async()=>{console.log("timeout called"),await this.pubsubclient.unsubscribe(e),r({message:"no response"})},5e3);await this.pubsubclient.subscribe(e,r=>{clearTimeout(s);let i=JSON.parse(r);this.pubsubclient.unsubscribe(e),t(i)})})}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21821:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(24332),i=r(48819),n=r(67851),o=r.n(n),a=r(97540),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c={children:["",{children:["(protected)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1498)),"/Users/divakarjaiswal/Developer/opinion/apps/client/app/(protected)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3314)),"/Users/divakarjaiswal/Developer/opinion/apps/client/app/(protected)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70196))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,54468)),"/Users/divakarjaiswal/Developer/opinion/apps/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70196))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/divakarjaiswal/Developer/opinion/apps/client/app/(protected)/dashboard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(protected)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31316:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var s=r(10368),i=r(55511),n=r(11874),o=r(83217);let a=o.Ay$.object({username:o.Ay$.string({message:"Username not provided"}),password:o.Ay$.string().min(6).max(32,{message:"Password not correct"})}),l={providers:[(0,n.A)({name:"CredentialProvider",credentials:{username:{label:"username",type:"text"},password:{label:"password",type:"password"}},async authorize(e){console.log("here");let t=a.safeParse(e);if(!t.success)return console.log("krsna"),null;let{username:r,password:n}=t.data;console.log(JSON.stringify(t));let o=s.z.getInstance();await o.init();let l=(0,i.randomUUID)(),c=o.subscribeToEvent(l);return(await o.pushToEngine({userId:r},"CREATE_USER",l),(await c).success)?(console.log("responssee"),{id:r,name:r}):null}})],secret:process.env.NEXTAUTH_SECRET,session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(console.log(JSON.stringify(e)+"------"+JSON.stringify(t)+"tokeeee"),t&&(console.log("here1"),e.id=t.id,e.name=t.name),console.log(JSON.stringify(e)),e),session:async({session:e,token:t})=>(console.log(JSON.stringify(e)+"------"+JSON.stringify(t)+"sess"),e.user.id=t.id,e.user.name=t.name,e)}}},33873:e=>{"use strict";e.exports=require("path")},41692:e=>{"use strict";e.exports=require("node:tls")},48602:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(13486),i=r(60159),n=r(26093),o=r(67499);let a=({marketsData:e})=>{let[t,r]=(0,i.useState)(e),[a,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)({marketId:"",title:"",description:""}),u=async()=>{console.log(JSON.stringify(await (0,o.an)(c))),r(e=>[...e,c]),d({marketId:"",title:"",description:""}),l(!1)};return(0,s.jsxs)("div",{className:"w-screen h-screen flex flex-col bg-white text-zinc-800",children:[(0,s.jsxs)("div",{className:"w-full h-20 flex items-center justify-between px-10 bg-white border-b border-zinc-200 shadow-sm sticky top-0 z-40",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-zinc-900",children:"All the Markets"}),(0,s.jsx)("button",{className:"bg-zinc-900 text-white px-4 py-2 rounded-md hover:bg-zinc-700 transition",onClick:()=>l(!0),children:"+ Add Market"})]}),t&&t.length>0?(0,s.jsx)("div",{className:"bg-zinc-50 w-full max-h-[calc(100vh-5rem)] overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 p-10",children:t.map((e,t)=>(0,s.jsx)(n.A,{market:e,secured:!0,setMarkets:r},t))}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-zinc-500",children:"No markets available right now"}),a&&(0,s.jsx)("div",{className:"fixed inset-0 bg-zinc-200/40 backdrop-blur-sm flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md border border-zinc-200 shadow-xl transition-all",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-zinc-800",children:"Add New Market"}),(0,s.jsx)("input",{type:"text",value:c.marketId,onChange:e=>d(t=>({...t,marketId:e.target.value})),placeholder:"Enter market Market Id",className:"w-full bg-white text-zinc-800 border border-zinc-300 p-3 rounded-md mb-4 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-600 transition"}),(0,s.jsx)("input",{type:"text",value:c.title,onChange:e=>d(t=>({...t,title:e.target.value})),placeholder:"Enter market title",className:"w-full bg-white text-zinc-800 border border-zinc-300 p-3 rounded-md mb-4 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-600 transition"}),(0,s.jsx)("input",{type:"text",value:c.description,onChange:e=>d(t=>({...t,description:e.target.value})),placeholder:"Enter market description",className:"w-full bg-white text-zinc-800 border border-zinc-300 p-3 rounded-md mb-4 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-600 transition"}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 rounded border border-zinc-300 text-zinc-600 hover:bg-zinc-100 transition",onClick:()=>l(!1),children:"Cancel"}),(0,s.jsx)("button",{className:"bg-zinc-800 hover:bg-zinc-700 text-white px-4 py-2 rounded transition",onClick:u,children:"Add"})]})]})})]})}},55398:(e,t,r)=>{Promise.resolve().then(r.bind(r,48602))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58500:e=>{"use strict";e.exports=require("node:timers/promises")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63646:(e,t,r)=>{Promise.resolve().then(r.bind(r,64652))},64652:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/divakarjaiswal/Developer/opinion/apps/client/components/AdminDashboard.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/divakarjaiswal/Developer/opinion/apps/client/components/AdminDashboard.tsx","default")},73136:e=>{"use strict";e.exports=require("node:url")},74075:e=>{"use strict";e.exports=require("zlib")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80408:()=>{},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},87032:()=>{},94735:e=>{"use strict";e.exports=require("events")},99439:e=>{"use strict";e.exports=require("os")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[986,97,928,217,253,957,594,111,85,145,257,297],()=>r(21821));module.exports=s})();