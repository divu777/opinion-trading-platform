(()=>{var e={};e.id=636,e.ids=[636],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10368:(e,t,s)=>{"use strict";s.d(t,{z:()=>n});var r=s(17097),i=s(55511);class n{constructor(){this.client=(0,r.createClient)({url:process.env.REDIS_URL}),this.pubsubclient=this.client.duplicate()}async init(){this.client.isOpen||await this.client.connect(),this.pubsubclient.isOpen||await this.pubsubclient.connect(),console.log("Both clients are connected")}static getInstance(){return n.instance||(n.instance=new n),n.instance}async pushToEngine(e,t,s){let r=(0,i.randomUUID)();return await this.client.lPush("order.queue",JSON.stringify({type:t,eventId:s||r,payload:e})),console.log("pushed to engine"),r}async subscribeToEvent(e){return new Promise(async(t,s)=>{let r=setTimeout(async()=>{console.log("timeout called"),await this.pubsubclient.unsubscribe(e),s({message:"no response"})},5e3);await this.pubsubclient.subscribe(e,s=>{clearTimeout(r);let i=JSON.parse(s);this.pubsubclient.unsubscribe(e),t(i)})})}}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31316:(e,t,s)=>{"use strict";s.d(t,{N:()=>o});var r=s(10368),i=s(55511),n=s(11874),a=s(83217);let l=a.Ay$.object({username:a.Ay$.string({message:"Username not provided"}),password:a.Ay$.string().min(6).max(32,{message:"Password not correct"})}),o={providers:[(0,n.A)({name:"CredentialProvider",credentials:{username:{label:"username",type:"text"},password:{label:"password",type:"password"}},async authorize(e){console.log("here");let t=l.safeParse(e);if(!t.success)return console.log("krsna"),null;let{username:s,password:n}=t.data;console.log(JSON.stringify(t));let a=r.z.getInstance();await a.init();let o=(0,i.randomUUID)(),c=a.subscribeToEvent(o);return(await a.pushToEngine({userId:s},"CREATE_USER",o),(await c).success)?(console.log("responssee"),{id:s,name:s}):null}})],secret:process.env.NEXTAUTH_SECRET,session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t})=>(console.log(JSON.stringify(e)+"------"+JSON.stringify(t)+"tokeeee"),t&&(console.log("here1"),e.id=t.id,e.name=t.name),console.log(JSON.stringify(e)),e),session:async({session:e,token:t})=>(console.log(JSON.stringify(e)+"------"+JSON.stringify(t)+"sess"),e.user.id=t.id,e.user.name=t.name,e)}}},33873:e=>{"use strict";e.exports=require("path")},41692:e=>{"use strict";e.exports=require("node:tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58500:e=>{"use strict";e.exports=require("node:timers/promises")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73136:e=>{"use strict";e.exports=require("node:url")},74075:e=>{"use strict";e.exports=require("zlib")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},77877:(e,t,s)=>{"use strict";s.d(t,{V1:()=>l,cn:()=>a,gL:()=>o});var r=s(56413),i=s(4465),n=s(88957);function a(...e){return(0,i.QP)((0,r.$)(e))}let l=async()=>(await n.A.get("http://localhost:3000/api/markets")).data.markets,o=async e=>{let t=await n.A.get("http://localhost:3000/api/user/balance/"+e);console.log(JSON.stringify(t.data));let s=await n.A.get("http://localhost:3000/api/user/money/"+e);return console.log(JSON.stringify(s.data)),{res1:t.data,res2:s.data}}},78474:e=>{"use strict";e.exports=require("node:events")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79925:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(24332),i=s(48819),n=s(67851),a=s.n(n),l=s(97540),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c={children:["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,99089)),"/Users/divakarjaiswal/Developer/opinion/apps/client/app/profile/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70196))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,54468)),"/Users/divakarjaiswal/Developer/opinion/apps/client/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70196))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/divakarjaiswal/Developer/opinion/apps/client/app/profile/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},80408:()=>{},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},87032:()=>{},94735:e=>{"use strict";e.exports=require("events")},99089:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var r=s(38828),i=s(61365),n=s(27785),a=s(42543),l=s(31316),o=s(77877);function c({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,o.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function d({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,o.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function u({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,o.cn)("leading-none font-semibold",e),...t})}function p({className:e,...t}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,o.cn)("px-6",e),...t})}function x(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var m=function(e){let t=function(e){let t=i.forwardRef((e,t)=>{let{children:s,...r}=e;if(i.isValidElement(s)){var n;let e,a,l=(n=s,(a=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(a=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),o=function(e,t){let s={...t};for(let r in t){let i=e[r],n=t[r];/^on[A-Z]/.test(r)?i&&n?s[r]=(...e)=>{let t=n(...e);return i(...e),t}:i&&(s[r]=i):"style"===r?s[r]={...i,...n}:"className"===r&&(s[r]=[i,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==i.Fragment&&(o.ref=t?function(...e){return t=>{let s=!1,r=e.map(e=>{let r=x(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():x(e[t],null)}}}}(t,l):l),i.cloneElement(s,o)}return i.Children.count(s)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=i.forwardRef((e,s)=>{let{children:n,...a}=e,l=i.Children.toArray(n),o=l.find(b);if(o){let e=o.props.children,n=l.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...a,ref:s,children:i.isValidElement(e)?i.cloneElement(e,void 0,n):null})}return(0,r.jsx)(t,{...a,ref:s,children:n})});return s.displayName=`${e}.Slot`,s}("Slot"),h=Symbol("radix.slottable");function b(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===h}var v=s(56413);let g=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,f=v.$,j=((e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return f(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:n}=t,a=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;let a=g(t)||g(r);return i[e][a]}),l=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return f(e,a,null==t||null==(r=t.compoundVariants)?void 0:r.reduce((e,t)=>{let{class:s,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...l}[t]):({...n,...l})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)})("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function y({className:e,variant:t,asChild:s=!1,...i}){return(0,r.jsx)(s?m:"span",{"data-slot":"badge",className:(0,o.cn)(j({variant:t}),e),...i})}var w=s(68366);let N=(0,w.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),k=(0,w.A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),z=(0,w.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),q=(0,w.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),O=async()=>{let e=await (0,n.getServerSession)(l.N);e&&e.user&&e.user.name||(0,a.redirect)("/login");let t=await (0,o.gL)(e.user.name),s=t.res2.balance??0,i=t.res1.stock_balances??{},x=Object.values(i).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+5*t,0),0),m=Object.values(i).reduce((e,t)=>e+Object.values(t).reduce((e,t)=>e+t,0),0);return(0,r.jsx)("div",{className:"min-h-screen bg-zinc-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,r.jsx)("div",{className:"text-center space-y-2",children:(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-14 h-14 bg-zinc-200 rounded-full flex items-center justify-center shadow",children:(0,r.jsx)(N,{className:"w-6 h-6 text-zinc-700"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-zinc-900",children:["Welcome back, ",e.user.name]}),(0,r.jsx)("p",{className:"text-zinc-500",children:e.user.email})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(c,{className:"bg-green-500 text-white shadow-lg border-none hover:scale-[1.01] transition",children:[(0,r.jsx)(d,{children:(0,r.jsxs)(u,{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{children:"Wallet Balance"}),(0,r.jsx)(k,{className:"w-5 h-5 text-white/80"})]})}),(0,r.jsxs)(p,{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold",children:["₹",s.toLocaleString("en-IN",{minimumFractionDigits:2})]}),(0,r.jsx)("p",{className:"text-sm text-white/80",children:"Available balance"})]})]}),(0,r.jsxs)(c,{className:"bg-blue-500 text-white shadow-lg border-none hover:scale-[1.01] transition",children:[(0,r.jsx)(d,{children:(0,r.jsxs)(u,{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{children:"Portfolio Value"}),(0,r.jsx)(z,{className:"w-5 h-5 text-white/80"})]})}),(0,r.jsxs)(p,{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold",children:["₹",x.toLocaleString("en-IN")]}),(0,r.jsx)("p",{className:"text-sm text-white/80",children:"Current holdings worth"})]})]}),(0,r.jsxs)(c,{className:"bg-red-500 text-white shadow-lg border-none hover:scale-[1.01] transition",children:[(0,r.jsx)(d,{children:(0,r.jsxs)(u,{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{children:"Total Positions"}),(0,r.jsx)(q,{className:"w-5 h-5 text-white/80"})]})}),(0,r.jsxs)(p,{children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:m}),(0,r.jsxs)("p",{className:"text-sm text-white/80",children:["Across ",Object.keys(i).length," markets"]})]})]})]}),(0,r.jsxs)(c,{className:"shadow-md border border-zinc-200 bg-white",children:[(0,r.jsxs)(d,{className:"border-b border-zinc-100",children:[(0,r.jsxs)(u,{className:"text-xl font-semibold text-zinc-800 flex items-center space-x-2",children:[(0,r.jsx)(q,{className:"w-5 h-5 text-zinc-600"}),(0,r.jsx)("span",{children:"Your Holdings"})]}),(0,r.jsx)("p",{className:"text-sm text-zinc-500",children:"Detailed view of your active positions"})]}),(0,r.jsx)(p,{className:"p-6",children:Object.keys(i).length>0?(0,r.jsx)("div",{className:"space-y-6",children:Object.entries(i).map(([e,t],s)=>(0,r.jsxs)(c,{className:"bg-zinc-50 border border-zinc-200",children:[(0,r.jsx)(d,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(u,{className:"text-md font-medium text-zinc-800",children:e}),(0,r.jsxs)(y,{variant:"outline",className:"border border-zinc-300 text-zinc-600 bg-white",children:["Market #",s+1]})]})}),(0,r.jsxs)(p,{className:"pt-0",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm text-zinc-500 font-semibold border-b pb-2",children:[(0,r.jsx)("div",{children:"Outcome"}),(0,r.jsx)("div",{className:"text-center",children:"Quantity"}),(0,r.jsx)("div",{className:"text-center",children:"Price"}),(0,r.jsx)("div",{className:"text-right",children:"Total"})]}),Object.entries(t).map(([e,t])=>(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm py-3 font-medium border-b border-zinc-100 last:border-0 hover:bg-zinc-100 rounded-md transition",children:[(0,r.jsx)("div",{children:(0,r.jsx)(y,{variant:"outline",className:"border border-zinc-300 text-zinc-700 bg-zinc-100",children:e})}),(0,r.jsx)("div",{className:"text-center text-zinc-900",children:t}),(0,r.jsxs)("div",{className:"text-center text-zinc-700",children:["₹",5]}),(0,r.jsxs)("div",{className:"text-right text-zinc-900 font-semibold",children:["₹",5*t]})]},e))]})]},e))}):(0,r.jsxs)("div",{className:"text-center py-16 space-y-4 text-zinc-500",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-zinc-100 rounded-full mx-auto flex items-center justify-center",children:(0,r.jsx)(q,{className:"w-10 h-10 text-zinc-400"})}),(0,r.jsx)("p",{className:"text-lg font-medium",children:"No holdings yet"}),(0,r.jsx)("p",{className:"text-sm max-w-sm mx-auto",children:"Start trading to build your portfolio. Your active positions will appear here."})]})})]})]})})}},99439:e=>{"use strict";e.exports=require("os")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[986,97,928,217,253,957,594,85,257],()=>s(79925));module.exports=r})();