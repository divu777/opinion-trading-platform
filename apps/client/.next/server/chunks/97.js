exports.id=97,exports.ids=[97],exports.modules={16:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","CHANNELS"),t&&e.push(t)},transformReply:void 0}},82:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("SETNX"),e.pushKey(t),e.push(s)},transformReply:void 0}},208:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZDIFFSTORE"),e.pushKey(t),e.pushKeysLength(s)},transformReply:void 0}},302:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SDIFF"),e.pushKeys(t)},transformReply:void 0}},936:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(50214);t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUS_RO"),(0,i.parseGeoRadiusWithArguments)(...e)},transformReply:r(s(50214)).default.transformReply}},1087:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xRangeArguments=void 0;let r=s(47470);function i(e,t,s){let r=[e,t];return s?.COUNT&&r.push("COUNT",s.COUNT.toString()),r}t.xRangeArguments=i,t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,...s){e.push("XRANGE"),e.pushKey(t),e.pushVariadic(i(s[0],s[1],s[2]))},transformReply:(e,t,s)=>e.map(r.transformStreamMessageReply.bind(void 0,s))}},1405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,r,i){e.push("LINSERT"),e.pushKey(t),e.push(s,r,i)},transformReply:void 0}},1426:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(50084));t.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("FCALL"),(0,o.parseEvalArguments)(...e)},transformReply:o.default.transformReply}},1909:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(72192);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i,n){e.push("XREADGROUP","GROUP",t,s),n?.COUNT!==void 0&&e.push("COUNT",n.COUNT.toString()),n?.BLOCK!==void 0&&e.push("BLOCK",n.BLOCK.toString()),n?.NOACK&&e.push("NOACK"),(0,r.pushXReadStreams)(e,i)},transformReply:{2:s(47470).transformStreamsMessagesReplyResp2,3:void 0},unstableResp3:!0}},2462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MEMORY","MALLOC-STATS")},transformReply:void 0}},2508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZRANK"),e.pushKey(t),e.push(s)},transformReply:void 0}},2813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HMGET"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},3018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","WHOAMI")},transformReply:void 0}},3051:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("LRANGE"),e.pushKey(t),e.push(s.toString(),r.toString())},transformReply:void 0}},3657:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("PFADD"),e.pushKey(t),s&&e.pushVariadic(s)},transformReply:void 0}},3665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","ID")},transformReply:void 0}},3994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicCommandParser=void 0;class s{#e=[];#t=[];preserve;get redisArgs(){return this.#e}get keys(){return this.#t}get firstKey(){return this.#t[0]}get cacheKey(){let e=Array(2*this.#e.length);for(let t=0;t<this.#e.length;t++)e[t]=this.#e[t].length,e[t+this.#e.length]=this.#e[t];return e.join("_")}push(...e){this.#e.push(...e)}pushVariadic(e){if(Array.isArray(e))for(let t of e)this.push(t);else this.push(e)}pushVariadicWithLength(e){Array.isArray(e)?this.#e.push(e.length.toString()):this.#e.push("1"),this.pushVariadic(e)}pushVariadicNumber(e){if(Array.isArray(e))for(let t of e)this.push(t.toString());else this.push(e.toString())}pushKey(e){this.#t.push(e),this.#e.push(e)}pushKeysLength(e){Array.isArray(e)?this.#e.push(e.length.toString()):this.#e.push("1"),this.pushKeys(e)}pushKeys(e){Array.isArray(e)?(this.#t.push(...e),this.#e.push(...e)):(this.#t.push(e),this.#e.push(e))}}t.BasicCommandParser=s},4009:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("ZPOPMAX"),e.pushKey(t)},transformReply:{2:(e,t,s)=>0===e.length?null:{value:e[0],score:r.transformDoubleReply[2](e[1],t,s)},3:e=>0===e.length?null:{value:e[0],score:e[1]}}}},5192:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("BGSAVE"),t?.SCHEDULE&&e.push("SCHEDULE")},transformReply:void 0}},5519:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);function i(e){if((0,r.isNullReply)(e))return e;let[t,s]=e;return{id:t,message:(0,r.transformTuplesReply)(s)}}t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("XINFO","STREAM"),e.pushKey(t)},transformReply:{2(e){let t={};for(let s=0;s<e.length;s+=2)switch(e[s]){case"first-entry":case"last-entry":t[e[s]]=i(e[s+1]);break;default:t[e[s]]=e[s+1]}return t},3:e=>(e instanceof Map?(e.set("first-entry",i(e.get("first-entry"))),e.set("last-entry",i(e.get("last-entry")))):e instanceof Array?(e[17]=i(e[17]),e[19]=i(e[19])):(e["first-entry"]=i(e["first-entry"]),e["last-entry"]=i(e["last-entry"])),e)}}},5583:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScriptCommand=t.createModuleCommand=t.createFunctionCommand=t.createCommand=t.clientSocketToNode=t.createNodeList=t.parseNode=void 0;let r=s(3994),i=s(29987);function n(e){if(!(e.flags.includes("s_down")||e.flags.includes("disconnected")||e.flags.includes("failover_in_progress")))return{host:e.ip,port:Number(e.port)}}t.parseNode=n,t.createNodeList=function(e){var t=[];for(let s of e){let e=n(s);void 0!==e&&t.push(e)}return t},t.clientSocketToNode=function(e){return{host:e.host,port:e.port}},t.createCommand=function(e,t){let s=(0,i.getTransformReply)(e,t);return async function(...t){let i=new r.BasicCommandParser;return e.parseCommand(i,...t),this._self._execute(e.IS_READ_ONLY,t=>t._executeCommand(e,i,this.commandOptions,s))}},t.createFunctionCommand=function(e,t,s){let n=(0,i.functionArgumentsPrefix)(e,t),o=(0,i.getTransformReply)(t,s);return async function(...e){let s=new r.BasicCommandParser;return s.push(...n),t.parseCommand(s,...e),this._self._execute(t.IS_READ_ONLY,e=>e._executeCommand(t,s,this._self.commandOptions,o))}},t.createModuleCommand=function(e,t){let s=(0,i.getTransformReply)(e,t);return async function(...t){let i=new r.BasicCommandParser;return e.parseCommand(i,...t),this._self._execute(e.IS_READ_ONLY,t=>t._executeCommand(e,i,this._self.commandOptions,s))}},t.createScriptCommand=function(e,t){let s=(0,i.scriptArgumentsPrefix)(e),n=(0,i.getTransformReply)(e,t);return async function(...t){let i=new r.BasicCommandParser;return i.push(...s),e.parseCommand(i,...t),this._self._execute(e.IS_READ_ONLY,t=>t._executeScript(e,i,this.commandOptions,n))}}},5842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("TYPE"),e.pushKey(t)},transformReply:void 0}},6133:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(7682));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];i.default.parseCommand(...e),t.push("WITHMATCHLEN")},transformReply:{2:e=>({matches:e[1],len:e[3]}),3:void 0}}},6199:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i){e.push("XGROUP","SETID"),e.pushKey(t),e.push(s,r),i?.ENTRIESREAD&&e.push("ENTRIESREAD",i.ENTRIESREAD.toString())},transformReply:void 0}},6449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","GETNAME")},transformReply:void 0}},6513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("COMMAND","COUNT")},transformReply:void 0}},6569:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("PUBSUB","NUMPAT")},transformReply:void 0}},6600:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(50084));t.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("EVAL_RO"),(0,o.parseEvalArguments)(...e)},transformReply:o.default.transformReply}},6644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("GET"),e.pushKey(t)},transformReply:void 0}},6756:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ACL","SETUSER",t),e.pushVariadic(s)},transformReply:void 0}},6830:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i,n,o){e.push("XCLAIM"),e.pushKey(t),e.push(s,r,i.toString()),e.pushVariadic(n),o?.IDLE!==void 0&&e.push("IDLE",o.IDLE.toString()),o?.TIME!==void 0&&e.push("TIME",(o.TIME instanceof Date?o.TIME.getTime():o.TIME).toString()),o?.RETRYCOUNT!==void 0&&e.push("RETRYCOUNT",o.RETRYCOUNT.toString()),o?.FORCE&&e.push("FORCE"),o?.LASTID!==void 0&&e.push("LASTID",o.LASTID)},transformReply:(e,t,s)=>e.map(r.transformStreamMessageNullReply.bind(void 0,s))}},7479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("RPOP"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},7518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("SPOP"),e.pushKey(t)},transformReply:void 0}},7588:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(67352));t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUSBYMEMBER_RO"),(0,o.parseGeoRadiusByMemberArguments)(...e)},transformReply:o.default.transformReply}},7604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("BITCOUNT"),e.pushKey(t),s&&(e.push(s.start.toString()),e.push(s.end.toString()),s.mode&&e.push(s.mode))},transformReply:void 0}},7680:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("SMISMEMBER"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},7682:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(12422));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s,r){i.default.parseCommand(e,t,s),e.push("IDX"),r?.MINMATCHLEN&&e.push("MINMATCHLEN",r.MINMATCHLEN.toString())},transformReply:{2:e=>({matches:e[1],len:e[3]}),3:void 0}}},8333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("LATENCY","HISTORY",t)},transformReply:void 0}},8598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("MODULE","UNLOAD",t)},transformReply:void 0}},8955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("ZRANDMEMBER"),e.pushKey(t)},transformReply:void 0}},9061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("DEL"),e.pushKeys(t)},transformReply:void 0}},9147:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,...[t,s]){if(e.push("CONFIG","SET"),"string"==typeof t||t instanceof Buffer)e.push(t,s);else for(let[s,r]of Object.entries(t))e.push(s,r)},transformReply:void 0}},9313:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("SETBIT"),e.pushKey(t),e.push(s.toString(),r.toString())},transformReply:void 0}},9564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HVALS"),e.pushKey(t)},transformReply:void 0}},9980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=/([^\s=]+)=([^\s]*)/g;t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","INFO")},transformReply(e){let t={};for(let r of e.toString().matchAll(s))t[r[1]]=r[2];let r={id:Number(t.id),addr:t.addr,fd:Number(t.fd),name:t.name,age:Number(t.age),idle:Number(t.idle),flags:t.flags,db:Number(t.db),sub:Number(t.sub),psub:Number(t.psub),multi:Number(t.multi),qbuf:Number(t.qbuf),qbufFree:Number(t["qbuf-free"]),argvMem:Number(t["argv-mem"]),obl:Number(t.obl),oll:Number(t.oll),omem:Number(t.omem),totMem:Number(t["tot-mem"]),events:t.events,cmd:t.cmd,user:t.user,libName:t["lib-name"],libVer:t["lib-ver"]};return void 0!==t.laddr&&(r.laddr=t.laddr),void 0!==t.redir&&(r.redir=Number(t.redir)),void 0!==t.ssub&&(r.ssub=Number(t.ssub)),void 0!==t["multi-mem"]&&(r.multiMem=Number(t["multi-mem"])),void 0!==t.resp&&(r.resp=Number(t.resp)),r}}},10163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("GETDEL"),e.pushKey(t)},transformReply:void 0}},10331:(e,t)=>{"use strict";function s(e,t){if(Array.isArray(t)){if(0==t.length)throw Error("empty toSet Argument");if(Array.isArray(t[0]))for(let s of t)e.pushKey(s[0]),e.push(s[1]);else for(let s=0;s<t.length;s+=2)e.pushKey(t[s]),e.push(t[s+1])}else for(let s of Object.entries(t))e.pushKey(s[0]),e.push(s[1])}Object.defineProperty(t,"__esModule",{value:!0}),t.parseMSetArguments=void 0,t.parseMSetArguments=s,t.default={IS_READ_ONLY:!0,parseCommand:(e,t)=>(e.push("MSET"),s(e,t)),transformReply:void 0}},10501:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(78825));t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){i.default.parseCommand(e,t),e.push(s.toString())},transformReply:void 0}},10595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("BRPOPLPUSH"),e.pushKeys([t,s]),e.push(r.toString())},transformReply:void 0}},11265:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(29713),n=r(s(76952)),o=s(69728),a=s(45369),u=s(56602),l=Buffer.from("pong"),d=Buffer.from("RESET"),c={...o.PUSH_TYPE_MAPPING,[o.RESP_TYPES.SIMPLE_STRING]:Buffer};class h{#s;#r;#i=new i.DoublyLinkedList;#n=new i.SinglyLinkedList;#o;#a;decoder;#u=new a.PubSub;get isPubSubActive(){return this.#u.isActive}#l;constructor(e,t,s){this.#s=e,this.#r=t,this.#o=s,this.decoder=this.#d()}#c(e){this.#n.shift().resolve(e)}#h(e){this.#n.shift().reject(e)}#p(e){if(this.#u.handleMessageReply(e))return!0;let t=a.PubSub.isShardedUnsubscribe(e);if(t&&!this.#n.length){let t=e[1].toString();return this.#o(t,this.#u.removeShardedListeners(t)),!0}if(t||a.PubSub.isStatusReply(e)){let t=this.#n.head.value;return(Number.isNaN(t.channelsCounter)&&0===e[2]||0==--t.channelsCounter)&&this.#n.shift().resolve(),!0}}#f(){return this.#n.head.value.typeMapping??{}}#d(){return new o.Decoder({onReply:e=>this.#c(e),onErrorReply:e=>this.#h(e),onPush:e=>{if(!this.#p(e)&&"invalidate"===e[0].toString()&&this.#l)if(null!==e[1])for(let t of e[1])this.#l(t);else this.#l(null)},getTypeMapping:()=>this.#f()})}setInvalidateCallback(e){this.#l=e}addCommand(e,t){return this.#r&&this.#i.length+this.#n.length>=this.#r?Promise.reject(Error("The queue is full")):t?.abortSignal?.aborted?Promise.reject(new u.AbortError):new Promise((s,r)=>{let i,n={args:e,chainId:t?.chainId,abort:void 0,timeout:void 0,resolve:s,reject:r,channelsCounter:void 0,typeMapping:t?.typeMapping},o=t?.timeout;if(o){let e=AbortSignal.timeout(o);n.timeout={signal:e,listener:()=>{this.#i.remove(i),n.reject(new u.TimeoutError)}},e.addEventListener("abort",n.timeout.listener,{once:!0})}let a=t?.abortSignal;a&&(n.abort={signal:a,listener:()=>{this.#i.remove(i),n.reject(new u.AbortError)}},a.addEventListener("abort",n.abort.listener,{once:!0})),i=this.#i.add(n,t?.asap)})}#m(e,t=!1,s){return new Promise((r,i)=>{this.#i.add({args:e.args,chainId:s,abort:void 0,timeout:void 0,resolve(){e.resolve(),r()},reject(t){e.reject?.(),i(t)},channelsCounter:e.channelsCounter,typeMapping:o.PUSH_TYPE_MAPPING},t)})}#_(){2===this.#s&&(this.decoder.onReply=e=>{if(Array.isArray(e)){if(this.#p(e))return;if(l.equals(e[0])){let{resolve:t,typeMapping:s}=this.#n.shift(),r=0===e[1].length?e[0]:e[1];t(s?.[o.RESP_TYPES.SIMPLE_STRING]===Buffer?r:r.toString());return}}return this.#c(e)},this.decoder.getTypeMapping=()=>c)}subscribe(e,t,s,r){let i=this.#u.subscribe(e,t,s,r);if(i)return this.#_(),this.#m(i)}#E(){this.decoder.onReply=e=>this.#c(e),this.decoder.getTypeMapping=()=>this.#f()}unsubscribe(e,t,s,r){let i=this.#u.unsubscribe(e,t,s,r);if(i){if(i&&2===this.#s){let{resolve:e}=i;i.resolve=()=>{this.#u.isActive||this.#E(),e()}}return this.#m(i)}}resubscribe(e){let t=this.#u.resubscribe();if(t.length)return this.#_(),Promise.all(t.map(t=>this.#m(t,!0,e)))}extendPubSubChannelListeners(e,t,s){let r=this.#u.extendChannelListeners(e,t,s);if(r)return this.#_(),this.#m(r)}extendPubSubListeners(e,t){let s=this.#u.extendTypeListeners(e,t);if(s)return this.#_(),this.#m(s)}getPubSubListeners(e){return this.#u.listeners[e]}monitor(e,t){return new Promise((s,r)=>{let i=t?.typeMapping??{};this.#i.add({args:["MONITOR"],chainId:t?.chainId,abort:void 0,timeout:void 0,resolve:()=>{this.#S?this.#S=e:this.decoder.onReply=e,this.decoder.getTypeMapping=()=>i,s()},reject:r,channelsCounter:void 0,typeMapping:i},t?.asap)})}resetDecoder(){this.#E(),this.decoder.reset()}#S;async reset(e,t){return new Promise((s,r)=>{this.#S=this.decoder.onReply,this.decoder.onReply=e=>{if("string"==typeof e&&"RESET"===e||e instanceof Buffer&&d.equals(e)){this.#E(),this.#S=void 0,this.#u.reset(),this.#n.shift().resolve(e);return}this.#S(e)},this.#i.push({args:["RESET"],chainId:e,abort:void 0,timeout:void 0,resolve:s,reject:r,channelsCounter:void 0,typeMapping:t})})}isWaitingToWrite(){return this.#i.length>0}*commandsToWrite(){let e=this.#i.shift();for(;e;){let t;try{t=(0,n.default)(e.args)}catch(t){e.reject(t),e=this.#i.shift();continue}e.args=void 0,e.abort&&(h.#y(e),e.abort=void 0),e.timeout&&(h.#R(e),e.timeout=void 0),this.#a=e.chainId,e.chainId=void 0,this.#n.push(e),yield t,e=this.#i.shift()}}#C(e){for(let t of this.#n)t.reject(e);this.#n.reset()}static #y(e){e.abort.signal.removeEventListener("abort",e.abort.listener)}static #R(e){e.timeout.signal.removeEventListener("abort",e.timeout.listener)}static #O(e,t){e.abort&&h.#y(e),e.timeout&&h.#R(e),e.reject(t)}flushWaitingForReply(e){if(this.resetDecoder(),this.#u.reset(),this.#C(e),this.#a){for(;this.#i.head?.value.chainId===this.#a;)h.#O(this.#i.shift(),e);this.#a=void 0}}flushAll(e){for(let t of(this.resetDecoder(),this.#u.reset(),this.#C(e),this.#i))h.#O(t,e);this.#i.reset()}isEmpty(){return 0===this.#i.length&&0===this.#n.length}}t.default=h},11327:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("VRANDMEMBER"),e.pushKey(t),void 0!==s&&e.push(s.toString())},transformReply:void 0}},11618:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FUNCTION","DELETE",t)},transformReply:void 0}},12166:(e,t)=>{"use strict";function s(e,{longitude:t,latitude:s,member:r}){e.push(t.toString(),s.toString(),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,r,i){if(e.push("GEOADD"),e.pushKey(t),i?.condition?e.push(i.condition):i?.NX?e.push("NX"):i?.XX&&e.push("XX"),i?.CH&&e.push("CH"),Array.isArray(r))for(let t of r)s(e,t);else s(e,r)},transformReply:void 0}},12422:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("LCS"),e.pushKeys([t,s])},transformReply:void 0}},12774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SUNION"),e.pushKeys(t)},transformReply:void 0}},12814:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","FREQ"),e.pushKey(t)},transformReply:void 0}},13392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","GETUSER",t)},transformReply:{2:e=>({flags:e[1],passwords:e[3],commands:e[5],keys:e[7],channels:e[9],selectors:e[11]?.map(e=>({commands:e[1],keys:e[3],channels:e[5]}))}),3:void 0}}},13483:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HRANDFIELD"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},13745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("SREM"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},14633:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","DEBUG",t)},transformReply:void 0}},15208:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(9980));t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","LIST"),t&&(void 0!==t.TYPE?e.push("TYPE",t.TYPE):(e.push("ID"),e.pushVariadic(t.ID)))},transformReply(e){let t=e.toString().split("\n"),s=t.length-1,r=[];for(let e=0;e<s;e++)r.push(i.default.transformReply(t[e]));return r}}},15886:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","SAVECONFIG")},transformReply:void 0}},15955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{#b;#A;get(e){return JSON.stringify(e,r())===this.#A?this.#b:void 0}set(e,t){this.#b=t,this.#A=JSON.stringify(e,r())}}function r(){let e=new WeakSet;return function(t,s){if(s&&"object"==typeof s){if(e.has(s))return"circular";e.add(s)}return s}}t.default=s},16509:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(27422);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,i){e.push("ZINTERSTORE"),e.pushKey(t),(0,r.parseZInterArguments)(e,s,i)},transformReply:void 0}},16723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("INCRBYFLOAT"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},16729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("HGETDEL"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},17051:(e,t)=>{"use strict";function s(e,t,s){e.push(t),s?.MATCH&&e.push("MATCH",s.MATCH),s?.COUNT&&e.push("COUNT",s.COUNT.toString())}Object.defineProperty(t,"__esModule",{value:!0}),t.pushScanArguments=t.parseScanArguments=void 0,t.parseScanArguments=s,t.pushScanArguments=function(e,t,s){return e.push(t.toString()),s?.MATCH&&e.push("MATCH",s.MATCH),s?.COUNT&&e.push("COUNT",s.COUNT.toString()),e},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SCAN"),s(e,t,r),r?.TYPE&&e.push("TYPE",r.TYPE),console.log("eeeeeeeeee",e.redisArgs)},transformReply:([e,t])=>(console.log(e,t),{cursor:e,keys:t})}},17097:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BasicPooledClientSideCache=t.BasicClientSideCache=t.REDIS_FLUSH_MODES=t.GEO_REPLY_WITH=t.createSentinel=t.createCluster=t.createClientPool=t.createClient=t.defineScript=t.VerbatimString=t.RESP_TYPES=void 0;var o=s(69728);Object.defineProperty(t,"RESP_TYPES",{enumerable:!0,get:function(){return o.RESP_TYPES}});var a=s(45732);Object.defineProperty(t,"VerbatimString",{enumerable:!0,get:function(){return a.VerbatimString}});var u=s(95255);Object.defineProperty(t,"defineScript",{enumerable:!0,get:function(){return u.defineScript}}),i(s(56602),t),t.createClient=n(s(62537)).default.create,t.createClientPool=s(87803).RedisClientPool.create,t.createCluster=n(s(99388)).default.create,t.createSentinel=n(s(97782)).default.create;var l=s(83340);Object.defineProperty(t,"GEO_REPLY_WITH",{enumerable:!0,get:function(){return l.GEO_REPLY_WITH}});var d=s(73647);Object.defineProperty(t,"REDIS_FLUSH_MODES",{enumerable:!0,get:function(){return d.REDIS_FLUSH_MODES}});var c=s(42611);Object.defineProperty(t,"BasicClientSideCache",{enumerable:!0,get:function(){return c.BasicClientSideCache}}),Object.defineProperty(t,"BasicPooledClientSideCache",{enumerable:!0,get:function(){return c.BasicPooledClientSideCache}})},17131:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("ZPOPMIN"),e.pushKey(t),e.push(s.toString())},transformReply:s(47470).transformSortedSetReply}},17514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("HPERSIST"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},17607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","NO-EVICT",t?"ON":"OFF")},transformReply:void 0}},17832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("EXPIRETIME"),e.pushKey(t)},transformReply:void 0}},17905:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MEMORY","STATS")},transformReply:{2:(e,t,s)=>{let i={},n=0;for(;n<e.length;)switch(e[n].toString()){case"dataset.percentage":case"peak.percentage":case"allocator-fragmentation.ratio":case"allocator-rss.ratio":case"rss-overhead.ratio":case"fragmentation":i[e[n++]]=r.transformDoubleReply[2](e[n++],t,s);break;default:i[e[n++]]=e[n++]}return i},3:void 0}}},18813:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){if(e.push("GETEX"),e.pushKey(t),"type"in s)switch(s.type){case"EX":case"PX":e.push(s.type,s.value.toString());break;case"EXAT":case"PXAT":e.push(s.type,(0,r.transformEXAT)(s.value));break;case"PERSIST":e.push("PERSIST")}else"EX"in s?e.push("EX",s.EX.toString()):"PX"in s?e.push("PX",s.PX.toString()):"EXAT"in s?e.push("EXAT",(0,r.transformEXAT)(s.EXAT)):"PXAT"in s?e.push("PXAT",(0,r.transformPXAT)(s.PXAT)):e.push("PERSIST")},transformReply:void 0}},19085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("REPLICAOF",t,s.toString())},transformReply:void 0}},19221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){for(let r of(e.push("BITFIELD_RO"),e.pushKey(t),s))e.push("GET"),e.push(r.encoding),e.push(r.offset.toString())},transformReply:void 0}},19621:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("SUNIONSTORE"),e.pushKey(t),e.pushKeys(s)},transformReply:void 0}},20767:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeoRadiusByMemberWithArguments=void 0;let i=r(s(67352)),n=s(82557),o=r(s(83340));function a(e,t,s,r,i,o,a){e.pushKey(t),e.push(s,r.toString(),i),(0,n.parseGeoSearchOptions)(e,a),e.push(...o),e.preserve=o}t.parseGeoRadiusByMemberWithArguments=a,t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s,r,i,n,o){e.push("GEORADIUSBYMEMBER"),a(e,t,s,r,i,n,o)},transformReply:o.default.transformReply}},21434:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","SHARDCHANNELS"),t&&e.push(t)},transformReply:void 0}},22133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i,n){e.push("BLMOVE"),e.pushKeys([t,s]),e.push(r,i,n.toString())},transformReply:void 0}},22697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("DECRBY"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},22795:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("BRPOP"),e.pushKeys(t),e.push(s.toString())},transformReply:r(s(62209)).default.transformReply}},23002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","GETKEYSANDFLAGS"),e.push(...t)},transformReply:e=>e.map(e=>{let[t,s]=e;return{key:t,flags:s}})}},23198:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FUNCTION","STATS")},transformReply:{2:e=>({running_script:function(e){return(0,r.isNullReply)(e)?null:{name:e[1],command:e[3],duration_ms:e[5]}}(e[1]),engines:function(e){let t=Object.create(null);for(let s=0;s<e.length;s++){let r=e[s],i=e[++s];t[r.toString()]={libraries_count:i[1],functions_count:i[3]}}return t}(e[3])}),3:void 0}}},23529:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(17051);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i){e.push("HSCAN"),e.pushKey(t),(0,r.parseScanArguments)(e,s,i)},transformReply([e,t]){let s=[],r=0;for(;r<t.length;)s.push({field:t[r++],value:t[r++]});return{cursor:e,entries:s}}}},23715:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t){e.push("RPOP"),e.pushKey(t)},transformReply:void 0}},24740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t){e.push("INCR"),e.pushKey(t)},transformReply:void 0}},25035:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,IS_FORWARD_COMMAND:!0,parseCommand(e,t,s){e.push("PUBLISH",t,s)},transformReply:void 0}},25424:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(35911);t.default={parseCommand(e,t,s,i){e.push("ZADD"),e.pushKey(t),i?.condition&&e.push(i.condition),i?.comparison&&e.push(i.comparison),i?.CH&&e.push("CH"),e.push("INCR"),(0,r.pushMembers)(e,s)},transformReply:s(47470).transformNullableDoubleReply}},25966:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(41430));t.default={IS_READ_ONLY:!1,parseCommand(e,t,...s){e.push("BLMPOP",t.toString()),(0,o.parseLMPopArguments)(e,...s)},transformReply:o.default.transformReply}},26e3:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(56602);class i{typeMapping;constructor(e){this.typeMapping=e}queue=[];scriptsInUse=new Set;addCommand(e,t){this.queue.push({args:e,transformReply:t})}addScript(e,t,s){let r=[];r.preserve=t.preserve,this.scriptsInUse.has(e.SHA1)?r.push("EVALSHA",e.SHA1):(this.scriptsInUse.add(e.SHA1),r.push("EVAL",e.SCRIPT)),void 0!==e.NUMBER_OF_KEYS&&r.push(e.NUMBER_OF_KEYS.toString()),r.push(...t),this.addCommand(r,s)}transformReplies(e){let t=[],s=e.map((e,s)=>{if(e instanceof r.ErrorReply)return t.push(s),e;let{transformReply:i,args:n}=this.queue[s];return i?i(e,n.preserve,this.typeMapping):e});if(t.length)throw new r.MultiErrorReply(s,t);return s}}t.default=i},26032:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(50084));t.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("EVALSHA_RO"),(0,o.parseEvalArguments)(...e)},transformReply:o.default.transformReply}},26155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("SETRANGE"),e.pushKey(t),e.push(s.toString(),r)},transformReply:void 0}},26529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","NO-TOUCH",t?"ON":"OFF")},transformReply:void 0}},26603:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeoRadiusArguments=void 0;let r=s(82557);function i(e,t,s,i,n,o){e.pushKey(t),e.push(s.longitude.toString(),s.latitude.toString(),i.toString(),n),(0,r.parseGeoSearchOptions)(e,o)}t.parseGeoRadiusArguments=i,t.default={IS_READ_ONLY:!1,parseCommand:(...e)=>(e[0].push("GEORADIUS"),i(...e)),transformReply:void 0}},26646:function(e,t,s){"use strict";var r,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let n=s(56602),o=i(s(62537)),a=s(45369),u=i(s(52782)),l=s(42611);class d{static #T=16384;#g;#N;#M;slots=Array(r.#T);masters=[];replicas=[];nodeByAddress=new Map;pubSubNode;clientSideCache;#v=!1;get isOpen(){return this.#v}#P(e){if(e?.clientSideCache&&e?.RESP!==3)throw Error("Client Side Caching is only supported with RESP3")}constructor(e,t){this.#P(e),this.#g=e,e?.clientSideCache&&(e.clientSideCache instanceof l.PooledClientSideCacheProvider?this.clientSideCache=e.clientSideCache:this.clientSideCache=new l.BasicPooledClientSideCache(e.clientSideCache)),this.#N=o.default.factory(this.#g),this.#M=t}async connect(){if(this.#v)throw Error("Cluster already open");this.#v=!0;try{await this.#I()}catch(e){throw this.#v=!1,e}}async #I(){let e=Math.floor(Math.random()*this.#g.rootNodes.length);for(let t=e;t<this.#g.rootNodes.length;t++){if(!this.#v)throw Error("Cluster closed");if(await this.#D(this.#g.rootNodes[t]))return}for(let t=0;t<e;t++){if(!this.#v)throw Error("Cluster closed");if(await this.#D(this.#g.rootNodes[t]))return}throw new n.RootNodesUnavailableError}#L(){this.slots=Array(r.#T),this.masters=[],this.replicas=[],this._randomNodeIterator=void 0}async #D(e){this.clientSideCache?.clear(),this.clientSideCache?.disable();try{let t=new Set,s=[],r=!0!==this.#g.minimizeConnections,i=await this.#Y(e);for(let{from:e,to:n,master:o,replicas:a}of(this.#L(),i)){let i={master:this.#B(o,!1,r,t,s)};this.#g.useReplicas&&(i.replicas=a.map(e=>this.#B(e,!0,r,t,s)));for(let t=e;t<=n;t++)this.slots[t]=i}if(this.pubSubNode&&!t.has(this.pubSubNode.address)){let e=this.pubSubNode.client.getPubSubListeners(a.PUBSUB_TYPE.CHANNELS),t=this.pubSubNode.client.getPubSubListeners(a.PUBSUB_TYPE.PATTERNS);this.pubSubNode.client.destroy(),(e.size||t.size)&&s.push(this.#U({[a.PUBSUB_TYPE.CHANNELS]:e,[a.PUBSUB_TYPE.PATTERNS]:t}))}for(let[e,s]of this.nodeByAddress.entries()){if(t.has(e))continue;s.client&&s.client.destroy();let{pubSub:r}=s;r&&r.client.destroy(),this.nodeByAddress.delete(e)}return await Promise.all(s),this.clientSideCache?.enable(),!0}catch(e){return this.#M("error",e),!1}}async #Y(e){let t=this.#j(e);t.socket??={},t.socket.reconnectStrategy=!1,t.RESP=this.#g.RESP,t.commandOptions=void 0;let s=await this.#N(t).on("error",e=>this.#M("error",e)).connect();try{return await s.clusterSlots()}finally{s.destroy()}}#w(e){switch(typeof this.#g.nodeAddressMap){case"object":return this.#g.nodeAddressMap[e];case"function":return this.#g.nodeAddressMap(e)}}#j(e){let t;return this.#g.defaults?(t=this.#g.defaults.socket?{...this.#g.defaults.socket,...e?.socket}:e?.socket,{...this.#g.defaults,...e,socket:t}):e}#B(e,t,s,r,i){let n=`${e.host}:${e.port}`,o=this.nodeByAddress.get(n);return o||(o={...e,address:n,readonly:t,client:void 0,connectPromise:void 0},s&&i.push(this.#K(o)),this.nodeByAddress.set(n,o)),r.has(n)||(r.add(n),(t?this.replicas:this.masters).push(o)),o}#x(e,t=e.readonly){return this.#N(this.#j({clientSideCache:this.clientSideCache,RESP:this.#g.RESP,socket:this.#w(e.address)??{host:e.host,port:e.port},readonly:t})).on("error",e=>console.error(e))}#K(e,t){let s=e.client=this.#x(e,t);return e.connectPromise=s.connect().finally(()=>e.connectPromise=void 0)}nodeClient(e){return e.connectPromise??e.client??this.#K(e)}#H;async rediscover(e){return this.#H??=this.#F(e).finally(()=>this.#H=void 0),this.#H}async #F(e){if(!await this.#D(e.options))return this.#I()}quit(){return this.#G(e=>e.quit())}disconnect(){return this.#G(e=>e.disconnect())}close(){return this.#G(e=>e.close())}destroy(){for(let e of(this.#v=!1,this.#k()))e.destroy();this.pubSubNode&&(this.pubSubNode.client.destroy(),this.pubSubNode=void 0),this.#L(),this.nodeByAddress.clear()}*#k(){for(let e of this.masters)e.client&&(yield e.client),e.pubSub&&(yield e.pubSub.client);for(let e of this.replicas)e.client&&(yield e.client)}async #G(e){this.#v=!1;let t=[];for(let s of this.#k())t.push(e(s));this.pubSubNode&&(t.push(e(this.pubSubNode.client)),this.pubSubNode=void 0),this.#L(),this.nodeByAddress.clear(),await Promise.allSettled(t)}getClient(e,t){if(!e)return this.nodeClient(this.getRandomNode());let s=(0,u.default)(e);return t?this.nodeClient(this.getSlotRandomNode(s)):this.nodeClient(this.slots[s].master)}*#V(){let e=Math.floor(Math.random()*(this.masters.length+this.replicas.length));if(e<this.masters.length){do yield this.masters[e];while(++e<this.masters.length);for(let e of this.replicas)yield e}else{e-=this.masters.length;do yield this.replicas[e];while(++e<this.replicas.length)}for(;;){for(let e of this.masters)yield e;for(let e of this.replicas)yield e}}_randomNodeIterator;getRandomNode(){return this._randomNodeIterator??=this.#V(),this._randomNodeIterator.next().value}*#W(e){let t=Math.floor(Math.random()*(1+e.replicas.length));if(t<e.replicas.length)do yield e.replicas[t];while(++t<e.replicas.length);for(;;)for(let t of(yield e.master,e.replicas))yield t}getSlotRandomNode(e){let t=this.slots[e];return t.replicas?.length?(t.nodesIterator??=this.#W(t),t.nodesIterator.next().value):t.master}getMasterByAddress(e){let t=this.nodeByAddress.get(e);if(t)return this.nodeClient(t)}getPubSubClient(){return this.pubSubNode?this.pubSubNode.connectPromise??this.pubSubNode.client:this.#U()}async #U(e){let t=Math.floor(Math.random()*(this.masters.length+this.replicas.length)),s=t<this.masters.length?this.masters[t]:this.replicas[t-this.masters.length],r=this.#x(s,!1);return this.pubSubNode={address:s.address,client:r,connectPromise:r.connect().then(async t=>(e&&await Promise.all([t.extendPubSubListeners(a.PUBSUB_TYPE.CHANNELS,e[a.PUBSUB_TYPE.CHANNELS]),t.extendPubSubListeners(a.PUBSUB_TYPE.PATTERNS,e[a.PUBSUB_TYPE.PATTERNS])]),this.pubSubNode.connectPromise=void 0,t)).catch(e=>{throw this.pubSubNode=void 0,e})},this.pubSubNode.connectPromise}async executeUnsubscribeCommand(e){let t=await this.getPubSubClient();await e(t),t.isPubSubActive||(t.destroy(),this.pubSubNode=void 0)}getShardedPubSubClient(e){let{master:t}=this.slots[(0,u.default)(e)];return t.pubSub?t.pubSub.connectPromise??t.pubSub.client:this.#X(t)}async #X(e){let t=this.#x(e,!1).on("server-sunsubscribe",async(e,s)=>{try{await this.rediscover(t);let r=await this.getShardedPubSubClient(e);await r.extendPubSubChannelListeners(a.PUBSUB_TYPE.SHARDED,e,s)}catch(t){this.#M("sharded-shannel-moved-error",t,e,s)}});return e.pubSub={client:t,connectPromise:t.connect().then(t=>(e.pubSub.connectPromise=void 0,t)).catch(t=>{throw e.pubSub=void 0,t})},e.pubSub.connectPromise}async executeShardedUnsubscribeCommand(e,t){let{master:s}=this.slots[(0,u.default)(e)];if(!s.pubSub)return;let r=s.pubSub.connectPromise?await s.pubSub.connectPromise:s.pubSub.client;await t(r),r.isPubSubActive||(r.destroy(),s.pubSub=void 0)}}r=d,t.default=d},27222:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(12422));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];i.default.parseCommand(...e),t.push("LEN")},transformReply:void 0}},27384:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","FLUSH"),t&&e.push(t)},transformReply:void 0}},27422:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseZInterArguments=void 0;let r=s(47470);function i(e,t,s){(0,r.parseZKeysArguments)(e,t),s?.AGGREGATE&&e.push("AGGREGATE",s.AGGREGATE)}t.parseZInterArguments=i,t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZINTER"),i(e,t,s)},transformReply:void 0}},27745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){if(e.push("CLIENT","TRACKING",t?"ON":"OFF"),t){var r,i,n;if(s?.REDIRECT&&e.push("REDIRECT",s.REDIRECT.toString()),r=s,r?.BCAST===!0){if(e.push("BCAST"),s?.PREFIX)if(Array.isArray(s.PREFIX))for(let t of s.PREFIX)e.push("PREFIX",t);else e.push("PREFIX",s.PREFIX)}else{(i=s,i?.OPTIN===!0)?e.push("OPTIN"):(n=s,n?.OPTOUT===!0&&e.push("OPTOUT"))}s?.NOLOOP&&e.push("NOLOOP")}},transformReply:void 0}},28056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("TTL"),e.pushKey(t)},transformReply:void 0}},28328:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t){e.push("PERSIST"),e.pushKey(t)},transformReply:void 0}},28332:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedisLegacyClient=void 0;let i=s(29987),n=r(s(36440)),o=r(s(26e3));class a{static #z(e,t){let s;return"function"==typeof t[t.length-1]&&(s=t.pop()),a.pushArguments(e,t),s}static pushArguments(e,t){for(let s=0;s<t.length;++s){let r=t[s];Array.isArray(r)?a.pushArguments(e,r):e.push("number"==typeof r||r instanceof Date?r.toString():r)}}static getTransformReply(e,t){return e.TRANSFORM_LEGACY_REPLY?(0,i.getTransformReply)(e,t):void 0}static #Z(e,t,s){let r=a.getTransformReply(t,s);return function(...t){let s=[e],i=a.#z(s,t),n=this.#q.sendCommand(s);if(!i)return void n.catch(e=>this.#q.emit("error",e));n.then(e=>i(null,r?r(e):e)).catch(e=>i(e))}}#q;#$;constructor(e){this.#q=e;let t=e.options?.RESP??2;for(let[e,s]of Object.entries(n.default))this[e]=a.#Z(e,s,t);this.#$=u.factory(t)}sendCommand(...e){let t=[],s=a.#z(t,e),r=this.#q.sendCommand(t);if(!s)return void r.catch(e=>this.#q.emit("error",e));r.then(e=>s(null,e)).catch(e=>s(e))}multi(){return this.#$(this.#q)}}t.RedisLegacyClient=a;class u{static #Z(e,t,s){let r=a.getTransformReply(t,s);return function(...t){let s=[e];return a.pushArguments(s,t),this.#J.addCommand(s,r),this}}static factory(e){let t=class extends u{};for(let[s,r]of Object.entries(n.default))t.prototype[s]=u.#Z(s,r,e);return e=>new t(e)}#J=new o.default;#q;constructor(e){this.#q=e}sendCommand(...e){let t=[];return a.pushArguments(t,e),this.#J.addCommand(t),this}exec(e){let t=this.#q._executeMulti(this.#J.queue);if(!e)return void t.catch(e=>this.#q.emit("error",e));t.then(t=>e(null,this.#J.transformReplies(t))).catch(t=>e?.(t))}}},28519:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,i){e.push("ZCOUNT"),e.pushKey(t),e.push((0,r.transformStringDoubleArgument)(s),(0,r.transformStringDoubleArgument)(i))},transformReply:void 0}},29053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i){e.push("LMOVE"),e.pushKeys([t,s]),e.push(r,i)},transformReply:void 0}},29090:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(1087));t.default={CACHEABLE:o.default.CACHEABLE,IS_READ_ONLY:o.default.IS_READ_ONLY,parseCommand(e,t,...s){e.push("XREVRANGE"),e.pushKey(t),e.pushVariadic((0,o.xRangeArguments)(s[0],s[1],s[2]))},transformReply:o.default.transformReply}},29113:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(26603));t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUS_RO"),(0,o.parseGeoRadiusArguments)(...e)},transformReply:o.default.transformReply}},29310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","KEYSLOT",t)},transformReply:void 0}},29681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","DELUSER"),e.pushVariadic(t)},transformReply:void 0}},29713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SinglyLinkedList=t.DoublyLinkedList=void 0;class s{#Q=0;get length(){return this.#Q}#ee;get head(){return this.#ee}#et;get tail(){return this.#et}push(e){return(++this.#Q,void 0===this.#et)?this.#et=this.#ee={previous:this.#ee,next:void 0,value:e}:this.#et=this.#et.next={previous:this.#et,next:void 0,value:e}}unshift(e){return(++this.#Q,void 0===this.#ee)?this.#ee=this.#et={previous:void 0,next:void 0,value:e}:this.#ee=this.#ee.previous={previous:void 0,next:this.#ee,value:e}}add(e,t=!1){return t?this.unshift(e):this.push(e)}shift(){if(void 0===this.#ee)return;--this.#Q;let e=this.#ee;return e.next?(e.next.previous=e.previous,this.#ee=e.next,e.next=void 0):this.#ee=this.#et=void 0,e.value}remove(e){--this.#Q,this.#et===e&&(this.#et=e.previous),this.#ee===e?this.#ee=e.next:(e.previous.next=e.next,e.previous=void 0),e.next=void 0}reset(){this.#Q=0,this.#ee=this.#et=void 0}*[Symbol.iterator](){let e=this.#ee;for(;void 0!==e;)yield e.value,e=e.next}}t.DoublyLinkedList=s;class r{#Q=0;get length(){return this.#Q}#ee;get head(){return this.#ee}#et;get tail(){return this.#et}push(e){++this.#Q;let t={value:e,next:void 0,removed:!1};return void 0===this.#ee?this.#ee=this.#et=t:this.#et.next=this.#et=t}remove(e,t){if(e.removed)throw Error("node already removed");--this.#Q,this.#ee===e?this.#et===e?this.#ee=this.#et=void 0:this.#ee=e.next:this.#et===e?(this.#et=t,t.next=void 0):t.next=e.next,e.removed=!0}shift(){if(void 0===this.#ee)return;let e=this.#ee;return 0==--this.#Q?this.#ee=this.#et=void 0:this.#ee=e.next,e.removed=!0,e.value}reset(){this.#Q=0,this.#ee=this.#et=void 0}*[Symbol.iterator](){let e=this.#ee;for(;void 0!==e;)yield e.value,e=e.next}}t.SinglyLinkedList=r},29840:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("RENAME"),e.pushKeys([t,s])},transformReply:void 0}},29854:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HASH_EXPIRATION_TIME=void 0,t.HASH_EXPIRATION_TIME={FIELD_NOT_EXISTS:-2,NO_EXPIRATION:-1},t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HEXPIRETIME"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},29987:(e,t)=>{"use strict";function s(){throw Error("Some RESP3 results for Redis Query Engine responses may change. Refer to the readme for guidance")}function r(e,t,s){Object.defineProperty(e,t,{get(){let e=Object.create(s);return e._self=this,Object.defineProperty(this,t,{value:e}),e}})}Object.defineProperty(t,"__esModule",{value:!0}),t.scriptArgumentsPrefix=t.functionArgumentsPrefix=t.getTransformReply=t.attachConfig=void 0,t.attachConfig=function({BaseClass:e,commands:t,createCommand:i,createModuleCommand:n,createFunctionCommand:o,createScriptCommand:a,config:u}){let l=u?.RESP??2,d=class extends e{};for(let[e,r]of Object.entries(t))u?.RESP==3&&r.unstableResp3&&!u.unstableResp3?d.prototype[e]=s:d.prototype[e]=i(r,l);if(u?.modules)for(let[e,t]of Object.entries(u.modules)){let i=Object.create(null);for(let[e,r]of Object.entries(t))3==u.RESP&&r.unstableResp3&&!u.unstableResp3?i[e]=s:i[e]=n(r,l);r(d.prototype,e,i)}if(u?.functions)for(let[e,t]of Object.entries(u.functions)){let s=Object.create(null);for(let[e,r]of Object.entries(t))s[e]=o(e,r,l);r(d.prototype,e,s)}if(u?.scripts)for(let[e,t]of Object.entries(u.scripts))d.prototype[e]=a(t,l);return d},t.getTransformReply=function(e,t){switch(typeof e.transformReply){case"function":return e.transformReply;case"object":return e.transformReply[t]}},t.functionArgumentsPrefix=function(e,t){let s=[t.IS_READ_ONLY?"FCALL_RO":"FCALL",e];return void 0!==t.NUMBER_OF_KEYS&&s.push(t.NUMBER_OF_KEYS.toString()),s},t.scriptArgumentsPrefix=function(e){let t=[e.IS_READ_ONLY?"EVALSHA_RO":"EVALSHA",e.SHA1];return void 0!==e.NUMBER_OF_KEYS&&t.push(e.NUMBER_OF_KEYS.toString()),t}},30221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("INCRBY"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},30419:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HGETALL"),e.pushKey(t)},TRANSFORM_LEGACY_REPLY:!0,transformReply:{2:s(47470).transformTuplesReply,3:void 0}}},31245:(e,t)=>{"use strict";function s(e,t,s,r,i,n){for(let[o,a]of(t.push("XADD"),t.pushKey(s),e&&t.push(e),n?.TRIM&&(n.TRIM.strategy&&t.push(n.TRIM.strategy),n.TRIM.strategyModifier&&t.push(n.TRIM.strategyModifier),t.push(n.TRIM.threshold.toString()),n.TRIM.limit&&t.push("LIMIT",n.TRIM.limit.toString())),t.push(r),Object.entries(i)))t.push(o,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseXAddArguments=void 0,t.parseXAddArguments=s,t.default={IS_READ_ONLY:!1,parseCommand:(...e)=>s(void 0,...e),transformReply:void 0}},31744:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","NODES")},transformReply:void 0}},32486:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t){e.push("SENTINEL","MASTER",t)},transformReply:{2:s(47470).transformTuplesReply,3:void 0}}},32651:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("HDEL"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},32972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","GENPASS"),t&&e.push(t.toString())},transformReply:void 0}},33235:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HASH_EXPIRATION=void 0,t.HASH_EXPIRATION={FIELD_NOT_EXISTS:-2,CONDITION_NOT_MET:0,UPDATED:1,DELETED:2},t.default={parseCommand(e,t,s,r,i){e.push("HEXPIRE"),e.pushKey(t),e.push(r.toString()),i&&e.push(i),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},33667:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","CACHING",t?"YES":"NO")},transformReply:void 0}},33763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("BGREWRITEAOF")},transformReply:void 0}},34656:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("VEMB"),e.pushKey(t),e.push(s)},transformReply:s(47470).transformDoubleArrayReply}},34733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("DBSIZE")},transformReply:void 0}},34830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("SPUBLISH"),e.pushKey(t),e.push(s)},transformReply:void 0}},34996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","EXISTS"),e.pushVariadic(t)},transformReply:void 0}},35083:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("VSETATTR"),e.pushKey(t),e.push(s),"object"==typeof r&&null!==r?e.push(JSON.stringify(r)):e.push(r)},transformReply:s(47470).transformBooleanReply}},35120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("LTRIM"),e.pushKey(t),e.push(s.toString(),r.toString())},transformReply:void 0}},35342:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnableToObtainNewCredentialsError=t.CredentialsError=void 0;class s extends Error{constructor(e){super(`Re-authentication with latest credentials failed: ${e}`),this.name="CredentialsError"}}t.CredentialsError=s;class r extends Error{constructor(e){super(`Unable to obtain new credentials : ${e}`),this.name="UnableToObtainNewCredentialsError"}}t.UnableToObtainNewCredentialsError=r},35352:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","SET-CONFIG-EPOCH",t.toString())},transformReply:void 0}},35567:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("SWAPDB",t.toString(),s.toString())},transformReply:void 0}},35897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("XPENDING"),e.pushKey(t),e.push(s)},transformReply(e){let t=e[3];return{pending:e[0],firstId:e[1],lastId:e[2],consumers:null===t?null:t.map(e=>{let[t,s]=e;return{name:t,deliveriesCounter:Number(s)}})}}}},35911:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushMembers=void 0;let r=s(47470);function i(e,t){if(Array.isArray(t))for(let s of t)n(e,s);else n(e,t)}function n(e,t){e.push((0,r.transformDoubleArgument)(t.score),t.value)}t.default={parseCommand(e,t,s,r){e.push("ZADD"),e.pushKey(t),r?.condition?e.push(r.condition):r?.NX?e.push("NX"):r?.XX&&e.push("XX"),r?.comparison?e.push(r.comparison):r?.LT?e.push("LT"):r?.GT&&e.push("GT"),r?.CH&&e.push("CH"),i(e,s)},transformReply:r.transformDoubleReply},t.pushMembers=i},35952:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,i,n,o){switch(e.push("ZRANGESTORE"),e.pushKey(t),e.pushKey(s),e.push((0,r.transformStringDoubleArgument)(i),(0,r.transformStringDoubleArgument)(n)),o?.BY){case"SCORE":e.push("BYSCORE");break;case"LEX":e.push("BYLEX")}o?.REV&&e.push("REV"),o?.LIMIT&&e.push("LIMIT",o.LIMIT.offset.toString(),o.LIMIT.count.toString())},transformReply:void 0}},36241:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","UNPAUSE")},transformReply:void 0}},36418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("RPUSH"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},36440:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(78563)),n=r(s(29681)),o=r(s(85013)),a=r(s(32972)),u=r(s(13392)),l=r(s(64375)),d=r(s(95787)),c=r(s(39893)),h=r(s(38737)),p=r(s(67062)),f=r(s(6756)),m=r(s(51391)),_=r(s(3018)),E=r(s(58318)),S=r(s(41817)),y=r(s(41532)),R=r(s(33763)),C=r(s(5192)),O=r(s(7604)),b=r(s(19221)),A=r(s(63727)),T=r(s(57500)),g=r(s(82069)),N=r(s(22133)),M=r(s(25966)),v=r(s(62209)),P=r(s(22795)),I=r(s(10595)),D=r(s(92436)),L=r(s(77873)),Y=r(s(98743)),B=r(s(33667)),U=r(s(6449)),j=r(s(73748)),w=r(s(3665)),K=r(s(9980)),x=r(s(36800)),H=r(s(15208)),F=r(s(17607)),G=r(s(26529)),k=r(s(78976)),V=r(s(62293)),W=r(s(27745)),X=r(s(89753)),z=r(s(36241)),Z=r(s(87953)),q=r(s(84576)),$=r(s(46844)),J=r(s(77787)),Q=r(s(87429)),ee=r(s(37379)),et=r(s(67218)),es=r(s(88199)),er=r(s(92210)),ei=r(s(84412)),en=r(s(88618)),eo=r(s(75841)),ea=r(s(29310)),eu=r(s(83380)),el=r(s(74170)),ed=r(s(58418)),ec=r(s(45818)),eh=r(s(31744)),ep=r(s(90268)),ef=r(s(87238)),em=r(s(67894)),e_=r(s(15886)),eE=r(s(35352)),eS=r(s(56477)),ey=r(s(58504)),eR=r(s(6513)),eC=r(s(91022)),eO=r(s(23002)),eb=r(s(47800)),eA=r(s(75836)),eT=r(s(95661)),eg=r(s(37663)),eN=r(s(64290)),eM=r(s(96667)),ev=r(s(9147)),eP=r(s(98759)),eI=r(s(34733)),eD=r(s(78768)),eL=r(s(22697)),eY=r(s(9061)),eB=r(s(96844)),eU=r(s(41263)),ej=r(s(6600)),ew=r(s(50084)),eK=r(s(26032)),ex=r(s(37052)),eH=r(s(12166)),eF=r(s(73393)),eG=r(s(99457)),ek=r(s(90051)),eV=r(s(936)),eW=r(s(29113)),eX=r(s(97105)),ez=r(s(50214)),eZ=r(s(26603)),eq=r(s(77275)),e$=r(s(7588)),eJ=r(s(77138)),eQ=r(s(20767)),e0=r(s(67352)),e1=r(s(83340)),e4=r(s(82557)),e2=r(s(87632)),e3=r(s(6644)),e7=r(s(69821)),e5=r(s(10163)),e6=r(s(18813)),e8=r(s(46455)),e9=r(s(89882)),te=r(s(69954)),tt=r(s(65309)),ts=r(s(63436)),tr=r(s(17832)),ti=r(s(73647)),tn=r(s(42496)),to=r(s(1426)),ta=r(s(60182)),tu=r(s(11618)),tl=r(s(58971)),td=r(s(57663)),tc=r(s(36801)),th=r(s(40309)),tp=r(s(99801)),tf=r(s(48189)),tm=r(s(74171)),t_=r(s(23198)),tE=r(s(32651)),tS=r(s(44432)),ty=r(s(73788)),tR=r(s(33235)),tC=r(s(60890)),tO=r(s(29854)),tb=r(s(60462)),tA=r(s(30419)),tT=r(s(16729)),tg=r(s(92519)),tN=r(s(72967)),tM=r(s(38545)),tv=r(s(66628)),tP=r(s(39449)),tI=r(s(2813)),tD=r(s(17514)),tL=r(s(63437)),tY=r(s(94492)),tB=r(s(41720)),tU=r(s(84168)),tj=r(s(97604)),tw=r(s(13483)),tK=r(s(37951)),tx=r(s(23529)),tH=r(s(83401)),tF=r(s(57026)),tG=r(s(64851)),tk=r(s(51336)),tV=r(s(78450)),tW=r(s(87246)),tX=r(s(9564)),tz=r(s(24740)),tZ=r(s(30221)),tq=r(s(16723)),t$=r(s(77890)),tJ=r(s(70986)),tQ=r(s(71591)),t0=r(s(84114)),t1=r(s(63421)),t4=r(s(8333)),t2=r(s(66790)),t3=r(s(6133)),t7=r(s(7682)),t5=r(s(27222)),t6=r(s(12422)),t8=r(s(85062)),t9=r(s(1405)),se=r(s(66389)),st=r(s(29053)),ss=r(s(41430)),sr=r(s(46599)),si=r(s(10501)),sn=r(s(78825)),so=r(s(45672)),sa=r(s(68248)),su=r(s(85764)),sl=r(s(44954)),sd=r(s(3051)),sc=r(s(51282)),sh=r(s(92070)),sp=r(s(35120)),sf=r(s(50811)),sm=r(s(2462)),s_=r(s(99401)),sE=r(s(17905)),sS=r(s(41805)),sy=r(s(97631)),sR=r(s(76241)),sC=r(s(71501)),sO=r(s(66617)),sb=r(s(8598)),sA=r(s(45839)),sT=r(s(10331)),sg=r(s(91337)),sN=r(s(82705)),sM=r(s(12814)),sv=r(s(41455)),sP=r(s(86884)),sI=r(s(28328)),sD=r(s(69515)),sL=r(s(49106)),sY=r(s(43734)),sB=r(s(3657)),sU=r(s(92277)),sj=r(s(91406)),sw=r(s(54414)),sK=r(s(42891)),sx=r(s(84742)),sH=r(s(25035)),sF=r(s(16)),sG=r(s(6569)),sk=r(s(49566)),sV=r(s(60772)),sW=r(s(21434)),sX=r(s(40414)),sz=r(s(58044)),sZ=r(s(29840)),sq=r(s(89706)),s$=r(s(19085)),sJ=r(s(69944)),sQ=r(s(98318)),s0=r(s(49366)),s1=r(s(7479)),s4=r(s(23715)),s2=r(s(69003)),s3=r(s(36418)),s7=r(s(51156)),s5=r(s(49150)),s6=r(s(17051)),s8=r(s(98179)),s9=r(s(14633)),re=r(s(34996)),rt=r(s(27384)),rs=r(s(81860)),rr=r(s(98404)),ri=r(s(302)),rn=r(s(45325)),ro=r(s(49304)),ra=r(s(9313)),ru=r(s(88217)),rl=r(s(82)),rd=r(s(26155)),rc=r(s(43595)),rh=r(s(49905)),rp=r(s(81542)),rf=r(s(94435)),rm=r(s(73314)),r_=r(s(7680)),rE=r(s(81380)),rS=r(s(71538)),ry=r(s(74360)),rR=r(s(88390)),rC=r(s(46534)),rO=r(s(7518)),rb=r(s(34830)),rA=r(s(44247)),rT=r(s(86828)),rg=r(s(13745)),rN=r(s(88740)),rM=r(s(48004)),rv=r(s(12774)),rP=r(s(19621)),rI=r(s(35567)),rD=r(s(57751)),rL=r(s(56419)),rY=r(s(28056)),rB=r(s(5842)),rU=r(s(43693)),rj=r(s(38939)),rw=r(s(79811)),rK=r(s(47123)),rx=r(s(31245)),rH=r(s(62445)),rF=r(s(95627)),rG=r(s(61746)),rk=r(s(6830)),rV=r(s(90043)),rW=r(s(58672)),rX=r(s(65704)),rz=r(s(58515)),rZ=r(s(67656)),rq=r(s(6199)),r$=r(s(47846)),rJ=r(s(84159)),rQ=r(s(5519)),r0=r(s(81449)),r1=r(s(49955)),r4=r(s(35897)),r2=r(s(1087)),r3=r(s(72192)),r7=r(s(1909)),r5=r(s(29090)),r6=r(s(95019)),r8=r(s(41748)),r9=r(s(25424)),ie=r(s(35911)),it=r(s(96564)),is=r(s(28519)),ir=r(s(49195)),ii=r(s(94109)),io=r(s(208)),ia=r(s(87661)),iu=r(s(48002)),il=r(s(27422)),id=r(s(99024)),ic=r(s(16509)),ih=r(s(75850)),ip=r(s(58172)),im=r(s(91613)),i_=r(s(54981)),iE=r(s(4009)),iS=r(s(17131)),iy=r(s(60127)),iR=r(s(87405)),iC=r(s(86847)),iO=r(s(8955)),ib=r(s(36715)),iA=r(s(75933)),iT=r(s(78667)),ig=r(s(49352)),iN=r(s(59820)),iM=r(s(35952)),iv=r(s(94230)),iP=r(s(40173)),iI=r(s(2508)),iD=r(s(70956)),iL=r(s(60605)),iY=r(s(88624)),iB=r(s(42223)),iU=r(s(75163)),ij=r(s(50018)),iw=r(s(76165)),iK=r(s(99431)),ix=r(s(73026)),iH=r(s(75923)),iF=r(s(96240)),iG=r(s(62498)),ik=r(s(34656)),iV=r(s(86757)),iW=r(s(96943)),iX=r(s(91374)),iz=r(s(46541)),iZ=r(s(86043)),iq=r(s(11327)),i$=r(s(90856)),iJ=r(s(35083)),iQ=r(s(84531)),i0=r(s(73889));t.default={ACL_CAT:i.default,aclCat:i.default,ACL_DELUSER:n.default,aclDelUser:n.default,ACL_DRYRUN:o.default,aclDryRun:o.default,ACL_GENPASS:a.default,aclGenPass:a.default,ACL_GETUSER:u.default,aclGetUser:u.default,ACL_LIST:l.default,aclList:l.default,ACL_LOAD:d.default,aclLoad:d.default,ACL_LOG_RESET:c.default,aclLogReset:c.default,ACL_LOG:h.default,aclLog:h.default,ACL_SAVE:p.default,aclSave:p.default,ACL_SETUSER:f.default,aclSetUser:f.default,ACL_USERS:m.default,aclUsers:m.default,ACL_WHOAMI:_.default,aclWhoAmI:_.default,APPEND:E.default,append:E.default,ASKING:S.default,asking:S.default,AUTH:y.default,auth:y.default,BGREWRITEAOF:R.default,bgRewriteAof:R.default,BGSAVE:C.default,bgSave:C.default,BITCOUNT:O.default,bitCount:O.default,BITFIELD_RO:b.default,bitFieldRo:b.default,BITFIELD:A.default,bitField:A.default,BITOP:T.default,bitOp:T.default,BITPOS:g.default,bitPos:g.default,BLMOVE:N.default,blMove:N.default,BLMPOP:M.default,blmPop:M.default,BLPOP:v.default,blPop:v.default,BRPOP:P.default,brPop:P.default,BRPOPLPUSH:I.default,brPopLPush:I.default,BZMPOP:D.default,bzmPop:D.default,BZPOPMAX:L.default,bzPopMax:L.default,BZPOPMIN:Y.default,bzPopMin:Y.default,CLIENT_CACHING:B.default,clientCaching:B.default,CLIENT_GETNAME:U.default,clientGetName:U.default,CLIENT_GETREDIR:j.default,clientGetRedir:j.default,CLIENT_ID:w.default,clientId:w.default,CLIENT_INFO:K.default,clientInfo:K.default,CLIENT_KILL:x.default,clientKill:x.default,CLIENT_LIST:H.default,clientList:H.default,"CLIENT_NO-EVICT":F.default,clientNoEvict:F.default,"CLIENT_NO-TOUCH":G.default,clientNoTouch:G.default,CLIENT_PAUSE:k.default,clientPause:k.default,CLIENT_SETNAME:V.default,clientSetName:V.default,CLIENT_TRACKING:W.default,clientTracking:W.default,CLIENT_TRACKINGINFO:X.default,clientTrackingInfo:X.default,CLIENT_UNPAUSE:z.default,clientUnpause:z.default,CLUSTER_ADDSLOTS:Z.default,clusterAddSlots:Z.default,CLUSTER_ADDSLOTSRANGE:q.default,clusterAddSlotsRange:q.default,CLUSTER_BUMPEPOCH:$.default,clusterBumpEpoch:$.default,"CLUSTER_COUNT-FAILURE-REPORTS":J.default,clusterCountFailureReports:J.default,CLUSTER_COUNTKEYSINSLOT:Q.default,clusterCountKeysInSlot:Q.default,CLUSTER_DELSLOTS:ee.default,clusterDelSlots:ee.default,CLUSTER_DELSLOTSRANGE:et.default,clusterDelSlotsRange:et.default,CLUSTER_FAILOVER:es.default,clusterFailover:es.default,CLUSTER_FLUSHSLOTS:er.default,clusterFlushSlots:er.default,CLUSTER_FORGET:ei.default,clusterForget:ei.default,CLUSTER_GETKEYSINSLOT:en.default,clusterGetKeysInSlot:en.default,CLUSTER_INFO:eo.default,clusterInfo:eo.default,CLUSTER_KEYSLOT:ea.default,clusterKeySlot:ea.default,CLUSTER_LINKS:eu.default,clusterLinks:eu.default,CLUSTER_MEET:el.default,clusterMeet:el.default,CLUSTER_MYID:ed.default,clusterMyId:ed.default,CLUSTER_MYSHARDID:ec.default,clusterMyShardId:ec.default,CLUSTER_NODES:eh.default,clusterNodes:eh.default,CLUSTER_REPLICAS:ep.default,clusterReplicas:ep.default,CLUSTER_REPLICATE:ef.default,clusterReplicate:ef.default,CLUSTER_RESET:em.default,clusterReset:em.default,CLUSTER_SAVECONFIG:e_.default,clusterSaveConfig:e_.default,"CLUSTER_SET-CONFIG-EPOCH":eE.default,clusterSetConfigEpoch:eE.default,CLUSTER_SETSLOT:eS.default,clusterSetSlot:eS.default,CLUSTER_SLOTS:ey.default,clusterSlots:ey.default,COMMAND_COUNT:eR.default,commandCount:eR.default,COMMAND_GETKEYS:eC.default,commandGetKeys:eC.default,COMMAND_GETKEYSANDFLAGS:eO.default,commandGetKeysAndFlags:eO.default,COMMAND_INFO:eb.default,commandInfo:eb.default,COMMAND_LIST:eA.default,commandList:eA.default,COMMAND:eT.default,command:eT.default,CONFIG_GET:eg.default,configGet:eg.default,CONFIG_RESETASTAT:eN.default,configResetStat:eN.default,CONFIG_REWRITE:eM.default,configRewrite:eM.default,CONFIG_SET:ev.default,configSet:ev.default,COPY:eP.default,copy:eP.default,DBSIZE:eI.default,dbSize:eI.default,DECR:eD.default,decr:eD.default,DECRBY:eL.default,decrBy:eL.default,DEL:eY.default,del:eY.default,DUMP:eB.default,dump:eB.default,ECHO:eU.default,echo:eU.default,EVAL_RO:ej.default,evalRo:ej.default,EVAL:ew.default,eval:ew.default,EVALSHA_RO:eK.default,evalShaRo:eK.default,EVALSHA:ex.default,evalSha:ex.default,EXISTS:te.default,exists:te.default,EXPIRE:tt.default,expire:tt.default,EXPIREAT:ts.default,expireAt:ts.default,EXPIRETIME:tr.default,expireTime:tr.default,FLUSHALL:ti.default,flushAll:ti.default,FLUSHDB:tn.default,flushDb:tn.default,FCALL:to.default,fCall:to.default,FCALL_RO:ta.default,fCallRo:ta.default,FUNCTION_DELETE:tu.default,functionDelete:tu.default,FUNCTION_DUMP:tl.default,functionDump:tl.default,FUNCTION_FLUSH:td.default,functionFlush:td.default,FUNCTION_KILL:tc.default,functionKill:tc.default,FUNCTION_LIST_WITHCODE:th.default,functionListWithCode:th.default,FUNCTION_LIST:tp.default,functionList:tp.default,FUNCTION_LOAD:tf.default,functionLoad:tf.default,FUNCTION_RESTORE:tm.default,functionRestore:tm.default,FUNCTION_STATS:t_.default,functionStats:t_.default,GEOADD:eH.default,geoAdd:eH.default,GEODIST:eF.default,geoDist:eF.default,GEOHASH:eG.default,geoHash:eG.default,GEOPOS:ek.default,geoPos:ek.default,GEORADIUS_RO_WITH:eV.default,geoRadiusRoWith:eV.default,GEORADIUS_RO:eW.default,geoRadiusRo:eW.default,GEORADIUS_STORE:eX.default,geoRadiusStore:eX.default,GEORADIUS_WITH:ez.default,geoRadiusWith:ez.default,GEORADIUS:eZ.default,geoRadius:eZ.default,GEORADIUSBYMEMBER_RO_WITH:eq.default,geoRadiusByMemberRoWith:eq.default,GEORADIUSBYMEMBER_RO:e$.default,geoRadiusByMemberRo:e$.default,GEORADIUSBYMEMBER_STORE:eJ.default,geoRadiusByMemberStore:eJ.default,GEORADIUSBYMEMBER_WITH:eQ.default,geoRadiusByMemberWith:eQ.default,GEORADIUSBYMEMBER:e0.default,geoRadiusByMember:e0.default,GEOSEARCH_WITH:e1.default,geoSearchWith:e1.default,GEOSEARCH:e4.default,geoSearch:e4.default,GEOSEARCHSTORE:e2.default,geoSearchStore:e2.default,GET:e3.default,get:e3.default,GETBIT:e7.default,getBit:e7.default,GETDEL:e5.default,getDel:e5.default,GETEX:e6.default,getEx:e6.default,GETRANGE:e8.default,getRange:e8.default,GETSET:e9.default,getSet:e9.default,HDEL:tE.default,hDel:tE.default,HELLO:tS.default,hello:tS.default,HEXISTS:ty.default,hExists:ty.default,HEXPIRE:tR.default,hExpire:tR.default,HEXPIREAT:tC.default,hExpireAt:tC.default,HEXPIRETIME:tO.default,hExpireTime:tO.default,HGET:tb.default,hGet:tb.default,HGETALL:tA.default,hGetAll:tA.default,HGETDEL:tT.default,hGetDel:tT.default,HGETEX:tg.default,hGetEx:tg.default,HINCRBY:tN.default,hIncrBy:tN.default,HINCRBYFLOAT:tM.default,hIncrByFloat:tM.default,HKEYS:tv.default,hKeys:tv.default,HLEN:tP.default,hLen:tP.default,HMGET:tI.default,hmGet:tI.default,HPERSIST:tD.default,hPersist:tD.default,HPEXPIRE:tL.default,hpExpire:tL.default,HPEXPIREAT:tY.default,hpExpireAt:tY.default,HPEXPIRETIME:tB.default,hpExpireTime:tB.default,HPTTL:tU.default,hpTTL:tU.default,HRANDFIELD_COUNT_WITHVALUES:tj.default,hRandFieldCountWithValues:tj.default,HRANDFIELD_COUNT:tw.default,hRandFieldCount:tw.default,HRANDFIELD:tK.default,hRandField:tK.default,HSCAN:tx.default,hScan:tx.default,HSCAN_NOVALUES:tH.default,hScanNoValues:tH.default,HSET:tF.default,hSet:tF.default,HSETEX:tG.default,hSetEx:tG.default,HSETNX:tk.default,hSetNX:tk.default,HSTRLEN:tV.default,hStrLen:tV.default,HTTL:tW.default,hTTL:tW.default,HVALS:tX.default,hVals:tX.default,INCR:tz.default,incr:tz.default,INCRBY:tZ.default,incrBy:tZ.default,INCRBYFLOAT:tq.default,incrByFloat:tq.default,INFO:t$.default,info:t$.default,KEYS:tJ.default,keys:tJ.default,LASTSAVE:tQ.default,lastSave:tQ.default,LATENCY_DOCTOR:t0.default,latencyDoctor:t0.default,LATENCY_GRAPH:t1.default,latencyGraph:t1.default,LATENCY_HISTORY:t4.default,latencyHistory:t4.default,LATENCY_LATEST:t2.default,latencyLatest:t2.default,LCS_IDX_WITHMATCHLEN:t3.default,lcsIdxWithMatchLen:t3.default,LCS_IDX:t7.default,lcsIdx:t7.default,LCS_LEN:t5.default,lcsLen:t5.default,LCS:t6.default,lcs:t6.default,LINDEX:t8.default,lIndex:t8.default,LINSERT:t9.default,lInsert:t9.default,LLEN:se.default,lLen:se.default,LMOVE:st.default,lMove:st.default,LMPOP:ss.default,lmPop:ss.default,LOLWUT:sr.default,LPOP_COUNT:si.default,lPopCount:si.default,LPOP:sn.default,lPop:sn.default,LPOS_COUNT:so.default,lPosCount:so.default,LPOS:sa.default,lPos:sa.default,LPUSH:su.default,lPush:su.default,LPUSHX:sl.default,lPushX:sl.default,LRANGE:sd.default,lRange:sd.default,LREM:sc.default,lRem:sc.default,LSET:sh.default,lSet:sh.default,LTRIM:sp.default,lTrim:sp.default,MEMORY_DOCTOR:sf.default,memoryDoctor:sf.default,"MEMORY_MALLOC-STATS":sm.default,memoryMallocStats:sm.default,MEMORY_PURGE:s_.default,memoryPurge:s_.default,MEMORY_STATS:sE.default,memoryStats:sE.default,MEMORY_USAGE:sS.default,memoryUsage:sS.default,MGET:sy.default,mGet:sy.default,MIGRATE:sR.default,migrate:sR.default,MODULE_LIST:sC.default,moduleList:sC.default,MODULE_LOAD:sO.default,moduleLoad:sO.default,MODULE_UNLOAD:sb.default,moduleUnload:sb.default,MOVE:sA.default,move:sA.default,MSET:sT.default,mSet:sT.default,MSETNX:sg.default,mSetNX:sg.default,OBJECT_ENCODING:sN.default,objectEncoding:sN.default,OBJECT_FREQ:sM.default,objectFreq:sM.default,OBJECT_IDLETIME:sv.default,objectIdleTime:sv.default,OBJECT_REFCOUNT:sP.default,objectRefCount:sP.default,PERSIST:sI.default,persist:sI.default,PEXPIRE:sD.default,pExpire:sD.default,PEXPIREAT:sL.default,pExpireAt:sL.default,PEXPIRETIME:sY.default,pExpireTime:sY.default,PFADD:sB.default,pfAdd:sB.default,PFCOUNT:sU.default,pfCount:sU.default,PFMERGE:sj.default,pfMerge:sj.default,PING:sw.default,ping:sw.default,PSETEX:sK.default,pSetEx:sK.default,PTTL:sx.default,pTTL:sx.default,PUBLISH:sH.default,publish:sH.default,PUBSUB_CHANNELS:sF.default,pubSubChannels:sF.default,PUBSUB_NUMPAT:sG.default,pubSubNumPat:sG.default,PUBSUB_NUMSUB:sk.default,pubSubNumSub:sk.default,PUBSUB_SHARDNUMSUB:sV.default,pubSubShardNumSub:sV.default,PUBSUB_SHARDCHANNELS:sW.default,pubSubShardChannels:sW.default,RANDOMKEY:sX.default,randomKey:sX.default,READONLY:sz.default,readonly:sz.default,RENAME:sZ.default,rename:sZ.default,RENAMENX:sq.default,renameNX:sq.default,REPLICAOF:s$.default,replicaOf:s$.default,"RESTORE-ASKING":sJ.default,restoreAsking:sJ.default,RESTORE:sQ.default,restore:sQ.default,RPOP_COUNT:s1.default,rPopCount:s1.default,ROLE:s0.default,role:s0.default,RPOP:s4.default,rPop:s4.default,RPOPLPUSH:s2.default,rPopLPush:s2.default,RPUSH:s3.default,rPush:s3.default,RPUSHX:s7.default,rPushX:s7.default,SADD:s5.default,sAdd:s5.default,SCAN:s6.default,scan:s6.default,SCARD:s8.default,sCard:s8.default,SCRIPT_DEBUG:s9.default,scriptDebug:s9.default,SCRIPT_EXISTS:re.default,scriptExists:re.default,SCRIPT_FLUSH:rt.default,scriptFlush:rt.default,SCRIPT_KILL:rs.default,scriptKill:rs.default,SCRIPT_LOAD:rr.default,scriptLoad:rr.default,SDIFF:ri.default,sDiff:ri.default,SDIFFSTORE:rn.default,sDiffStore:rn.default,SET:ro.default,set:ro.default,SETBIT:ra.default,setBit:ra.default,SETEX:ru.default,setEx:ru.default,SETNX:rl.default,setNX:rl.default,SETRANGE:rd.default,setRange:rd.default,SINTER:rc.default,sInter:rc.default,SINTERCARD:rh.default,sInterCard:rh.default,SINTERSTORE:rp.default,sInterStore:rp.default,SISMEMBER:rf.default,sIsMember:rf.default,SMEMBERS:rm.default,sMembers:rm.default,SMISMEMBER:r_.default,smIsMember:r_.default,SMOVE:rE.default,sMove:rE.default,SORT_RO:rS.default,sortRo:rS.default,SORT_STORE:ry.default,sortStore:ry.default,SORT:rR.default,sort:rR.default,SPOP_COUNT:rC.default,sPopCount:rC.default,SPOP:rO.default,sPop:rO.default,SPUBLISH:rb.default,sPublish:rb.default,SRANDMEMBER_COUNT:rA.default,sRandMemberCount:rA.default,SRANDMEMBER:rT.default,sRandMember:rT.default,SREM:rg.default,sRem:rg.default,SSCAN:rN.default,sScan:rN.default,STRLEN:rM.default,strLen:rM.default,SUNION:rv.default,sUnion:rv.default,SUNIONSTORE:rP.default,sUnionStore:rP.default,SWAPDB:rI.default,swapDb:rI.default,TIME:rD.default,time:rD.default,TOUCH:rL.default,touch:rL.default,TTL:rY.default,ttl:rY.default,TYPE:rB.default,type:rB.default,UNLINK:rU.default,unlink:rU.default,WAIT:rj.default,wait:rj.default,XACK:rw.default,xAck:rw.default,XADD_NOMKSTREAM:rK.default,xAddNoMkStream:rK.default,XADD:rx.default,xAdd:rx.default,XAUTOCLAIM_JUSTID:rH.default,xAutoClaimJustId:rH.default,XAUTOCLAIM:rF.default,xAutoClaim:rF.default,XCLAIM_JUSTID:rG.default,xClaimJustId:rG.default,XCLAIM:rk.default,xClaim:rk.default,XDEL:rV.default,xDel:rV.default,XGROUP_CREATE:rW.default,xGroupCreate:rW.default,XGROUP_CREATECONSUMER:rX.default,xGroupCreateConsumer:rX.default,XGROUP_DELCONSUMER:rz.default,xGroupDelConsumer:rz.default,XGROUP_DESTROY:rZ.default,xGroupDestroy:rZ.default,XGROUP_SETID:rq.default,xGroupSetId:rq.default,XINFO_CONSUMERS:r$.default,xInfoConsumers:r$.default,XINFO_GROUPS:rJ.default,xInfoGroups:rJ.default,XINFO_STREAM:rQ.default,xInfoStream:rQ.default,XLEN:r0.default,xLen:r0.default,XPENDING_RANGE:r1.default,xPendingRange:r1.default,XPENDING:r4.default,xPending:r4.default,XRANGE:r2.default,xRange:r2.default,XREAD:r3.default,xRead:r3.default,XREADGROUP:r7.default,xReadGroup:r7.default,XREVRANGE:r5.default,xRevRange:r5.default,XSETID:r6.default,xSetId:r6.default,XTRIM:r8.default,xTrim:r8.default,ZADD_INCR:r9.default,zAddIncr:r9.default,ZADD:ie.default,zAdd:ie.default,ZCARD:it.default,zCard:it.default,ZCOUNT:is.default,zCount:is.default,ZDIFF_WITHSCORES:ir.default,zDiffWithScores:ir.default,ZDIFF:ii.default,zDiff:ii.default,ZDIFFSTORE:io.default,zDiffStore:io.default,ZINCRBY:ia.default,zIncrBy:ia.default,ZINTER_WITHSCORES:iu.default,zInterWithScores:iu.default,ZINTER:il.default,zInter:il.default,ZINTERCARD:id.default,zInterCard:id.default,ZINTERSTORE:ic.default,zInterStore:ic.default,ZLEXCOUNT:ih.default,zLexCount:ih.default,ZMPOP:ip.default,zmPop:ip.default,ZMSCORE:im.default,zmScore:im.default,ZPOPMAX_COUNT:i_.default,zPopMaxCount:i_.default,ZPOPMAX:iE.default,zPopMax:iE.default,ZPOPMIN_COUNT:iS.default,zPopMinCount:iS.default,ZPOPMIN:iy.default,zPopMin:iy.default,ZRANDMEMBER_COUNT_WITHSCORES:iR.default,zRandMemberCountWithScores:iR.default,ZRANDMEMBER_COUNT:iC.default,zRandMemberCount:iC.default,ZRANDMEMBER:iO.default,zRandMember:iO.default,ZRANGE_WITHSCORES:ib.default,zRangeWithScores:ib.default,ZRANGE:iA.default,zRange:iA.default,ZRANGEBYLEX:iT.default,zRangeByLex:iT.default,ZRANGEBYSCORE_WITHSCORES:ig.default,zRangeByScoreWithScores:ig.default,ZRANGEBYSCORE:iN.default,zRangeByScore:iN.default,ZRANGESTORE:iM.default,zRangeStore:iM.default,ZRANK_WITHSCORE:iP.default,zRankWithScore:iP.default,ZRANK:iI.default,zRank:iI.default,ZREM:iD.default,zRem:iD.default,ZREMRANGEBYLEX:iL.default,zRemRangeByLex:iL.default,ZREMRANGEBYRANK:iY.default,zRemRangeByRank:iY.default,ZREMRANGEBYSCORE:iv.default,zRemRangeByScore:iv.default,ZREVRANK:iB.default,zRevRank:iB.default,ZSCAN:iU.default,zScan:iU.default,ZSCORE:ij.default,zScore:ij.default,ZUNION_WITHSCORES:iw.default,zUnionWithScores:iw.default,ZUNION:iK.default,zUnion:iK.default,ZUNIONSTORE:ix.default,zUnionStore:ix.default,VADD:iH.default,vAdd:iH.default,VCARD:iF.default,vCard:iF.default,VDIM:iG.default,vDim:iG.default,VEMB:ik.default,vEmb:ik.default,VEMB_RAW:iV.default,vEmbRaw:iV.default,VGETATTR:iW.default,vGetAttr:iW.default,VINFO:iX.default,vInfo:iX.default,VLINKS:iz.default,vLinks:iz.default,VLINKS_WITHSCORES:iZ.default,vLinksWithScores:iZ.default,VRANDMEMBER:iq.default,vRandMember:iq.default,VREM:i$.default,vRem:i$.default,VSETATTR:iJ.default,vSetAttr:iJ.default,VSIM:iQ.default,vSim:iQ.default,VSIM_WITHSCORES:i0.default,vSimWithScores:i0.default}},36715:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(75933));t.default={CACHEABLE:n.default.CACHEABLE,IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:i.transformSortedSetReply}},36800:(e,t)=>{"use strict";function s(e,s){if(s===t.CLIENT_KILL_FILTERS.SKIP_ME)return void e.push("SKIPME");switch(e.push(s.filter),s.filter){case t.CLIENT_KILL_FILTERS.ADDRESS:e.push(s.address);break;case t.CLIENT_KILL_FILTERS.LOCAL_ADDRESS:e.push(s.localAddress);break;case t.CLIENT_KILL_FILTERS.ID:e.push("number"==typeof s.id?s.id.toString():s.id);break;case t.CLIENT_KILL_FILTERS.TYPE:e.push(s.type);break;case t.CLIENT_KILL_FILTERS.USER:e.push(s.username);break;case t.CLIENT_KILL_FILTERS.SKIP_ME:e.push(s.skipMe?"yes":"no");break;case t.CLIENT_KILL_FILTERS.MAXAGE:e.push(s.maxAge.toString())}}Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_KILL_FILTERS=void 0,t.CLIENT_KILL_FILTERS={ADDRESS:"ADDR",LOCAL_ADDRESS:"LADDR",ID:"ID",TYPE:"TYPE",USER:"USER",SKIP_ME:"SKIPME",MAXAGE:"MAXAGE"},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){if(e.push("CLIENT","KILL"),Array.isArray(t))for(let r of t)s(e,r);else s(e,t)},transformReply:void 0}},36801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FUNCTION","KILL")},transformReply:void 0}},37052:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(50084));t.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("EVALSHA"),(0,o.parseEvalArguments)(...e)},transformReply:o.default.transformReply}},37379:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","DELSLOTS"),e.pushVariadicNumber(t)},transformReply:void 0}},37663:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CONFIG","GET"),e.pushVariadic(t)},transformReply:{2:s(47470).transformTuplesReply,3:void 0}}},37715:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaitQueue=void 0;let r=s(29713);class i{#es=new r.SinglyLinkedList;#er=new r.SinglyLinkedList;push(e){let t=this.#er.shift();if(void 0!==t)return void t(e);this.#es.push(e)}shift(){return this.#es.shift()}wait(){return new Promise(e=>this.#er.push(e))}}t.WaitQueue=i},37951:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("HRANDFIELD"),e.pushKey(t)},transformReply:void 0}},38545:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("HINCRBYFLOAT"),e.pushKey(t),e.push(s,r.toString())},transformReply:void 0}},38737:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","LOG"),void 0!=t&&e.push(t.toString())},transformReply:{2:(e,t,s)=>e.map(e=>({count:e[1],reason:e[3],context:e[5],object:e[7],username:e[9],"age-seconds":r.transformDoubleReply[2](e[11],t,s),"client-info":e[13],"entry-id":e[15],"timestamp-created":e[17],"timestamp-last-updated":e[19]})),3:void 0}}},38939:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("WAIT",t.toString(),s.toString())},transformReply:void 0}},39449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HLEN"),e.pushKey(t)},transformReply:void 0}},39502:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(36440)),n=r(s(26e3)),o=s(29987),a=s(3994);class u{static _createCommand(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return i.preserve=r.preserve,this.addCommand(e.IS_READ_ONLY,i,s)}}static _createModuleCommand(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return i.preserve=r.preserve,this._self.addCommand(e.IS_READ_ONLY,i,s)}}static _createFunctionCommand(e,t,s){let r=(0,o.functionArgumentsPrefix)(e,t),i=(0,o.getTransformReply)(t,s);return function(...e){let s=new a.BasicCommandParser;s.push(...r),t.parseCommand(s,...e);let n=s.redisArgs;return n.preserve=s.preserve,this._self.addCommand(t.IS_READ_ONLY,n,i)}}static _createScriptCommand(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return i.preserve=r.preserve,this.#ei(e.IS_READ_ONLY,e,i,s)}}static extend(e){return(0,o.attachConfig)({BaseClass:u,commands:i.default,createCommand:u._createCommand,createModuleCommand:u._createModuleCommand,createFunctionCommand:u._createFunctionCommand,createScriptCommand:u._createScriptCommand,config:e})}#J=new n.default;#en;#eo=!0;constructor(e,t){this.#J=new n.default(t),this.#en=e}#ea(e){this.#eo&&=e}addCommand(e,t,s){return this.#ea(e),this.#J.addCommand(t,s),this}#ei(e,t,s,r){return this.#ea(e),this.#J.addScript(t,s,r),this}async exec(e=!1){return e?this.execAsPipeline():this.#J.transformReplies(await this.#en._executeMulti(this.#eo,this.#J.queue))}EXEC=this.exec;execTyped(e=!1){return this.exec(e)}async execAsPipeline(){return 0===this.#J.queue.length?[]:this.#J.transformReplies(await this.#en._executePipeline(this.#eo,this.#J.queue))}execAsPipelineTyped(){return this.execAsPipeline()}}t.default=u},39893:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:r(s(38737)).default.IS_READ_ONLY,parseCommand(e){e.push("ACL","LOG","RESET")},transformReply:void 0}},40173:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(2508));t.default={CACHEABLE:i.default.CACHEABLE,IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];i.default.parseCommand(...e),t.push("WITHSCORE")},transformReply:{2:e=>null===e?null:{rank:e[0],score:Number(e[1])},3:e=>null===e?null:{rank:e[0],score:e[1]}}}},40309:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(99801));t.default={NOT_KEYED_COMMAND:i.default.NOT_KEYED_COMMAND,IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(...e){i.default.parseCommand(...e),e[0].push("WITHCODE")},transformReply:{2:e=>e.map(e=>({library_name:e[1],engine:e[3],functions:e[5].map(e=>({name:e[1],description:e[3],flags:e[5]})),library_code:e[7]})),3:void 0}}},40414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("RANDOMKEY")},transformReply:void 0}},41263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ECHO",t)},transformReply:void 0}},41430:(e,t)=>{"use strict";function s(e,t,s,r){e.pushKeysLength(t),e.push(s),r?.COUNT!==void 0&&e.push("COUNT",r.COUNT.toString())}Object.defineProperty(t,"__esModule",{value:!0}),t.parseLMPopArguments=void 0,t.parseLMPopArguments=s,t.default={IS_READ_ONLY:!1,parseCommand(e,...t){e.push("LMPOP"),s(e,...t)},transformReply:void 0}},41455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","IDLETIME"),e.pushKey(t)},transformReply:void 0}},41532:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,{username:t,password:s}){e.push("AUTH"),void 0!==t&&e.push(t),e.push(s)},transformReply:void 0}},41704:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(78474),n=r(s(77030)),o=r(s(41692)),a=s(56602),u=s(58500);class l extends i.EventEmitter{#eu;#el;#ed;#ec;#eh;#ep;#v=!1;get isOpen(){return this.#v}#ef=!1;get isReady(){return this.#ef}#em=!1;#e_=0;get socketEpoch(){return this.#e_}constructor(e,t){super(),this.#eu=e,this.#el=t?.connectTimeout??5e3,this.#ed=this.#eE(t),this.#ec=this.#eS(t),this.#eh=t?.socketTimeout}#eE(e){let t=e?.reconnectStrategy;return!1===t||"number"==typeof t?()=>t:t?(e,s)=>{try{let r=t(e,s);if(!1!==r&&!(r instanceof Error)&&"number"!=typeof r)throw TypeError(`Reconnect strategy should return \`false | Error | number\`, got ${r} instead`);return r}catch(t){return this.emit("error",t),this.defaultReconnectStrategy(e,t)}}:this.defaultReconnectStrategy}#eS(e){if(e?.tls===!0){let t={...e,port:e?.port??6379,noDelay:e?.noDelay??!0,keepAlive:e?.keepAlive??!0,keepAliveInitialDelay:e?.keepAliveInitialDelay??5e3,timeout:void 0,onread:void 0,readable:!0,writable:!0};return{create:()=>o.default.connect(t),event:"secureConnect"}}if(e&&"path"in e){let t={...e,timeout:void 0,onread:void 0,readable:!0,writable:!0};return{create:()=>n.default.createConnection(t),event:"connect"}}let t={...e,port:e?.port??6379,noDelay:e?.noDelay??!0,keepAlive:e?.keepAlive??!0,keepAliveInitialDelay:e?.keepAliveInitialDelay??5e3,timeout:void 0,onread:void 0,readable:!0,writable:!0};return{create:()=>n.default.createConnection(t),event:"connect"}}#ey(e,t){let s=this.#ed(e,t);return!1===s?(this.#v=!1,this.emit("error",t),t):s instanceof Error?(this.#v=!1,this.emit("error",t),new a.ReconnectStrategyError(s,t)):s}async connect(){if(this.#v)throw Error("Socket already opened");return this.#v=!0,this.#eR()}async #eR(){let e=0;do try{this.#ep=await this.#eC(),this.emit("connect");try{await this.#eu()}catch(e){throw this.#ep.destroy(),this.#ep=void 0,e}this.#ef=!0,this.#e_++,this.emit("ready")}catch(s){let t=this.#ey(e++,s);if("number"!=typeof t)throw t;this.emit("error",s),await (0,u.setTimeout)(t),this.emit("reconnecting")}while(this.#v&&!this.#ef)}async #eC(){let e,t=this.#ec.create();return void 0!==this.#el&&(e=()=>t.destroy(new a.ConnectionTimeoutError),t.once("timeout",e),t.setTimeout(this.#el)),this.#em&&t.unref(),await (0,i.once)(t,this.#ec.event),e&&t.removeListener("timeout",e),this.#eh&&(t.once("timeout",()=>{t.destroy(new a.SocketTimeoutError(this.#eh))}),t.setTimeout(this.#eh)),t.once("error",e=>this.#eO(e)).once("close",e=>{!e&&this.#v&&this.#ep===t&&this.#eO(new a.SocketClosedUnexpectedlyError)}).on("drain",()=>this.emit("drain")).on("data",e=>this.emit("data",e)),t}#eO(e){let t=this.#ef;this.#ef=!1,this.emit("error",e),t&&this.#v&&"number"==typeof this.#ey(0,e)&&(this.emit("reconnecting"),this.#eR().catch(()=>{}))}write(e){if(this.#ep){for(let t of(this.#ep.cork(),e)){for(let e of t)this.#ep.write(e);if(this.#ep.writableNeedDrain)break}this.#ep.uncork()}}async quit(e){if(!this.#v)throw new a.ClientClosedError;this.#v=!1;let t=await e();return this.destroySocket(),t}close(){if(!this.#v)throw new a.ClientClosedError;this.#v=!1}destroy(){if(!this.#v)throw new a.ClientClosedError;this.#v=!1,this.destroySocket()}destroySocket(){this.#ef=!1,this.#ep&&(this.#ep.destroy(),this.#ep=void 0),this.emit("end")}ref(){this.#em=!1,this.#ep?.ref()}unref(){this.#em=!0,this.#ep?.unref()}defaultReconnectStrategy(e,t){return!(t instanceof a.SocketTimeoutError)&&Math.min(50*Math.pow(2,e),2e3)+Math.floor(200*Math.random())}}t.default=l},41720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HPEXPIRETIME"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},41748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i){e.push("XTRIM"),e.pushKey(t),e.push(s),i?.strategyModifier&&e.push(i.strategyModifier),e.push(r.toString()),i?.LIMIT&&e.push("LIMIT",i.LIMIT.toString())},transformReply:void 0}},41805:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("MEMORY","USAGE"),e.pushKey(t),s?.SAMPLES&&e.push("SAMPLES",s.SAMPLES.toString())},transformReply:void 0}},41817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ASKING_CMD=void 0,t.ASKING_CMD="ASKING",t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push(t.ASKING_CMD)},transformReply:void 0}},42119:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={parseCommand(e,t){e.push("SENTINEL","SENTINELS",t)},transformReply:{2:(e,t,s)=>e.reduce((e,t)=>(e.push((0,r.transformTuplesReply)(t,void 0,s)),e),[]),3:void 0}}},42223:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZREVRANK"),e.pushKey(t),e.push(s)},transformReply:void 0}},42496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FLUSHDB"),t&&e.push(t)},transformReply:void 0}},42611:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PooledNoRedirectClientSideCache=t.BasicPooledClientSideCache=t.PooledClientSideCacheProvider=t.BasicClientSideCache=t.ClientSideCacheProvider=t.CacheStats=void 0;let r=s(27910);class i{hitCount;missCount;loadSuccessCount;loadFailureCount;totalLoadTime;evictionCount;constructor(e,t,s,r,i,n){if(this.hitCount=e,this.missCount=t,this.loadSuccessCount=s,this.loadFailureCount=r,this.totalLoadTime=i,this.evictionCount=n,e<0||t<0||s<0||r<0||i<0||n<0)throw Error("All statistics values must be non-negative")}static of(e=0,t=0,s=0,r=0,n=0,o=0){return new i(e,t,s,r,n,o)}static empty(){return i.EMPTY_STATS}static EMPTY_STATS=new i(0,0,0,0,0,0);requestCount(){return this.hitCount+this.missCount}hitRate(){let e=this.requestCount();return 0===e?1:this.hitCount/e}missRate(){let e=this.requestCount();return 0===e?0:this.missCount/e}loadCount(){return this.loadSuccessCount+this.loadFailureCount}loadFailureRate(){let e=this.loadCount();return 0===e?0:this.loadFailureCount/e}averageLoadPenalty(){let e=this.loadCount();return 0===e?0:this.totalLoadTime/e}minus(e){return i.of(Math.max(0,this.hitCount-e.hitCount),Math.max(0,this.missCount-e.missCount),Math.max(0,this.loadSuccessCount-e.loadSuccessCount),Math.max(0,this.loadFailureCount-e.loadFailureCount),Math.max(0,this.totalLoadTime-e.totalLoadTime),Math.max(0,this.evictionCount-e.evictionCount))}plus(e){return i.of(this.hitCount+e.hitCount,this.missCount+e.missCount,this.loadSuccessCount+e.loadSuccessCount,this.loadFailureCount+e.loadFailureCount,this.totalLoadTime+e.totalLoadTime,this.evictionCount+e.evictionCount)}}t.CacheStats=i;class n{static INSTANCE=new n;constructor(){}recordHits(e){}recordMisses(e){}recordLoadSuccess(e){}recordLoadFailure(e){}recordEvictions(e){}snapshot(){return i.empty()}}class o{#eb=0;#eA=0;#eT=0;#eg=0;#eN=0;#eM=0;recordHits(e){this.#eb+=e}recordMisses(e){this.#eA+=e}recordLoadSuccess(e){this.#eT++,this.#eN+=e}recordLoadFailure(e){this.#eg++,this.#eN+=e}recordEvictions(e){this.#eM+=e}snapshot(){return i.of(this.#eb,this.#eA,this.#eT,this.#eg,this.#eN,this.#eM)}static create(){return new o}}class a{#ev=!1;#eP;constructor(e){0==e?this.#eP=0:this.#eP=Date.now()+e}invalidate(){this.#ev=!0}validate(){return!this.#ev&&(0==this.#eP||Date.now()<this.#eP)}}class u extends a{#eI;get value(){return this.#eI}constructor(e,t){super(e),this.#eI=t}}class l extends a{#eD;get promise(){return this.#eD}constructor(e,t){super(e),this.#eD=t}}class d extends r.EventEmitter{}t.ClientSideCacheProvider=d;class c extends d{#eL;#eY;ttl;maxEntries;lru;#eB;recordEvictions(e){this.#eB.recordEvictions(e)}recordHits(e){this.#eB.recordHits(e)}recordMisses(e){this.#eB.recordMisses(e)}constructor(e){super(),this.#eL=new Map,this.#eY=new Map,this.ttl=e?.ttl??0,this.maxEntries=e?.maxEntries??0,this.lru=e?.evictPolicy!=="FIFO";let t=e?.recordStats!==!1;this.#eB=t?o.create():n.INSTANCE}async handleCache(e,t,s,r,i){let n,o,a=function(e){let t=Array(2*e.length);for(let s=0;s<e.length;s++)t[s]=e[s].length,t[s+e.length]=e[s];return t.join("_")}(t.redisArgs),d=this.get(a);if(d)if(d instanceof u)return this.#eB.recordHits(1),structuredClone(d.value);else if(d instanceof l)this.#eB.recordMisses(1),n=await d.promise;else throw Error("unknown cache entry type");else{this.#eB.recordMisses(1);let r=performance.now(),i=s();d=this.createPromiseEntry(e,i),this.set(a,d,t.keys);try{n=await i;let e=performance.now()-r;this.#eB.recordLoadSuccess(e)}catch(t){let e=performance.now()-r;throw this.#eB.recordLoadFailure(e),d.validate()&&this.delete(a),t}}return o=r?r(n,t.preserve,i):n,d.validate()&&(d=this.createValueEntry(e,o),this.set(a,d,t.keys),this.emit("cached-key",a)),structuredClone(o)}trackingOn(){return["CLIENT","TRACKING","ON"]}invalidate(e){if(null===e){this.clear(!1),this.emit("invalidate",e);return}let t=this.#eY.get(e.toString());if(t){for(let e of t){let t=this.#eL.get(e);t&&t.invalidate(),this.#eL.delete(e)}this.#eY.delete(e.toString())}this.emit("invalidate",e)}clear(e=!0){let t=this.#eL.size;this.#eL.clear(),this.#eY.clear(),e?this.#eB instanceof n||(this.#eB=o.create()):t>0&&this.#eB.recordEvictions(t)}get(e){let t=this.#eL.get(e);if(t&&!t.validate()){this.delete(e),this.#eB.recordEvictions(1),this.emit("cache-evict",e);return}return void 0!==t&&this.lru&&(this.#eL.delete(e),this.#eL.set(e,t)),t}delete(e){let t=this.#eL.get(e);t&&(t.invalidate(),this.#eL.delete(e))}has(e){return this.#eL.has(e)}set(e,t,s){let r=this.#eL.size,i=this.#eL.get(e);for(let n of(i&&(r--,i.invalidate()),this.maxEntries>0&&r>=this.maxEntries&&(this.deleteOldest(),this.#eB.recordEvictions(1)),this.#eL.set(e,t),s))this.#eY.has(n.toString())||this.#eY.set(n.toString(),new Set),this.#eY.get(n.toString()).add(e)}size(){return this.#eL.size}createValueEntry(e,t){return new u(this.ttl,t)}createPromiseEntry(e,t){return new l(this.ttl,t)}stats(){return this.#eB.snapshot()}onError(){this.clear()}onClose(){this.clear()}deleteOldest(){let e=this.#eL[Symbol.iterator]().next();if(!e.done){let t=e.value[0],s=this.#eL.get(t);s&&s.invalidate(),this.#eL.delete(t)}}entryEntries(){return this.#eL.entries()}keySetEntries(){return this.#eY.entries()}}t.BasicClientSideCache=c;class h extends c{#eU=!1;disable(){this.#eU=!0}enable(){this.#eU=!1}get(e){if(!this.#eU)return super.get(e)}has(e){return!this.#eU&&super.has(e)}onPoolClose(){this.clear()}}t.PooledClientSideCacheProvider=h;class p extends h{onError(){this.clear(!1)}onClose(){this.clear(!1)}}t.BasicPooledClientSideCache=p;class f extends u{#ej;constructor(e,t,s){super(e,s),this.#ej=t}validate(){let e=super.validate();return this.#ej&&(e=e&&this.#ej.client.isReady&&this.#ej.client.socketEpoch==this.#ej.epoch),e}}class m extends l{#ej;constructor(e,t,s){super(e,s),this.#ej=t}validate(){return super.validate()&&this.#ej.client.isReady&&this.#ej.client.socketEpoch==this.#ej.epoch}}class _ extends p{createValueEntry(e,t){let s={epoch:e.socketEpoch,client:e};return new f(this.ttl,s,t)}createPromiseEntry(e,t){let s={epoch:e.socketEpoch,client:e};return new m(this.ttl,s,t)}onError(){}onClose(){}}t.PooledNoRedirectClientSideCache=_},42891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("PSETEX"),e.pushKey(t),e.push(s.toString(),r)},transformReply:void 0}},43595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SINTER"),e.pushKeys(t)},transformReply:void 0}},43693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("UNLINK"),e.pushKeys(t)},transformReply:void 0}},43734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PEXPIRETIME"),e.pushKey(t)},transformReply:void 0}},44247:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(86828));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s){i.default.parseCommand(e,t),e.push(s.toString())},transformReply:void 0}},44432:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("HELLO"),t&&(e.push(t.toString()),s?.AUTH&&e.push("AUTH",s.AUTH.username,s.AUTH.password),s?.SETNAME&&e.push("SETNAME",s.SETNAME))},transformReply:{2:e=>({server:e[1],version:e[3],proto:e[5],id:e[7],mode:e[9],role:e[11],modules:e[13]}),3:void 0}}},44954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("LPUSHX"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},45325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("SDIFFSTORE"),e.pushKey(t),e.pushKeys(s)},transformReply:void 0}},45369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PubSub=t.PUBSUB_TYPE=void 0,t.PUBSUB_TYPE={CHANNELS:"CHANNELS",PATTERNS:"PATTERNS",SHARDED:"SHARDED"};let s={[t.PUBSUB_TYPE.CHANNELS]:{subscribe:Buffer.from("subscribe"),unsubscribe:Buffer.from("unsubscribe"),message:Buffer.from("message")},[t.PUBSUB_TYPE.PATTERNS]:{subscribe:Buffer.from("psubscribe"),unsubscribe:Buffer.from("punsubscribe"),message:Buffer.from("pmessage")},[t.PUBSUB_TYPE.SHARDED]:{subscribe:Buffer.from("ssubscribe"),unsubscribe:Buffer.from("sunsubscribe"),message:Buffer.from("smessage")}};class r{static isStatusReply(e){return s[t.PUBSUB_TYPE.CHANNELS].subscribe.equals(e[0])||s[t.PUBSUB_TYPE.CHANNELS].unsubscribe.equals(e[0])||s[t.PUBSUB_TYPE.PATTERNS].subscribe.equals(e[0])||s[t.PUBSUB_TYPE.PATTERNS].unsubscribe.equals(e[0])||s[t.PUBSUB_TYPE.SHARDED].subscribe.equals(e[0])}static isShardedUnsubscribe(e){return s[t.PUBSUB_TYPE.SHARDED].unsubscribe.equals(e[0])}static #ew(e){return Array.isArray(e)?e:[e]}static #eK(e,t){return t?e.buffers:e.strings}#ex=0;#eH=!1;get isActive(){return this.#eH}listeners={[t.PUBSUB_TYPE.CHANNELS]:new Map,[t.PUBSUB_TYPE.PATTERNS]:new Map,[t.PUBSUB_TYPE.SHARDED]:new Map};subscribe(e,t,i,n){let o=[s[e].subscribe],a=r.#ew(t);for(let t of a){let s=this.listeners[e].get(t);(!s||s.unsubscribing)&&o.push(t)}if(1===o.length){for(let t of a)r.#eK(this.listeners[e].get(t),n).add(i);return}return this.#eH=!0,this.#ex++,{args:o,channelsCounter:o.length-1,resolve:()=>{for(let t of(this.#ex--,a)){let s=this.listeners[e].get(t);s||(s={unsubscribing:!1,buffers:new Set,strings:new Set},this.listeners[e].set(t,s)),r.#eK(s,n).add(i)}},reject:()=>{this.#ex--,this.#eF()}}}extendChannelListeners(e,t,r){if(this.#eG(e,t,r))return this.#eH=!0,this.#ex++,{args:[s[e].subscribe,t],channelsCounter:1,resolve:()=>this.#ex--,reject:()=>{this.#ex--,this.#eF()}}}#eG(e,t,s){let r=this.listeners[e].get(t);if(!r)return this.listeners[e].set(t,s),!0;for(let e of s.buffers)r.buffers.add(e);for(let e of s.strings)r.strings.add(e);return!1}extendTypeListeners(e,t){let r=[s[e].subscribe];for(let[s,i]of t)this.#eG(e,s,i)&&r.push(s);if(1!==r.length)return this.#eH=!0,this.#ex++,{args:r,channelsCounter:r.length-1,resolve:()=>this.#ex--,reject:()=>{this.#ex--,this.#eF()}}}unsubscribe(e,t,i,n){let o=this.listeners[e];if(!t)return this.#ek([s[e].unsubscribe],NaN,()=>o.clear());let a=r.#ew(t);if(!i)return this.#ek([s[e].unsubscribe,...a],a.length,()=>{for(let e of a)o.delete(e)});let u=[s[e].unsubscribe];for(let e of a){let t=o.get(e);if(t){let e,s;if(n?(e=t.buffers,s=t.strings):(e=t.strings,s=t.buffers),0!==(e.has(i)?e.size-1:e.size)||0!==s.size)continue;t.unsubscribing=!0}u.push(e)}if(1===u.length){for(let e of a)r.#eK(o.get(e),n).delete(i);return}return this.#ek(u,u.length-1,()=>{for(let e of a){let t=o.get(e);t&&((n?t.buffers:t.strings).delete(i),0===t.buffers.size&&0===t.strings.size&&o.delete(e))}})}#ek(e,t,s){return{args:e,channelsCounter:t,resolve:()=>{s(),this.#eF()},reject:void 0}}#eF(){this.#eH=0!==this.listeners[t.PUBSUB_TYPE.CHANNELS].size||0!==this.listeners[t.PUBSUB_TYPE.PATTERNS].size||0!==this.listeners[t.PUBSUB_TYPE.SHARDED].size||0!==this.#ex}reset(){this.#eH=!1,this.#ex=0}resubscribe(){let e=[];for(let[t,r]of Object.entries(this.listeners)){if(!r.size)continue;this.#eH=!0,this.#ex++;let i=()=>this.#ex--;e.push({args:[s[t].subscribe,...r.keys()],channelsCounter:r.size,resolve:i,reject:i})}return e}handleMessageReply(e){return s[t.PUBSUB_TYPE.CHANNELS].message.equals(e[0])?(this.#eV(t.PUBSUB_TYPE.CHANNELS,e[2],e[1]),!0):s[t.PUBSUB_TYPE.PATTERNS].message.equals(e[0])?(this.#eV(t.PUBSUB_TYPE.PATTERNS,e[3],e[2],e[1]),!0):!!s[t.PUBSUB_TYPE.SHARDED].message.equals(e[0])&&(this.#eV(t.PUBSUB_TYPE.SHARDED,e[2],e[1]),!0)}removeShardedListeners(e){let s=this.listeners[t.PUBSUB_TYPE.SHARDED].get(e);return this.listeners[t.PUBSUB_TYPE.SHARDED].delete(e),this.#eF(),s}#eV(e,t,s,r){let i=(r??s).toString(),n=this.listeners[e].get(i);if(!n)return;for(let e of n.buffers)e(t,s);if(!n.strings.size)return;let o=r?s.toString():i,a="__redis__:invalidate"===o?null===t?null:t.map(e=>e.toString()):t.toString();for(let e of n.strings)e(a,o)}}t.PubSub=r},45672:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(68248));t.default={CACHEABLE:i.default.CACHEABLE,IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s,r,n){i.default.parseCommand(e,t,s,n),e.push("COUNT",r.toString())},transformReply:void 0}},45732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerbatimString=void 0;class s extends String{format;constructor(e,t){super(t),this.format=e}}t.VerbatimString=s},45818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","MYSHARDID")},transformReply:void 0}},45839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("MOVE"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},46455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("GETRANGE"),e.pushKey(t),e.push(s.toString(),r.toString())},transformReply:void 0}},46534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("SPOP"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},46541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("VLINKS"),e.pushKey(t),e.push(s)},transformReply:void 0}},46599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,...s){e.push("LOLWUT"),t&&(e.push("VERSION",t.toString()),e.pushVariadic(s.map(String)))},transformReply:void 0}},46844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","BUMPEPOCH")},transformReply:void 0}},47123:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(31245);t.default={IS_READ_ONLY:!1,parseCommand:(...e)=>(0,r.parseXAddArguments)("NOMKSTREAM",...e),transformReply:void 0}},47470:(e,t,s)=>{"use strict";var r,i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.transformRedisJsonNullReply=t.transformRedisJsonReply=t.transformRedisJsonArgument=t.transformStreamsMessagesReplyResp3=t.transformStreamsMessagesReplyResp2=t.transformStreamMessagesReply=t.transformStreamMessageNullReply=t.transformStreamMessageReply=t.parseArgs=t.parseZKeysArguments=t.transformRangeReply=t.parseSlotRangesArguments=t.transformFunctionListItemReply=t.RedisFunctionFlags=t.transformCommandReply=t.CommandCategories=t.CommandFlags=t.parseOptionalVariadicArgument=t.pushVariadicArgument=t.pushVariadicNumberArguments=t.pushVariadicArguments=t.pushEvalArguments=t.evalFirstKeyIndex=t.transformPXAT=t.transformEXAT=t.transformSortedSetReply=t.transformTuplesReply=t.createTransformTuplesReplyFunc=t.transformTuplesToMap=t.transformNullableDoubleReply=t.createTransformNullableDoubleReplyResp2Func=t.transformDoubleArrayReply=t.createTransformDoubleReplyResp2Func=t.transformDoubleReply=t.transformStringDoubleArgument=t.transformDoubleArgument=t.transformBooleanArrayReply=t.transformBooleanReply=t.isArrayReply=t.isNullReply=void 0;let o=s(3994),a=s(69728);function u(e){return null===e}function l(e){switch(e){case 1/0:return"+inf";case-1/0:return"-inf";default:return e.toString()}}function d(e,s){return r=>t.transformDoubleReply[2](r,e,s)}function c(e,t,s){switch(s?s[a.RESP_TYPES.MAP]:void 0){case Array:return e;case Map:{let t=new Map;for(let s=0;s<e.length;s+=2)t.set(e[s].toString(),e[s+1]);return t}default:{let t=Object.create(null);for(let s=0;s<e.length;s+=2)t[e[s].toString()]=e[s+1];return t}}}function h(e,t){e.push(t.start.toString(),t.end.toString())}function p(e){return"string"==typeof e||e instanceof Buffer}function f(e,t){let[s,r]=t;return{id:s,message:c(r,void 0,e)}}function m(e,t){return e.map(f.bind(void 0,t))}function _(e){return JSON.parse(e.toString())}t.isNullReply=u,t.isArrayReply=function(e){return Array.isArray(e)},t.transformBooleanReply={2:e=>1===e,3:void 0},t.transformBooleanArrayReply={2:e=>e.map(t.transformBooleanReply[2]),3:void 0},t.transformDoubleArgument=l,t.transformStringDoubleArgument=function(e){return"number"!=typeof e?e:l(e)},t.transformDoubleReply={2:(e,t,s)=>{if((s?s[a.RESP_TYPES.DOUBLE]:void 0)===String)return e;{let t;switch(e.toString()){case"inf":case"+inf":t=1/0;case"-inf":t=-1/0;case"nan":t=NaN;default:t=Number(e)}return t}},3:void 0},t.createTransformDoubleReplyResp2Func=d,t.transformDoubleArrayReply={2:(e,t,s)=>e.map(d(t,s)),3:void 0},t.createTransformNullableDoubleReplyResp2Func=function(e,s){return r=>t.transformNullableDoubleReply[2](r,e,s)},t.transformNullableDoubleReply={2:(e,s,r)=>null===e?null:t.transformDoubleReply[2](e,s,r),3:void 0},t.transformTuplesToMap=function(e,t){let s=Object.create(null);for(let r=0;r<e.length;r+=2)s[e[r].toString()]=t(e[r+1]);return s},t.createTransformTuplesReplyFunc=function(e,t){return s=>c(s,e,t)},t.transformTuplesReply=c,t.transformSortedSetReply={2:(e,s,r)=>{let i=[];for(let n=0;n<e.length;n+=2)i.push({value:e[n],score:t.transformDoubleReply[2](e[n+1],s,r)});return i},3:e=>e.map(e=>{let[t,s]=e;return{value:t,score:s}})},t.transformEXAT=function(e){return("number"==typeof e?e:Math.floor(e.getTime()/1e3)).toString()},t.transformPXAT=function(e){return("number"==typeof e?e:e.getTime()).toString()},t.evalFirstKeyIndex=function(e){return e?.keys?.[0]},t.pushEvalArguments=function(e,t){return t?.keys?e.push(t.keys.length.toString(),...t.keys):e.push("0"),t?.arguments&&e.push(...t.arguments),e},t.pushVariadicArguments=function(e,t){return Array.isArray(t)?e=e.concat(t):e.push(t),e},t.pushVariadicNumberArguments=function(e,t){if(Array.isArray(t))for(let s of t)e.push(s.toString());else e.push(t.toString());return e},t.pushVariadicArgument=function(e,t){return Array.isArray(t)?e.push(t.length.toString(),...t):e.push("1",t),e},t.parseOptionalVariadicArgument=function(e,t,s){void 0!==s&&(e.push(t),e.pushVariadicWithLength(s))},function(e){e.WRITE="write",e.READONLY="readonly",e.DENYOOM="denyoom",e.ADMIN="admin",e.PUBSUB="pubsub",e.NOSCRIPT="noscript",e.RANDOM="random",e.SORT_FOR_SCRIPT="sort_for_script",e.LOADING="loading",e.STALE="stale",e.SKIP_MONITOR="skip_monitor",e.ASKING="asking",e.FAST="fast",e.MOVABLEKEYS="movablekeys"}(r||(t.CommandFlags=r={})),function(e){e.KEYSPACE="@keyspace",e.READ="@read",e.WRITE="@write",e.SET="@set",e.SORTEDSET="@sortedset",e.LIST="@list",e.HASH="@hash",e.STRING="@string",e.BITMAP="@bitmap",e.HYPERLOGLOG="@hyperloglog",e.GEO="@geo",e.STREAM="@stream",e.PUBSUB="@pubsub",e.ADMIN="@admin",e.FAST="@fast",e.SLOW="@slow",e.BLOCKING="@blocking",e.DANGEROUS="@dangerous",e.CONNECTION="@connection",e.TRANSACTION="@transaction",e.SCRIPTING="@scripting"}(i||(t.CommandCategories=i={})),t.transformCommandReply=function([e,t,s,r,i,n,o]){return{name:e,arity:t,flags:new Set(s),firstKeyIndex:r,lastKeyIndex:i,step:n,categories:new Set(o)}},function(e){e.NO_WRITES="no-writes",e.ALLOW_OOM="allow-oom",e.ALLOW_STALE="allow-stale",e.NO_CLUSTER="no-cluster"}(n||(t.RedisFunctionFlags=n={})),t.transformFunctionListItemReply=function(e){return{libraryName:e[1],engine:e[3],functions:e[5].map(e=>({name:e[1],description:e[3],flags:e[5]}))}},t.parseSlotRangesArguments=function(e,t){if(Array.isArray(t))for(let s of t)h(e,s);else h(e,t)},t.transformRangeReply=function([e,t]){return{start:e,end:t}},t.parseZKeysArguments=function(e,t){if(Array.isArray(t)){if(e.push(t.length.toString()),t.length)if(p(t[0]))e.pushKeys(t);else{for(let s=0;s<t.length;s++)e.pushKey(t[s].key);e.push("WEIGHTS");for(let s=0;s<t.length;s++)e.push(l(t[s].weight))}}else e.push("1"),p(t)?e.pushKey(t):(e.pushKey(t.key),e.push("WEIGHTS",l(t.weight)))},t.parseArgs=function(e,...t){let s=new o.BasicCommandParser;e.parseCommand(s,...t);let r=s.redisArgs;return s.preserve&&(r.preserve=s.preserve),r},t.transformStreamMessageReply=f,t.transformStreamMessageNullReply=function(e,t){return u(t)?t:f(e,t)},t.transformStreamMessagesReply=m,t.transformStreamsMessagesReplyResp2=function(e,t,s){if(null===e)return null;s&&s[a.RESP_TYPES.MAP];{let t=[];for(let s=0;s<e.length;s++){let r=e[s];t.push({name:r[0],messages:m(r[1])})}return t}},t.transformStreamsMessagesReplyResp3=function(e){if(null===e)return null;if(e instanceof Map){let t=new Map;for(let[s,r]of e)t.set(s.toString(),m(r));return t}if(e instanceof Array){let t=[];for(let s=0;s<e.length;s+=2){let r=e[s],i=e[s+1];t.push(r),t.push(m(i))}return t}{let t=Object.create(null);for(let[s,r]of Object.entries(e))t[s]=m(r);return t}},t.transformRedisJsonArgument=function(e){return JSON.stringify(e)},t.transformRedisJsonReply=_,t.transformRedisJsonNullReply=function(e){return u(e)?e:_(e)}},47800:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","INFO",...t)},transformReply:e=>e.map(e=>e?(0,r.transformCommandReply)(e):null)}},47846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("XINFO","CONSUMERS"),e.pushKey(t),e.push(s)},transformReply:{2:e=>e.map(e=>({name:e[1],pending:e[3],idle:e[5],inactive:e[7]})),3:void 0}}},48002:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(27422));t.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){n.default.parseCommand(...e),e[0].push("WITHSCORES")},transformReply:i.transformSortedSetReply}},48004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("STRLEN"),e.pushKey(t)},transformReply:void 0}},48189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("FUNCTION","LOAD"),s?.REPLACE&&e.push("REPLACE"),e.push(t)},transformReply:void 0}},49106:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i){e.push("PEXPIREAT"),e.pushKey(t),e.push((0,r.transformPXAT)(s)),i&&e.push(i)},transformReply:void 0}},49150:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("SADD"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},49195:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(94109));t.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t){n.default.parseCommand(e,t),e.push("WITHSCORES")},transformReply:i.transformSortedSetReply}},49304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("SET"),e.pushKey(t),e.push("number"==typeof s?s.toString():s),r?.expiration?"string"==typeof r.expiration?e.push(r.expiration):"KEEPTTL"===r.expiration.type?e.push("KEEPTTL"):e.push(r.expiration.type,r.expiration.value.toString()):r?.EX!==void 0?e.push("EX",r.EX.toString()):r?.PX!==void 0?e.push("PX",r.PX.toString()):r?.EXAT!==void 0?e.push("EXAT",r.EXAT.toString()):r?.PXAT!==void 0?e.push("PXAT",r.PXAT.toString()):r?.KEEPTTL&&e.push("KEEPTTL"),r?.condition?e.push(r.condition):r?.NX?e.push("NX"):r?.XX&&e.push("XX"),r?.GET&&e.push("GET")},transformReply:void 0}},49352:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(59820));t.default={CACHEABLE:n.default.CACHEABLE,IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:i.transformSortedSetReply}},49366:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ROLE")},transformReply(e){switch(e[0]){case"master":{let[t,s,r]=e;return{role:t,replicationOffest:s,replicas:r.map(e=>{let[t,s,r]=e;return{host:t,port:Number(s),replicationOffest:Number(r)}})}}case"slave":{let[t,s,r,i,n]=e;return{role:t,master:{host:s,port:r},state:i,dataReceived:n}}case"sentinel":{let[t,s]=e;return{role:t,masterNames:s}}}}}},49566:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","NUMSUB"),t&&e.pushVariadic(t)},transformReply(e){let t=Object.create(null),s=0;for(;s<e.length;)t[e[s++].toString()]=e[s++].toString();return t}}},49905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("SINTERCARD"),e.pushKeysLength(t),"number"==typeof s?e.push("LIMIT",s.toString()):s?.LIMIT!==void 0&&e.push("LIMIT",s.LIMIT.toString())},transformReply:void 0}},49955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r,i,n,o){e.push("XPENDING"),e.pushKey(t),e.push(s),o?.IDLE!==void 0&&e.push("IDLE",o.IDLE.toString()),e.push(r,i,n.toString()),o?.consumer&&e.push(o.consumer)},transformReply:e=>e.map(e=>({id:e[0],consumer:e[1],millisecondsSinceLastDelivery:e[2],deliveriesCounter:e[3]}))}},50018:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZSCORE"),e.pushKey(t),e.push(s)},transformReply:s(47470).transformNullableDoubleReply}},50084:(e,t)=>{"use strict";function s(e,t,s){e.push(t),s?.keys?e.pushKeysLength(s.keys):e.push("0"),s?.arguments&&e.push(...s.arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.parseEvalArguments=void 0,t.parseEvalArguments=s,t.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("EVAL"),s(...e)},transformReply:void 0}},50214:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeoRadiusWithArguments=void 0;let a=n(s(26603)),u=o(s(83340));function l(e,t,s,r,i,n,o){(0,a.parseGeoRadiusArguments)(e,t,s,r,i,o),e.pushVariadic(n),e.preserve=n}t.parseGeoRadiusWithArguments=l,t.default={IS_READ_ONLY:a.default.IS_READ_ONLY,parseCommand(e,t,s,r,i,n,o){e.push("GEORADIUS"),l(e,t,s,r,i,n,o)},transformReply:u.default.transformReply}},50811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MEMORY","DOCTOR")},transformReply:void 0}},51156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("RPUSHX"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},51282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("LREM"),e.pushKey(t),e.push(s.toString()),e.push(r)},transformReply:void 0}},51336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("HSETNX"),e.pushKey(t),e.push(s,r)},transformReply:void 0}},51391:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","USERS")},transformReply:void 0}},52782:e=>{var t=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],s=function(e){for(var t,s=0,r=0,i=[],n=e.length;s<n;s++)(t=e.charCodeAt(s))<128?i[r++]=t:(t<2048?i[r++]=t>>6|192:((64512&t)==55296&&s+1<e.length&&(64512&e.charCodeAt(s+1))==56320?(t=65536+((1023&t)<<10)+(1023&e.charCodeAt(++s)),i[r++]=t>>18|240,i[r++]=t>>12&63|128):i[r++]=t>>12|224,i[r++]=t>>6&63|128),i[r++]=63&t|128);return i},r=e.exports=function(e){for(var r,i=0,n=-1,o=0,a=0,u="string"==typeof e?s(e):e,l=u.length;i<l;){if(r=u[i++],-1===n)123===r&&(n=i);else if(125!==r)a=t[(r^a>>8)&255]^a<<8;else if(i-1!==n)return 16383&a;o=t[(r^o>>8)&255]^o<<8}return 16383&o};e.exports.generateMulti=function(e){for(var t=1,s=e.length,i=r(e[0]);t<s;)if(r(e[t++])!==i)return -1;return i}},54414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("PING"),t&&e.push(t)},transformReply:void 0}},54981:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("ZPOPMAX"),e.pushKey(t),e.push(s.toString())},transformReply:s(47470).transformSortedSetReply}},56419:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("TOUCH"),e.pushKeys(t)},transformReply:void 0}},56477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLUSTER_SLOT_STATES=void 0,t.CLUSTER_SLOT_STATES={IMPORTING:"IMPORTING",MIGRATING:"MIGRATING",STABLE:"STABLE",NODE:"NODE"},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("CLUSTER","SETSLOT",t.toString(),s),r&&e.push(r)},transformReply:void 0}},56520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r,i){e.push("SENTINEL","MONITOR",t,s,r,i)},transformReply:void 0}},56602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiErrorReply=t.TimeoutError=t.BlobError=t.SimpleError=t.ErrorReply=t.ReconnectStrategyError=t.RootNodesUnavailableError=t.SocketClosedUnexpectedlyError=t.DisconnectsClientError=t.ClientOfflineError=t.ClientClosedError=t.SocketTimeoutError=t.ConnectionTimeoutError=t.WatchError=t.AbortError=void 0;class s extends Error{constructor(){super("The command was aborted")}}t.AbortError=s;class r extends Error{constructor(e="One (or more) of the watched keys has been changed"){super(e)}}t.WatchError=r;class i extends Error{constructor(){super("Connection timeout")}}t.ConnectionTimeoutError=i;class n extends Error{constructor(e){super(`Socket timeout timeout. Expecting data, but didn't receive any in ${e}ms.`)}}t.SocketTimeoutError=n;class o extends Error{constructor(){super("The client is closed")}}t.ClientClosedError=o;class a extends Error{constructor(){super("The client is offline")}}t.ClientOfflineError=a;class u extends Error{constructor(){super("Disconnects client")}}t.DisconnectsClientError=u;class l extends Error{constructor(){super("Socket closed unexpectedly")}}t.SocketClosedUnexpectedlyError=l;class d extends Error{constructor(){super("All the root nodes are unavailable")}}t.RootNodesUnavailableError=d;class c extends Error{originalError;socketError;constructor(e,t){super(e.message),this.originalError=e,this.socketError=t}}t.ReconnectStrategyError=c;class h extends Error{constructor(e){super(e),this.stack=void 0}}t.ErrorReply=h;class p extends h{}t.SimpleError=p;class f extends h{}t.BlobError=f;class m extends Error{}t.TimeoutError=m;class _ extends h{replies;errorIndexes;constructor(e,t){super(`${t.length} commands failed, see .replies and .errorIndexes for more information`),this.replies=e,this.errorIndexes=t}*errors(){for(let e of this.errorIndexes)yield this.replies[e]}}t.MultiErrorReply=_},57026:(e,t)=>{"use strict";function s(e){return"number"==typeof e?e.toString():e}Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,...[t,r,i]){e.push("HSET"),e.pushKey(t),"string"==typeof r||"number"==typeof r||r instanceof Buffer?e.push(s(r),s(i)):r instanceof Map?function(e,t){for(let[r,i]of t.entries())e.push(s(r),s(i))}(e,r):Array.isArray(r)?function e(t,r){for(let i of r){if(Array.isArray(i)){e(t,i);continue}t.push(s(i))}}(e,r):function(e,t){for(let r of Object.keys(t))e.push(s(r),s(t[r]))}(e,r)},transformReply:void 0}},57500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("BITOP",t),e.pushKey(s),e.pushKeys(r)},transformReply:void 0}},57663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FUNCTION","FLUSH"),t&&e.push(t)},transformReply:void 0}},57751:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("TIME")},transformReply:void 0}},58044:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("READONLY")},transformReply:void 0}},58172:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseZMPopArguments=void 0;let r=s(47470);function i(e,t,s,r){e.pushKeysLength(t),e.push(s),r?.COUNT&&e.push("COUNT",r.COUNT.toString())}t.parseZMPopArguments=i,t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("ZMPOP"),i(e,t,s,r)},transformReply:{2:(e,t,s)=>null===e?null:{key:e[0],members:e[1].map(e=>{let[i,n]=e;return{value:i,score:r.transformDoubleReply[2](n,t,s)}})},3:e=>null===e?null:{key:e[0],members:r.transformSortedSetReply[3](e[1])}}}},58318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("APPEND",t,s)},transformReply:void 0}},58418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","MYID")},transformReply:void 0}},58504:(e,t)=>{"use strict";function s(e){let[t,s,r]=e;return{host:t,port:s,id:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","SLOTS")},transformReply:e=>e.map(([e,t,r,...i])=>({from:e,to:t,master:s(r),replicas:i.map(s)}))}},58515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("XGROUP","DELCONSUMER"),e.pushKey(t),e.push(s,r)},transformReply:void 0}},58672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i){e.push("XGROUP","CREATE"),e.pushKey(t),e.push(s,r),i?.MKSTREAM&&e.push("MKSTREAM"),i?.ENTRIESREAD&&e.push("ENTRIESREAD",i.ENTRIESREAD.toString())},transformReply:void 0}},58971:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("FUNCTION","DUMP")},transformReply:void 0}},59820:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,i,n){e.push("ZRANGEBYSCORE"),e.pushKey(t),e.push((0,r.transformStringDoubleArgument)(s),(0,r.transformStringDoubleArgument)(i)),n?.LIMIT&&e.push("LIMIT",n.LIMIT.offset.toString(),n.LIMIT.count.toString())},transformReply:void 0}},60127:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t){e.push("ZPOPMIN"),e.pushKey(t)},transformReply:r(s(4009)).default.transformReply}},60182:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(50084));t.default={IS_READ_ONLY:!1,parseCommand(...e){e[0].push("FCALL_RO"),(0,o.parseEvalArguments)(...e)},transformReply:o.default.transformReply}},60462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HGET"),e.pushKey(t),e.push(s)},transformReply:void 0}},60605:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,i){e.push("ZREMRANGEBYLEX"),e.pushKey(t),e.push((0,r.transformStringDoubleArgument)(s),(0,r.transformStringDoubleArgument)(i))},transformReply:void 0}},60772:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PUBSUB","SHARDNUMSUB"),t&&e.pushVariadic(t)},transformReply(e){let t=Object.create(null);for(let s=0;s<e.length;s+=2)t[e[s].toString()]=e[s+1];return t}}},60890:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={parseCommand(e,t,s,i,n){e.push("HEXPIREAT"),e.pushKey(t),e.push((0,r.transformEXAT)(i)),n&&e.push(n),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},61746:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(6830));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];i.default.parseCommand(...e),t.push("JUSTID")},transformReply:void 0}},62209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("BLPOP"),e.pushKeys(t),e.push(s.toString())},transformReply:e=>null===e?null:{key:e[0],element:e[1]}}},62293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLIENT","SETNAME",t)},transformReply:void 0}},62445:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(95627));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];i.default.parseCommand(...e),t.push("JUSTID")},transformReply:e=>({nextId:e[0],messages:e[1],deletedMessages:e[2]})}},62498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("VDIM"),e.pushKey(t)},transformReply:void 0}},62537:function(e,t,s){"use strict";var r,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let n=i(s(36440)),o=i(s(41704)),a=s(75832),u=i(s(11265)),l=s(78474),d=s(29987),c=s(56602),h=s(73136),p=s(45369),f=i(s(96952)),m=i(s(44432)),_=s(28332),E=s(87803),S=s(47470),y=s(42611),R=s(3994),C=i(s(15955)),O=s(84573);class b extends l.EventEmitter{static #Z(e,t){let s=(0,d.getTransformReply)(e,t);return async function(...t){let r=new R.BasicCommandParser;return e.parseCommand(r,...t),this._self._executeCommand(e,r,this._commandOptions,s)}}static #eW(e,t){let s=(0,d.getTransformReply)(e,t);return async function(...t){let r=new R.BasicCommandParser;return e.parseCommand(r,...t),this._self._executeCommand(e,r,this._self._commandOptions,s)}}static #eX(e,t,s){let r=(0,d.functionArgumentsPrefix)(e,t),i=(0,d.getTransformReply)(t,s);return async function(...e){let s=new R.BasicCommandParser;return s.push(...r),t.parseCommand(s,...e),this._self._executeCommand(t,s,this._self._commandOptions,i)}}static #ez(e,t){let s=(0,d.scriptArgumentsPrefix)(e),r=(0,d.getTransformReply)(e,t);return async function(...t){let i=new R.BasicCommandParser;return i.push(...s),e.parseCommand(i,...t),this._executeScript(e,i,this._commandOptions,r)}}static #eZ=new C.default;static factory(e){let t=r.#eZ.get(e);return t||((t=(0,d.attachConfig)({BaseClass:r,commands:n.default,createCommand:r.#Z,createModuleCommand:r.#eW,createFunctionCommand:r.#eX,createScriptCommand:r.#ez,config:e})).prototype.Multi=f.default.extend(e),r.#eZ.set(e,t)),e=>Object.create(new t(e))}static create(e){return r.factory(e)(e)}static parseURL(e){let{hostname:t,port:s,protocol:r,username:i,password:n,pathname:o}=new h.URL(e),a={socket:{host:t}};if("rediss:"===r)a.socket.tls=!0;else if("redis:"!==r)throw TypeError("Invalid protocol");if(s&&(a.socket.port=Number(s)),i&&(a.username=decodeURIComponent(i)),n&&(a.password=decodeURIComponent(n)),(i||n)&&(a.credentialsProvider={type:"async-credentials-provider",credentials:async()=>({username:i?decodeURIComponent(i):void 0,password:n?decodeURIComponent(n):void 0})}),o.length>1){let e=Number(o.substring(1));if(isNaN(e))throw TypeError("Invalid pathname");a.database=e}return a}#g;#ep;#er;#eq=0;#e$;_self=this;_commandOptions;#eJ;#eQ;#e0;#e1=null;get clientSideCache(){return this._self.#e0}get options(){return this._self.#g}get isOpen(){return this._self.#ep.isOpen}get isReady(){return this._self.#ep.isReady}get isPubSubActive(){return this._self.#er.isPubSubActive}get socketEpoch(){return this._self.#ep.socketEpoch}get isWatching(){return void 0!==this._self.#eQ}get isDirtyWatch(){return void 0!==this._self.#eJ}setDirtyWatch(e){this._self.#eJ=e}constructor(e){if(super(),this.#P(e),this.#g=this.#e4(e),this.#er=this.#e2(),this.#ep=this.#e3(),e?.clientSideCache){if(e.clientSideCache instanceof y.ClientSideCacheProvider)this.#e0=e.clientSideCache;else{let t=e.clientSideCache;this.#e0=new y.BasicClientSideCache(t)}this.#er.setInvalidateCallback(this.#e0.invalidate.bind(this.#e0))}}#P(e){if(e?.clientSideCache&&e?.RESP!==3)throw Error("Client Side Caching is only supported with RESP3")}#e4(e){if(!e?.credentialsProvider&&(e?.username||e?.password)&&(e.credentialsProvider={type:"async-credentials-provider",credentials:async()=>({username:e.username,password:e.password})}),e?.url){let t=r.parseURL(e.url);e.socket&&(t.socket=Object.assign(e.socket,t.socket)),Object.assign(e,t)}return e?.database&&(this._self.#eq=e.database),e?.commandOptions&&(this._commandOptions=e.commandOptions),e}#e2(){return new u.default(this.#g?.RESP??2,this.#g?.commandsQueueMaxLength,(e,t)=>this.emit("sharded-channel-moved",e,t))}reAuthenticate=async e=>{this.isPubSubActive&&!this.#g?.RESP||await this.sendCommand((0,S.parseArgs)(n.default.AUTH,{username:e.username,password:e.password??""}))};#e7(e){return e.subscribe({onNext:t=>{this.reAuthenticate(t).catch(t=>{let s=t instanceof Error?t.message:String(t);e.onReAuthenticationError(new a.CredentialsError(s))})},onError:t=>{let s=`Error from streaming credentials provider: ${t.message}`;e.onReAuthenticationError(new a.UnableToObtainNewCredentialsError(s))}})}async #e5(e,t){let s=[],r=await this.#e6();for(let{cmd:i,errorHandler:n}of(t&&r.reverse(),r))s.push(this.#er.addCommand(i,{chainId:e,asap:t}).catch(n));return s}async #e6(){let e=[],t=this.#g?.credentialsProvider;if(this.#g?.RESP){let s={};if(t&&"async-credentials-provider"===t.type){let e=await t.credentials();e.password&&(s.AUTH={username:e.username??"default",password:e.password})}if(t&&"streaming-credentials-provider"===t.type){let[e,r]=await this.#e7(t);this.#e1=r,e.password&&(s.AUTH={username:e.username??"default",password:e.password})}this.#g.name&&(s.SETNAME=this.#g.name),e.push({cmd:(0,S.parseArgs)(m.default,this.#g.RESP,s)})}else{if(t&&"async-credentials-provider"===t.type){let s=await t.credentials();(s.username||s.password)&&e.push({cmd:(0,S.parseArgs)(n.default.AUTH,{username:s.username,password:s.password??""})})}if(t&&"streaming-credentials-provider"===t.type){let[s,r]=await this.#e7(t);this.#e1=r,(s.username||s.password)&&e.push({cmd:(0,S.parseArgs)(n.default.AUTH,{username:s.username,password:s.password??""})})}this.#g?.name&&e.push({cmd:(0,S.parseArgs)(n.default.CLIENT_SETNAME,this.#g.name)})}return 0!==this.#eq&&e.push({cmd:["SELECT",this.#eq.toString()]}),this.#g?.readonly&&e.push({cmd:(0,S.parseArgs)(n.default.READONLY)}),this.#g?.disableClientInfo||(e.push({cmd:["CLIENT","SETINFO","LIB-VER",O.version],errorHandler:()=>{}}),e.push({cmd:["CLIENT","SETINFO","LIB-NAME",this.#g?.clientInfoTag?`node-redis(${this.#g.clientInfoTag})`:"node-redis"],errorHandler:()=>{}})),this.#e0&&e.push({cmd:this.#e0.trackingOn()}),e}#e3(){let e=async()=>{let e=[],t=Symbol("Socket Initiator"),s=this.#er.resubscribe(t);if(s&&e.push(s),this.#e$&&e.push(this.#er.monitor(this.#e$,{typeMapping:this._commandOptions?.typeMapping,chainId:t,asap:!0})),e.push(...await this.#e5(t,!0)),e.length)return this.#e8(),Promise.all(e)};return new o.default(e,this.#g?.socket).on("data",e=>{try{this.#er.decoder.write(e)}catch(e){this.#er.resetDecoder(),this.emit("error",e)}}).on("error",e=>{this.emit("error",e),this.#e0?.onError(),this.#ep.isOpen&&!this.#g?.disableOfflineQueue?this.#er.flushWaitingForReply(e):this.#er.flushAll(e)}).on("connect",()=>this.emit("connect")).on("ready",()=>{this.emit("ready"),this.#e9(),this.#te()}).on("reconnecting",()=>this.emit("reconnecting")).on("drain",()=>this.#te()).on("end",()=>this.emit("end"))}#tt;#e9(){this.#g?.pingInterval&&this.#ep.isReady&&(clearTimeout(this.#tt),this.#tt=setTimeout(()=>{this.#ep.isReady&&this.sendCommand(["PING"]).then(e=>this.emit("ping-interval",e)).catch(e=>this.emit("error",e)).finally(()=>this.#e9())},this.#g.pingInterval))}withCommandOptions(e){let t=Object.create(this._self);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let s=Object.create(this._self);return s._commandOptions=Object.create(this._commandOptions??null),s._commandOptions[e]=t,s}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}withAbortSignal(e){return this._commandOptionsProxy("abortSignal",e)}asap(){return this._commandOptionsProxy("asap",!0)}legacy(){return new _.RedisLegacyClient(this)}createPool(e){return E.RedisClientPool.create(this._self.#g,e)}duplicate(e){return new(Object.getPrototypeOf(this)).constructor({...this._self.#g,commandOptions:this._commandOptions,...e})}async connect(){return await this._self.#ep.connect(),this}async _executeCommand(e,t,s,r){let i=this._self.#e0,n=this._self.#g?.commandOptions===s,o=()=>this.sendCommand(t.redisArgs,s);if(i&&e.CACHEABLE&&n)return await i.handleCache(this._self,t,o,r,s?.typeMapping);{let e=await o();return r?r(e,t.preserve,s?.typeMapping):e}}async _executeScript(e,t,s,r){let i,n=t.redisArgs;try{i=await this.sendCommand(n,s)}catch(t){if(!t?.message?.startsWith?.("NOSCRIPT"))throw t;n[0]="EVAL",n[1]=e.SCRIPT,i=await this.sendCommand(n,s)}return r?r(i,t.preserve,s?.typeMapping):i}sendCommand(e,t){if(!this._self.#ep.isOpen)return Promise.reject(new c.ClientClosedError);if(!this._self.#ep.isReady&&this._self.#g?.disableOfflineQueue)return Promise.reject(new c.ClientOfflineError);let s={...this._self._commandOptions,...t},r=this._self.#er.addCommand(e,s);return this._self.#ts(),r}async SELECT(e){await this.sendCommand(["SELECT",e.toString()]),this._self.#eq=e}select=this.SELECT;#tr(e){return void 0===e?Promise.resolve():(this.#ts(),e)}SUBSCRIBE(e,t,s){return this._self.#tr(this._self.#er.subscribe(p.PUBSUB_TYPE.CHANNELS,e,t,s))}subscribe=this.SUBSCRIBE;UNSUBSCRIBE(e,t,s){return this._self.#tr(this._self.#er.unsubscribe(p.PUBSUB_TYPE.CHANNELS,e,t,s))}unsubscribe=this.UNSUBSCRIBE;PSUBSCRIBE(e,t,s){return this._self.#tr(this._self.#er.subscribe(p.PUBSUB_TYPE.PATTERNS,e,t,s))}pSubscribe=this.PSUBSCRIBE;PUNSUBSCRIBE(e,t,s){return this._self.#tr(this._self.#er.unsubscribe(p.PUBSUB_TYPE.PATTERNS,e,t,s))}pUnsubscribe=this.PUNSUBSCRIBE;SSUBSCRIBE(e,t,s){return this._self.#tr(this._self.#er.subscribe(p.PUBSUB_TYPE.SHARDED,e,t,s))}sSubscribe=this.SSUBSCRIBE;SUNSUBSCRIBE(e,t,s){return this._self.#tr(this._self.#er.unsubscribe(p.PUBSUB_TYPE.SHARDED,e,t,s))}sUnsubscribe=this.SUNSUBSCRIBE;async WATCH(e){let t=await this._self.sendCommand((0,S.pushVariadicArguments)(["WATCH"],e));return this._self.#eQ??=this._self.socketEpoch,t}watch=this.WATCH;async UNWATCH(){let e=await this._self.sendCommand(["UNWATCH"]);return this._self.#eQ=void 0,e}unwatch=this.UNWATCH;getPubSubListeners(e){return this._self.#er.getPubSubListeners(e)}extendPubSubChannelListeners(e,t,s){return this._self.#tr(this._self.#er.extendPubSubChannelListeners(e,t,s))}extendPubSubListeners(e,t){return this._self.#tr(this._self.#er.extendPubSubListeners(e,t))}#e8(){this.#ep.write(this.#er.commandsToWrite())}#ti;#ts(){this.#ep.isReady&&!this.#ti&&(this.#ti=setImmediate(()=>{this.#e8(),this.#ti=void 0}))}#te(){this.#er.isWaitingToWrite()&&this.#ts()}async _executePipeline(e,t){if(!this._self.#ep.isOpen)return Promise.reject(new c.ClientClosedError);let s=Symbol("Pipeline Chain"),r=Promise.all(e.map(({args:e})=>this._self.#er.addCommand(e,{chainId:s,typeMapping:this._commandOptions?.typeMapping})));this._self.#ts();let i=await r;return void 0!==t&&(this._self.#eq=t),i}async _executeMulti(e,t){let s=this._self.#eJ;this._self.#eJ=void 0;let r=this._self.#eQ;if(this._self.#eQ=void 0,!this._self.#ep.isOpen)throw new c.ClientClosedError;if(s)throw new c.WatchError(s);if(r&&r!==this._self.socketEpoch)throw new c.WatchError("Client reconnected after WATCH");let i=this._commandOptions?.typeMapping,n=Symbol("MULTI Chain"),o=[this._self.#er.addCommand(["MULTI"],{chainId:n})];for(let{args:t}of e)o.push(this._self.#er.addCommand(t,{chainId:n,typeMapping:i}));o.push(this._self.#er.addCommand(["EXEC"],{chainId:n})),this._self.#ts();let a=await Promise.all(o),u=a[a.length-1];if(null===u)throw new c.WatchError;return void 0!==t&&(this._self.#eq=t),u}MULTI(){return new this.Multi(this._executeMulti.bind(this),this._executePipeline.bind(this),this._commandOptions?.typeMapping)}multi=this.MULTI;async *scanIterator(e){let t=e?.cursor??"0";do{let s=await this.scan(t,e);t=s.cursor,yield s.keys}while("0"!==t)}async *hScanIterator(e,t){let s=t?.cursor??"0";do{let r=await this.hScan(e,s,t);s=r.cursor,yield r.entries}while("0"!==s)}async *hScanValuesIterator(e,t){let s=t?.cursor??"0";do{let r=await this.hScanNoValues(e,s,t);s=r.cursor,yield r.fields}while("0"!==s)}async *hScanNoValuesIterator(e,t){let s=t?.cursor??"0";do{let r=await this.hScanNoValues(e,s,t);s=r.cursor,yield r.fields}while("0"!==s)}async *sScanIterator(e,t){let s=t?.cursor??"0";do{let r=await this.sScan(e,s,t);s=r.cursor,yield r.members}while("0"!==s)}async *zScanIterator(e,t){let s=t?.cursor??"0";do{let r=await this.zScan(e,s,t);s=r.cursor,yield r.members}while("0"!==s)}async MONITOR(e){let t=this._self.#er.monitor(e,{typeMapping:this._commandOptions?.typeMapping});this._self.#ts(),await t,this._self.#e$=e}monitor=this.MONITOR;async reset(){let e=Symbol("Reset Chain"),t=[this._self.#er.reset(e)],s=this._self.#g?.database??0;this._self.#e1?.dispose(),this._self.#e1=null,t.push(...await this._self.#e5(e,!1)),this._self.#ts(),await Promise.all(t),this._self.#eq=s,this._self.#e$=void 0,this._self.#eJ=void 0,this._self.#eQ=void 0}resetIfDirty(){let e=!1;if(this._self.#eq!==(this._self.#g?.database??0)&&(console.warn("Returning a client with a different selected DB"),e=!0),this._self.#e$&&(console.warn("Returning a client with active MONITOR"),e=!0),this._self.#er.isPubSubActive&&(console.warn("Returning a client with active PubSub"),e=!0),(this._self.#eJ||this._self.#eQ)&&(console.warn("Returning a client with active WATCH"),e=!0),e)return this.reset()}QUIT(){return this._self.#e1?.dispose(),this._self.#e1=null,this._self.#ep.quit(async()=>{clearTimeout(this._self.#tt);let e=this._self.#er.addCommand(["QUIT"]);return this._self.#ts(),e})}quit=this.QUIT;disconnect(){return Promise.resolve(this.destroy())}close(){return new Promise(e=>{if(clearTimeout(this._self.#tt),this._self.#ep.close(),this._self.#e0?.onClose(),this._self.#er.isEmpty())return this._self.#ep.destroySocket(),e();let t=()=>{this._self.#er.isEmpty()&&(this._self.#ep.off("data",t),this._self.#ep.destroySocket(),e())};this._self.#ep.on("data",t),this._self.#e1?.dispose(),this._self.#e1=null})}destroy(){clearTimeout(this._self.#tt),this._self.#er.flushAll(new c.DisconnectsClientError),this._self.#ep.destroy(),this._self.#e0?.onClose(),this._self.#e1?.dispose(),this._self.#e1=null}ref(){this._self.#ep.ref()}unref(){this._self.#ep.unref()}}r=b,t.default=b},63087:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenManager=t.IDPError=void 0;let r=s(80309);class i extends Error{message;isRetryable;constructor(e,t){super(e),this.message=e,this.isRetryable=t,this.name="IDPError"}}t.IDPError=i;class n{identityProvider;config;currentToken=null;refreshTimeout=null;listener=null;retryAttempt=0;constructor(e,t){if(this.identityProvider=e,this.config=t,this.config.expirationRefreshRatio>1)throw Error("expirationRefreshRatio must be less than or equal to 1");if(this.config.expirationRefreshRatio<0)throw Error("expirationRefreshRatio must be greater or equal to 0")}start(e,t=0){return this.listener&&this.stop(),this.listener=e,this.retryAttempt=0,this.scheduleNextRefresh(t),{dispose:()=>this.stop()}}calculateRetryDelay(){if(!this.config.retry)return 0;let{initialDelayMs:e,maxDelayMs:t,backoffMultiplier:s,jitterPercentage:r}=this.config.retry,i=e*Math.pow(s,this.retryAttempt-1);if(i=Math.min(i,t),r){let e=r/100*i;i+=Math.random()*e-e/2}return Math.max(0,Math.floor(i))}shouldRetry(e){if(!this.config.retry)return!1;let{maxAttempts:t,isRetryable:s}=this.config.retry;return!(this.retryAttempt>=t)&&!!s&&s(e,this.retryAttempt)}isRunning(){return null!==this.listener}async refresh(){if(!this.listener)throw Error("TokenManager is not running, but refresh was called");try{await this.identityProvider.requestToken().then(this.handleNewToken),this.retryAttempt=0}catch(e){if(this.shouldRetry(e)){this.retryAttempt++;let t=this.calculateRetryDelay();this.notifyError(`Token refresh failed (attempt ${this.retryAttempt}), retrying in ${t}ms: ${e}`,!0),this.scheduleNextRefresh(t)}else this.notifyError(e,!1),this.stop()}}handleNewToken=async({token:e,ttlMs:t})=>{if(!this.listener)throw Error("TokenManager is not running, but a new token was received");let s=this.wrapAndSetCurrentToken(e,t);this.listener.onNext(s),this.scheduleNextRefresh(this.calculateRefreshTime(s))};wrapAndSetCurrentToken(e,t){let s=Date.now(),i=new r.Token(e,s+t,s);return this.currentToken=i,i}scheduleNextRefresh(e){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null),0===e?this.refresh():this.refreshTimeout=setTimeout(()=>this.refresh(),e)}calculateRefreshTime(e,t=Date.now()){return Math.floor(e.getTtlMs(t)*this.config.expirationRefreshRatio)}stop(){this.refreshTimeout&&(clearTimeout(this.refreshTimeout),this.refreshTimeout=null),this.listener=null,this.currentToken=null,this.retryAttempt=0}getCurrentToken(){return this.currentToken}notifyError(e,t){let s=e instanceof Error?e.message:String(e);if(!this.listener)throw Error(`TokenManager is not running but received an error: ${s}`);this.listener.onError(new i(s,t))}}t.TokenManager=n},63421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LATENCY_EVENTS=void 0,t.LATENCY_EVENTS={ACTIVE_DEFRAG_CYCLE:"active-defrag-cycle",AOF_FSYNC_ALWAYS:"aof-fsync-always",AOF_STAT:"aof-stat",AOF_REWRITE_DIFF_WRITE:"aof-rewrite-diff-write",AOF_RENAME:"aof-rename",AOF_WRITE:"aof-write",AOF_WRITE_ACTIVE_CHILD:"aof-write-active-child",AOF_WRITE_ALONE:"aof-write-alone",AOF_WRITE_PENDING_FSYNC:"aof-write-pending-fsync",COMMAND:"command",EXPIRE_CYCLE:"expire-cycle",EVICTION_CYCLE:"eviction-cycle",EVICTION_DEL:"eviction-del",FAST_COMMAND:"fast-command",FORK:"fork",RDB_UNLINK_TEMP_FILE:"rdb-unlink-temp-file"},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("LATENCY","GRAPH",t)},transformReply:void 0}},63436:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i){e.push("EXPIREAT"),e.pushKey(t),e.push((0,r.transformEXAT)(s)),i&&e.push(i)},transformReply:void 0}},63437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r,i){e.push("HPEXPIRE"),e.pushKey(t),e.push(r.toString()),i&&e.push(i),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},63727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){for(let r of(e.push("BITFIELD"),e.pushKey(t),s))switch(r.operation){case"GET":e.push("GET",r.encoding,r.offset.toString());break;case"SET":e.push("SET",r.encoding,r.offset.toString(),r.value.toString());break;case"INCRBY":e.push("INCRBY",r.encoding,r.offset.toString(),r.increment.toString());break;case"OVERFLOW":e.push("OVERFLOW",r.behavior)}},transformReply:void 0}},64290:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CONFIG","RESETSTAT")},transformReply:void 0}},64375:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","LIST")},transformReply:void 0}},64577:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={parseCommand(e,t){e.push("SENTINEL","REPLICAS",t)},transformReply:{2:(e,t,s)=>e.reduce((e,t)=>(e.push((0,r.transformTuplesReply)(t,void 0,s)),e),[]),3:void 0}}},64851:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(3994);function i(e){return"number"==typeof e?e.toString():e}t.default={parseCommand(e,t,s,n){e.push("HSETEX"),e.pushKey(t),n?.mode&&e.push(n.mode),n?.expiration&&("string"==typeof n.expiration?e.push(n.expiration):"KEEPTTL"===n.expiration.type?e.push("KEEPTTL"):e.push(n.expiration.type,n.expiration.value.toString())),e.push("FIELDS"),s instanceof Map?function(e,t){for(let[s,r]of(e.push(t.size.toString()),t.entries()))e.push(i(s),i(r))}(e,s):Array.isArray(s)?function(e,t){let s=new r.BasicCommandParser;if(function e(t,s){for(let r of s){if(Array.isArray(r)){e(t,r);continue}t.push(i(r))}}(s,t),s.redisArgs.length%2!=0)throw Error("invalid number of arguments, expected key value ....[key value] pairs, got key without value");e.push((s.redisArgs.length/2).toString()),e.push(...s.redisArgs)}(e,s):function(e,t){let s=Object.keys(t).length;if(0==s)throw Error("object without keys");for(let r of(e.push(s.toString()),Object.keys(t)))e.push(i(r),i(t[r]))}(e,s)},transformReply:void 0}},65309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("EXPIRE"),e.pushKey(t),e.push(s.toString()),r&&e.push(r)},transformReply:void 0}},65704:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("XGROUP","CREATECONSUMER"),e.pushKey(t),e.push(s,r)},transformReply:void 0}},66193:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(32486)),n=r(s(56520)),o=r(s(64577)),a=r(s(42119)),u=r(s(71334));t.default={SENTINEL_SENTINELS:a.default,sentinelSentinels:a.default,SENTINEL_MASTER:i.default,sentinelMaster:i.default,SENTINEL_REPLICAS:o.default,sentinelReplicas:o.default,SENTINEL_MONITOR:n.default,sentinelMonitor:n.default,SENTINEL_SET:u.default,sentinelSet:u.default}},66389:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("LLEN"),e.pushKey(t)},transformReply:void 0}},66617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("MODULE","LOAD",t),s&&e.push(...s)},transformReply:void 0}},66628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("HKEYS"),e.pushKey(t)},transformReply:void 0}},66790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("LATENCY","LATEST")},transformReply:void 0}},66995:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PubSubProxy=void 0;let i=r(s(78474)),n=s(45369),o=r(s(62537));class a extends i.default{#tn;#to;#ta;#tu;#tl;constructor(e,t){super(),this.#tn=e,this.#to=t}#x(){if(void 0===this.#ta)throw Error("pubSubProxy: didn't define node to do pubsub against");return new o.default({...this.#tn,socket:{...this.#tn.socket,host:this.#ta.host,port:this.#ta.port}})}async #U(e=!1){let t=this.#x().on("error",this.#to),s=t.connect().then(async t=>this.#tu?.client!==t||(e&&this.#tl&&await Promise.all([t.extendPubSubListeners(n.PUBSUB_TYPE.CHANNELS,this.#tl[n.PUBSUB_TYPE.CHANNELS]),t.extendPubSubListeners(n.PUBSUB_TYPE.PATTERNS,this.#tl[n.PUBSUB_TYPE.PATTERNS])]),this.#tu.client!==t)?(t.destroy(),this.#tu?.connectPromise):(this.#tu.connectPromise=void 0,t)).catch(e=>{throw this.#tu=void 0,e});return this.#tu={client:t,connectPromise:s},s}#td(){return this.#tu?this.#tu.connectPromise??this.#tu.client:this.#U()}async changeNode(e){this.#ta=e,this.#tu&&(void 0===this.#tu.connectPromise&&(this.#tl={[n.PUBSUB_TYPE.CHANNELS]:this.#tu.client.getPubSubListeners(n.PUBSUB_TYPE.CHANNELS),[n.PUBSUB_TYPE.PATTERNS]:this.#tu.client.getPubSubListeners(n.PUBSUB_TYPE.PATTERNS)},this.#tu.client.destroy()),await this.#U(!0))}#tc(e){let t=this.#td();return t instanceof o.default?e(t):t.then(t=>{if(void 0!==t)return e(t)}).catch(e=>{throw this.#tu?.client.isPubSubActive&&(this.#tu.client.destroy(),this.#tu=void 0),e})}subscribe(e,t,s){return this.#tc(r=>r.SUBSCRIBE(e,t,s))}#th(e){return this.#tc(async t=>{let s=await e(t);return t.isPubSubActive||(t.destroy(),this.#tu=void 0),s})}async unsubscribe(e,t,s){return this.#th(r=>r.UNSUBSCRIBE(e,t,s))}async pSubscribe(e,t,s){return this.#tc(r=>r.PSUBSCRIBE(e,t,s))}async pUnsubscribe(e,t,s){return this.#th(r=>r.PUNSUBSCRIBE(e,t,s))}destroy(){this.#tl=void 0,void 0!==this.#tu&&(this.#tu.connectPromise||this.#tu.client.destroy(),this.#tu=void 0)}}t.PubSubProxy=a},67062:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","SAVE")},transformReply:void 0}},67218:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","DELSLOTSRANGE"),(0,r.parseSlotRangesArguments)(e,t)},transformReply:void 0}},67352:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeoRadiusByMemberArguments=void 0;let r=s(82557);function i(e,t,s,i,n,o){e.pushKey(t),e.push(s,i.toString(),n),(0,r.parseGeoSearchOptions)(e,o)}t.parseGeoRadiusByMemberArguments=i,t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,n,o){e.push("GEORADIUSBYMEMBER"),i(e,t,s,r,n,o)},transformReply:void 0}},67656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("XGROUP","DESTROY"),e.pushKey(t),e.push(s)},transformReply:void 0}},67894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","RESET"),t?.mode&&e.push(t.mode)},transformReply:void 0}},68248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("LPOS"),e.pushKey(t),e.push(s),r?.RANK!==void 0&&e.push("RANK",r.RANK.toString()),r?.MAXLEN!==void 0&&e.push("MAXLEN",r.MAXLEN.toString())},transformReply:void 0}},69003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("RPOPLPUSH"),e.pushKeys([t,s])},transformReply:void 0}},69515:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("PEXPIRE"),e.pushKey(t),e.push(s.toString()),r&&e.push(r)},transformReply:void 0}},69728:(e,t,s)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Decoder=t.PUSH_TYPE_MAPPING=t.RESP_TYPES=void 0;let i=s(45732),n=s(56602);t.RESP_TYPES={NULL:95,BOOLEAN:35,NUMBER:58,BIG_NUMBER:40,DOUBLE:44,SIMPLE_STRING:43,BLOB_STRING:36,VERBATIM_STRING:61,SIMPLE_ERROR:45,BLOB_ERROR:33,ARRAY:42,SET:126,MAP:37,PUSH:62};let o={"\r":13,t:116,"+":43,"-":45,0:48,".":46,i:105,n:110,E:69,e:101};t.PUSH_TYPE_MAPPING={[t.RESP_TYPES.BLOB_STRING]:Buffer};class a{onReply;onErrorReply;onPush;getTypeMapping;#tp=0;#tf;constructor(e){this.onReply=e.onReply,this.onErrorReply=e.onErrorReply,this.onPush=e.onPush,this.getTypeMapping=e.getTypeMapping}reset(){this.#tp=0,this.#tf=void 0}write(e){if(this.#tp>=e.length||this.#tf&&(this.#tf(e)||this.#tp>=e.length)){this.#tp-=e.length;return}do{let t=e[this.#tp];if(++this.#tp===e.length){this.#tf=this.#tm.bind(this,t);break}if(this.#t_(t,e))break}while(this.#tp<e.length);this.#tp-=e.length}#tm(e,t){return this.#tf=void 0,this.#t_(e,t)}#t_(e,s){switch(e){case t.RESP_TYPES.NULL:return this.onReply(this.#tE()),!1;case t.RESP_TYPES.BOOLEAN:return this.#tS(this.onReply,this.#ty(s));case t.RESP_TYPES.NUMBER:return this.#tS(this.onReply,this.#tR(this.getTypeMapping()[t.RESP_TYPES.NUMBER],s));case t.RESP_TYPES.BIG_NUMBER:return this.#tS(this.onReply,this.#tC(this.getTypeMapping()[t.RESP_TYPES.BIG_NUMBER],s));case t.RESP_TYPES.DOUBLE:return this.#tS(this.onReply,this.#tO(this.getTypeMapping()[t.RESP_TYPES.DOUBLE],s));case t.RESP_TYPES.SIMPLE_STRING:return this.#tS(this.onReply,this.#tb(this.getTypeMapping()[t.RESP_TYPES.SIMPLE_STRING],s));case t.RESP_TYPES.BLOB_STRING:return this.#tS(this.onReply,this.#tA(this.getTypeMapping()[t.RESP_TYPES.BLOB_STRING],s));case t.RESP_TYPES.VERBATIM_STRING:return this.#tS(this.onReply,this.#tT(this.getTypeMapping()[t.RESP_TYPES.VERBATIM_STRING],s));case t.RESP_TYPES.SIMPLE_ERROR:return this.#tS(this.onErrorReply,this.#tg(s));case t.RESP_TYPES.BLOB_ERROR:return this.#tS(this.onErrorReply,this.#tN(s));case t.RESP_TYPES.ARRAY:return this.#tS(this.onReply,this.#tM(this.getTypeMapping(),s));case t.RESP_TYPES.SET:return this.#tS(this.onReply,this.#tv(this.getTypeMapping(),s));case t.RESP_TYPES.MAP:return this.#tS(this.onReply,this.#tP(this.getTypeMapping(),s));case t.RESP_TYPES.PUSH:return this.#tS(this.onPush,this.#tM(t.PUSH_TYPE_MAPPING,s));default:throw Error(`Unknown RESP type ${e} "${String.fromCharCode(e)}"`)}}#tS(e,t){return"function"==typeof t?(this.#tf=this.#tI.bind(this,e,t),!0):(e(t),!1)}#tI(e,t,s){return this.#tf=void 0,this.#tS(e,t(s))}#tE(){return this.#tp+=2,null}#ty(e){let t=e[this.#tp]===o.t;return this.#tp+=3,t}#tR(e,t){if(e===String)return this.#tb(String,t);switch(t[this.#tp]){case o["+"]:return this.#tD(!1,t);case o["-"]:return this.#tD(!0,t);default:return this.#tL(!1,this.#tY.bind(this,0),t)}}#tD(e,t){let s=this.#tY.bind(this,0);return++this.#tp===t.length?this.#tL.bind(this,e,s):this.#tL(e,s,t)}#tL(e,t,s){let r=t(s);return"function"==typeof r?this.#tL.bind(this,e,r):e?-r:r}#tY(e,t){let s=this.#tp;do{let r=t[s];if(r===o["\r"])return this.#tp=s+2,e;e=10*e+r-o["0"]}while(++s<t.length);return this.#tp=s,this.#tY.bind(this,e)}#tC(e,t){if(e===String)return this.#tb(String,t);switch(t[this.#tp]){case o["+"]:return this.#tB(!1,t);case o["-"]:return this.#tB(!0,t);default:return this.#tU(!1,this.#tj.bind(this,0n),t)}}#tB(e,t){let s=this.#tj.bind(this,0n);return++this.#tp===t.length?this.#tU.bind(this,e,s):this.#tU(e,s,t)}#tU(e,t,s){let r=t(s);return"function"==typeof r?this.#tU.bind(this,e,r):e?-r:r}#tj(e,t){let s=this.#tp;do{let r=t[s];if(r===o["\r"])return this.#tp=s+2,e;e=10n*e+BigInt(r-o["0"])}while(++s<t.length);return this.#tp=s,this.#tj.bind(this,e)}#tO(e,t){if(e===String)return this.#tb(String,t);switch(t[this.#tp]){case o.n:return this.#tp+=5,NaN;case o["+"]:return this.#tw(!1,t);case o["-"]:return this.#tw(!0,t);default:return this.#tK(!1,0,t)}}#tw(e,t){return++this.#tp===t.length?this.#tK.bind(this,e,0):this.#tK(e,0,t)}#tK(e,t,s){return s[this.#tp]===o.i?(this.#tp+=5,e?-1/0:1/0):this.#tx(e,t,s)}#tx(e,t,s){let r=this.#tp;do{let i=s[r];switch(i){case o["."]:return this.#tp=r+1,this.#tp<s.length?this.#tH(e,0,t,s):this.#tH.bind(this,e,0,t);case o.E:case o.e:this.#tp=r+1;let n=e?-t:t;return this.#tp<s.length?this.#tF(n,s):this.#tF.bind(this,n);case o["\r"]:return this.#tp=r+2,e?-t:t;default:t=10*t+i-o["0"]}}while(++r<s.length);return this.#tp=r,this.#tx.bind(this,e,t)}static #tG=[.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17];#tH(e,t,s,i){let n=this.#tp;do{let a=i[n];switch(a){case o.E:case o.e:this.#tp=n+1;let u=e?-s:s;return this.#tp===i.length?this.#tF.bind(this,u):this.#tF(u,i);case o["\r"]:return this.#tp=n+2,e?-s:s}t<r.#tG.length&&(s+=(a-o["0"])*r.#tG[t++])}while(++n<i.length);return this.#tp=n,this.#tH.bind(this,e,t,s)}#tF(e,t){switch(t[this.#tp]){case o["+"]:return++this.#tp===t.length?this.#tk.bind(this,!1,e,0):this.#tk(!1,e,0,t);case o["-"]:return++this.#tp===t.length?this.#tk.bind(this,!0,e,0):this.#tk(!0,e,0,t)}return this.#tk(!1,e,0,t)}#tk(e,t,s,r){let i=this.#tp;do{let n=r[i];if(n===o["\r"])return this.#tp=i+2,t*10**(e?-s:s);s=10*s+n-o["0"]}while(++i<r.length);return this.#tp=i,this.#tk.bind(this,e,t,s)}#tV(e,t){for(;e[t]!==o["\r"];)if(++t===e.length)return this.#tp=e.length,-1;return this.#tp=t+2,t}#tb(e,t){let s=this.#tp,r=this.#tV(t,s);if(-1===r)return this.#tW.bind(this,[t.subarray(s)],e);let i=t.subarray(s,r);return e===Buffer?i:i.toString()}#tW(e,t,s){let r=this.#tp,i=this.#tV(s,r);return -1===i?(e.push(s.subarray(r)),this.#tW.bind(this,e,t)):(e.push(s.subarray(r,i)),t===Buffer?Buffer.concat(e):e.join(""))}#tA(e,t){if(t[this.#tp]===o["-"])return this.#tp+=4,null;let s=this.#tY(0,t);return"function"==typeof s?this.#tX.bind(this,s,e):this.#tp>=t.length?this.#tz.bind(this,s,e):this.#tz(s,e,t)}#tX(e,t,s){let r=e(s);return"function"==typeof r?this.#tX.bind(this,r,t):this.#tp>=s.length?this.#tz.bind(this,r,t):this.#tz(r,t,s)}#tZ(e,t,s,r){let i=this.#tp+e;if(i>=r.length){let i=r.subarray(this.#tp);return this.#tp=r.length,this.#tq.bind(this,e-i.length,[i],t,s)}let n=r.subarray(this.#tp,i);return this.#tp=i+t,s===Buffer?n:n.toString()}#tq(e,t,s,r,i){let n=this.#tp+e;if(n>=i.length){let n=i.subarray(this.#tp);return t.push(n),this.#tp=i.length,this.#tq.bind(this,e-n.length,t,s,r)}return t.push(i.subarray(this.#tp,n)),this.#tp=n+s,r===Buffer?Buffer.concat(t):t.join("")}#tz(e,t,s){return this.#tZ(e,2,t,s)}#tT(e,t){return this.#t$(this.#tY.bind(this,0),e,t)}#t$(e,t,s){let r=e(s);return"function"==typeof r?this.#t$.bind(this,r,t):this.#tJ(r,t,s)}#tJ(e,t,s){let r=e-4;return t===i.VerbatimString?this.#tQ(r,s):(this.#tp+=4,this.#tp>=s.length?this.#tz.bind(this,r,t):this.#tz(r,t,s))}#tQ(e,t){let s=this.#tZ.bind(this,3,1,String);return this.#tp>=t.length?this.#t0.bind(this,e,s):this.#t0(e,s,t)}#t0(e,t,s){let r=t(s);return"function"==typeof r?this.#t0.bind(this,e,r):this.#t1(e,r,s)}#t1(e,t,s){return this.#t4(t,this.#tz.bind(this,e,String),s)}#t4(e,t,s){let r=t(s);return"function"==typeof r?this.#t4.bind(this,e,r):new i.VerbatimString(e,r)}#tg(e){let t=this.#tb(String,e);return"function"==typeof t?this.#t2.bind(this,t):new n.SimpleError(t)}#t2(e,t){let s=e(t);return"function"==typeof s?this.#t2.bind(this,s):new n.SimpleError(s)}#tN(e){let t=this.#tA(String,e);return"function"==typeof t?this.#t3.bind(this,t):new n.BlobError(t)}#t3(e,t){let s=e(t);return"function"==typeof s?this.#t3.bind(this,s):new n.BlobError(s)}#t7(e,t){let s=t[this.#tp];return++this.#tp===t.length?this.#t5.bind(this,s,e):this.#t5(s,e,t)}#t5(e,s,r){switch(e){case t.RESP_TYPES.NULL:return this.#tE();case t.RESP_TYPES.BOOLEAN:return this.#ty(r);case t.RESP_TYPES.NUMBER:return this.#tR(s[t.RESP_TYPES.NUMBER],r);case t.RESP_TYPES.BIG_NUMBER:return this.#tC(s[t.RESP_TYPES.BIG_NUMBER],r);case t.RESP_TYPES.DOUBLE:return this.#tO(s[t.RESP_TYPES.DOUBLE],r);case t.RESP_TYPES.SIMPLE_STRING:return this.#tb(s[t.RESP_TYPES.SIMPLE_STRING],r);case t.RESP_TYPES.BLOB_STRING:return this.#tA(s[t.RESP_TYPES.BLOB_STRING],r);case t.RESP_TYPES.VERBATIM_STRING:return this.#tT(s[t.RESP_TYPES.VERBATIM_STRING],r);case t.RESP_TYPES.SIMPLE_ERROR:return this.#tg(r);case t.RESP_TYPES.BLOB_ERROR:return this.#tN(r);case t.RESP_TYPES.ARRAY:return this.#tM(s,r);case t.RESP_TYPES.SET:return this.#tv(s,r);case t.RESP_TYPES.MAP:return this.#tP(s,r);default:throw Error(`Unknown RESP type ${e} "${String.fromCharCode(e)}"`)}}#tM(e,t){return t[this.#tp]===o["-"]?(this.#tp+=4,null):this.#t6(this.#tY(0,t),e,t)}#t6(e,t,s){return"function"==typeof e?this.#t8.bind(this,e,t):this.#t9(Array(e),0,t,s)}#t8(e,t,s){return this.#t6(e(s),t,s)}#t9(e,t,s,r){for(let i=t;i<e.length;i++){if(this.#tp>=r.length)return this.#t9.bind(this,e,i,s);let t=this.#t7(s,r);if("function"==typeof t)return this.#se.bind(this,e,i,t,s);e[i]=t}return e}#se(e,t,s,r,i){let n=s(i);return"function"==typeof n?this.#se.bind(this,e,t,n,r):(e[t++]=n,this.#t9(e,t,r,i))}#tv(e,t){let s=this.#tY(0,t);return"function"==typeof s?this.#st.bind(this,s,e):this.#ss(s,e,t)}#st(e,t,s){let r=e(s);return"function"==typeof r?this.#st.bind(this,r,t):this.#ss(r,t,s)}#ss(e,s,r){return s[t.RESP_TYPES.SET]===Set?this.#sr(new Set,e,s,r):this.#t9(Array(e),0,s,r)}#sr(e,t,s,r){for(;t>0;){if(this.#tp>=r.length)return this.#sr.bind(this,e,t,s);let i=this.#t7(s,r);if("function"==typeof i)return this.#si.bind(this,e,t,i,s);e.add(i),--t}return e}#si(e,t,s,r,i){let n=s(i);return"function"==typeof n?this.#si.bind(this,e,t,n,r):(e.add(n),this.#sr(e,t-1,r,i))}#tP(e,t){let s=this.#tY(0,t);return"function"==typeof s?this.#sn.bind(this,s,e):this.#so(s,e,t)}#sn(e,t,s){let r=e(s);return"function"==typeof r?this.#sn.bind(this,r,t):this.#so(r,t,s)}#so(e,s,r){switch(s[t.RESP_TYPES.MAP]){case Map:return this.#sa(new Map,e,s,r);case Array:return this.#t9(Array(2*e),0,s,r);default:return this.#su(Object.create(null),e,s,r)}}#sa(e,t,s,r){for(;t>0;){if(this.#tp>=r.length)return this.#sa.bind(this,e,t,s);let i=this.#sl(s,r);if("function"==typeof i)return this.#sd.bind(this,e,t,i,s);if(this.#tp>=r.length)return this.#sc.bind(this,e,t,i,this.#t7.bind(this,s),s);let n=this.#t7(s,r);if("function"==typeof n)return this.#sc.bind(this,e,t,i,n,s);e.set(i,n),--t}return e}#sl(e,t){let s=t[this.#tp];return++this.#tp===t.length?this.#sh.bind(this,s,e):this.#sh(s,e,t)}#sh(e,s,r){switch(e){case t.RESP_TYPES.SIMPLE_STRING:return this.#tb(String,r);case t.RESP_TYPES.BLOB_STRING:return this.#tA(String,r);default:return this.#t5(e,s,r)}}#sd(e,t,s,r,i){let n=s(i);if("function"==typeof n)return this.#sd.bind(this,e,t,n,r);if(this.#tp>=i.length)return this.#sc.bind(this,e,t,n,this.#t7.bind(this,r),r);let o=this.#t7(r,i);return"function"==typeof o?this.#sc.bind(this,e,t,n,o,r):(e.set(n,o),this.#sa(e,t-1,r,i))}#sc(e,t,s,r,i,n){let o=r(n);return"function"==typeof o?this.#sc.bind(this,e,t,s,o,i):(e.set(s,o),this.#sa(e,t-1,i,n))}#su(e,t,s,r){for(;t>0;){if(this.#tp>=r.length)return this.#su.bind(this,e,t,s);let i=this.#sl(s,r);if("function"==typeof i)return this.#sp.bind(this,e,t,i,s);if(this.#tp>=r.length)return this.#sf.bind(this,e,t,i,this.#t7.bind(this,s),s);let n=this.#t7(s,r);if("function"==typeof n)return this.#sf.bind(this,e,t,i,n,s);e[i]=n,--t}return e}#sp(e,t,s,r,i){let n=s(i);if("function"==typeof n)return this.#sp.bind(this,e,t,n,r);if(this.#tp>=i.length)return this.#sf.bind(this,e,t,n,this.#t7.bind(this,r),r);let o=this.#t7(r,i);return"function"==typeof o?this.#sf.bind(this,e,t,n,o,r):(e[n]=o,this.#su(e,t-1,r,i))}#sf(e,t,s,r,i,n){let o=r(n);return"function"==typeof o?this.#sf.bind(this,e,t,s,o,i):(e[s]=o,this.#su(e,t-1,i,n))}}t.Decoder=a,r=a},69821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("GETBIT"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},69944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("RESTORE-ASKING")},transformReply:void 0}},69954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("EXISTS"),e.pushKeys(t)},transformReply:void 0}},70956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("ZREM"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},70986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("KEYS",t)},transformReply:void 0}},71334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){for(let r of(e.push("SENTINEL","SET",t),s))e.push(r.option,r.value)},transformReply:void 0}},71501:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("MODULE","LIST")},transformReply:{2:e=>e.map(e=>({name:e[1],ver:e[3]})),3:void 0}}},71538:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(88390));t.default={IS_READ_ONLY:!0,parseCommand(...e){e[0].push("SORT_RO"),(0,o.parseSortArguments)(...e)},transformReply:o.default.transformReply}},71591:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("LASTSAVE")},transformReply:void 0}},72192:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushXReadStreams=void 0;let r=s(47470);function i(e,t){if(e.push("STREAMS"),Array.isArray(t)){for(let s=0;s<t.length;s++)e.pushKey(t[s].key);for(let s=0;s<t.length;s++)e.push(t[s].id)}else e.pushKey(t.key),e.push(t.id)}t.pushXReadStreams=i,t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("XREAD"),s?.COUNT&&e.push("COUNT",s.COUNT.toString()),s?.BLOCK!==void 0&&e.push("BLOCK",s.BLOCK.toString()),i(e,t)},transformReply:{2:r.transformStreamsMessagesReplyResp2,3:void 0},unstableResp3:!0}},72967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("HINCRBY"),e.pushKey(t),e.push(s,r.toString())},transformReply:void 0}},73026:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,i){e.push("ZUNIONSTORE"),e.pushKey(t),(0,r.parseZKeysArguments)(e,s),i?.AGGREGATE&&e.push("AGGREGATE",i.AGGREGATE)},transformReply:void 0}},73314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SMEMBERS"),e.pushKey(t)},transformReply:{2:void 0,3:void 0}}},73393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r,i){e.push("GEODIST"),e.pushKey(t),e.push(s,r),i&&e.push(i)},transformReply:e=>null===e?null:Number(e)}},73647:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REDIS_FLUSH_MODES=void 0,t.REDIS_FLUSH_MODES={ASYNC:"ASYNC",SYNC:"SYNC"},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FLUSHALL"),t&&e.push(t)},transformReply:void 0}},73748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","GETREDIR")},transformReply:void 0}},73788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HEXISTS"),e.pushKey(t),e.push(s)},transformReply:void 0}},73889:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(84531));t.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:{2:e=>{let t={};for(let s=0;s<e.length;s+=2)t[e[s].toString()]=i.transformDoubleReply[2](e[s+1]);return t},3:void 0}}},74170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("CLUSTER","MEET",t,s.toString())},transformReply:void 0}},74171:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("FUNCTION","RESTORE",t),s?.mode&&e.push(s.mode)},transformReply:void 0}},74360:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(88390));t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){i.default.parseCommand(e,t,r),e.push("STORE",s)},transformReply:void 0}},75163:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(17051),i=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i){e.push("ZSCAN"),e.pushKey(t),(0,r.parseScanArguments)(e,s,i)},transformReply:([e,t])=>({cursor:e,members:i.transformSortedSetReply[2](t)})}},75832:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.CredentialsError=t.UnableToObtainNewCredentialsError=t.IDPError=t.TokenManager=void 0;var r=s(63087);Object.defineProperty(t,"TokenManager",{enumerable:!0,get:function(){return r.TokenManager}}),Object.defineProperty(t,"IDPError",{enumerable:!0,get:function(){return r.IDPError}});var i=s(35342);Object.defineProperty(t,"UnableToObtainNewCredentialsError",{enumerable:!0,get:function(){return i.UnableToObtainNewCredentialsError}}),Object.defineProperty(t,"CredentialsError",{enumerable:!0,get:function(){return i.CredentialsError}});var n=s(80309);Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return n.Token}})},75836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMMAND_LIST_FILTER_BY=void 0,t.COMMAND_LIST_FILTER_BY={MODULE:"MODULE",ACLCAT:"ACLCAT",PATTERN:"PATTERN"},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","LIST"),t?.FILTERBY&&e.push("FILTERBY",t.FILTERBY.type,t.FILTERBY.value)},transformReply:void 0}},75841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","INFO")},transformReply:void 0}},75850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("ZLEXCOUNT"),e.pushKey(t),e.push(s),e.push(r)},transformReply:void 0}},75923:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={parseCommand(e,t,s,i,n){for(let i of(e.push("VADD"),e.pushKey(t),n?.REDUCE!==void 0&&e.push("REDUCE",n.REDUCE.toString()),e.push("VALUES",s.length.toString()),s))e.push((0,r.transformDoubleArgument)(i));e.push(i),n?.CAS&&e.push("CAS"),n?.QUANT&&e.push(n.QUANT),n?.EF!==void 0&&e.push("EF",n.EF.toString()),n?.SETATTR&&e.push("SETATTR",JSON.stringify(n.SETATTR)),n?.M!==void 0&&e.push("M",n.M.toString())},transformReply:r.transformBooleanReply}},75933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zRangeArgument=void 0;let r=s(47470);function i(e,t,s){let i=[(0,r.transformStringDoubleArgument)(e),(0,r.transformStringDoubleArgument)(t)];switch(s?.BY){case"SCORE":i.push("BYSCORE");break;case"LEX":i.push("BYLEX")}return s?.REV&&i.push("REV"),s?.LIMIT&&i.push("LIMIT",s.LIMIT.offset.toString(),s.LIMIT.count.toString()),i}t.zRangeArgument=i,t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r,n){e.push("ZRANGE"),e.pushKey(t),e.pushVariadic(i(s,r,n))},transformReply:void 0}},76165:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(99431));t.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:i.transformSortedSetReply}},76241:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i,n,o){e.push("MIGRATE",t,s.toString());let a=Array.isArray(r);a?e.push(""):e.push(r),e.push(i.toString(),n.toString()),o?.COPY&&e.push("COPY"),o?.REPLACE&&e.push("REPLACE"),o?.AUTH&&(o.AUTH.username?e.push("AUTH2",o.AUTH.username,o.AUTH.password):e.push("AUTH",o.AUTH.password)),a&&(e.push("KEYS"),e.pushVariadic(r))},transformReply:void 0}},76952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=[],s="*"+e.length+"\r\n";for(let r=0;r<e.length;r++){let i=e[r];if("string"==typeof i)s+="$"+Buffer.byteLength(i)+"\r\n"+i+"\r\n";else if(i instanceof Buffer)t.push(s+"$"+i.length.toString()+"\r\n",i),s="\r\n";else throw TypeError(`"arguments[${r}]" must be of type "string | Buffer", got ${typeof i} instead.`)}return t.push(s),t}},77138:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(67352));t.default={IS_READ_ONLY:o.default.IS_READ_ONLY,parseCommand(e,t,s,r,i,n,a){e.push("GEORADIUSBYMEMBER"),(0,o.parseGeoRadiusByMemberArguments)(e,t,s,r,i,a),a?.STOREDIST?e.push("STOREDIST"):e.push("STORE"),e.pushKey(n)},transformReply:void 0}},77275:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(20767));t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(...e){e[0].push("GEORADIUSBYMEMBER_RO"),(0,o.parseGeoRadiusByMemberWithArguments)(...e)},transformReply:o.default.transformReply}},77513:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(36440)),n=r(s(26e3)),o=s(29987),a=s(3994);class u{static #Z(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;i.preserve=r.preserve;let n=r.firstKey;return this.addCommand(n,e.IS_READ_ONLY,i,s)}}static #eW(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;i.preserve=r.preserve;let n=r.firstKey;return this._self.addCommand(n,e.IS_READ_ONLY,i,s)}}static #eX(e,t,s){let r=(0,o.functionArgumentsPrefix)(e,t),i=(0,o.getTransformReply)(t,s);return function(...e){let s=new a.BasicCommandParser;s.push(...r),t.parseCommand(s,...e);let n=s.redisArgs;n.preserve=s.preserve;let o=s.firstKey;return this._self.addCommand(o,t.IS_READ_ONLY,n,i)}}static #ez(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;i.preserve=r.preserve;let n=r.firstKey;return this.#ei(n,e.IS_READ_ONLY,e,i,s)}}static extend(e){return(0,o.attachConfig)({BaseClass:u,commands:i.default,createCommand:u.#Z,createModuleCommand:u.#eW,createFunctionCommand:u.#eX,createScriptCommand:u.#ez,config:e})}#J;#sm;#s_;#sE;#eo=!0;constructor(e,t,s,r){this.#J=new n.default(r),this.#sm=e,this.#s_=t,this.#sE=s}#ea(e,t){this.#sE??=e,this.#eo&&=t}addCommand(e,t,s,r){return this.#ea(e,t),this.#J.addCommand(s,r),this}#ei(e,t,s,r,i){return this.#ea(e,t),this.#J.addScript(s,r,i),this}async exec(e=!1){return e?this.execAsPipeline():this.#J.transformReplies(await this.#sm(this.#sE,this.#eo,this.#J.queue))}EXEC=this.exec;execTyped(e=!1){return this.exec(e)}async execAsPipeline(){return 0===this.#J.queue.length?[]:this.#J.transformReplies(await this.#s_(this.#sE,this.#eo,this.#J.queue))}execAsPipelineTyped(){return this.execAsPipeline()}}t.default=u},77787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","COUNT-FAILURE-REPORTS",t)},transformReply:void 0}},77873:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("BZPOPMAX"),e.pushKeys(t),e.push(s.toString())},transformReply:{2:(e,t,s)=>null===e?null:{key:e[0],value:e[1],score:r.transformDoubleReply[2](e[2],t,s)},3:e=>null===e?null:{key:e[0],value:e[1],score:e[2]}}}},77890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("INFO"),t&&e.push(t)},transformReply:void 0}},78450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HSTRLEN"),e.pushKey(t),e.push(s)},transformReply:void 0}},78563:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ACL","CAT"),t&&e.push(t)},transformReply:void 0}},78667:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,i,n){e.push("ZRANGEBYLEX"),e.pushKey(t),e.push((0,r.transformStringDoubleArgument)(s),(0,r.transformStringDoubleArgument)(i)),n?.LIMIT&&e.push("LIMIT",n.LIMIT.offset.toString(),n.LIMIT.count.toString())},transformReply:void 0}},78768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t){e.push("DECR"),e.pushKey(t)},transformReply:void 0}},78825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t){e.push("LPOP"),e.pushKey(t)},transformReply:void 0}},78976:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("CLIENT","PAUSE",t.toString()),s&&e.push(s)},transformReply:void 0}},79811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("XACK"),e.pushKey(t),e.push(s),e.pushVariadic(r)},transformReply:void 0}},80309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0;class s{value;expiresAtMs;receivedAtMs;constructor(e,t,s){this.value=e,this.expiresAtMs=t,this.receivedAtMs=s}getTtlMs(e){return this.expiresAtMs<e?0:this.expiresAtMs-e}}t.Token=s},81380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("SMOVE"),e.pushKeys([t,s]),e.push(r)},transformReply:void 0}},81449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("XLEN"),e.pushKey(t)},transformReply:void 0}},81542:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("SINTERSTORE"),e.pushKey(t),e.pushKeys(s)},transformReply:void 0}},81860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("SCRIPT","KILL")},transformReply:void 0}},82069:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s,r,i,n){e.push("BITPOS"),e.pushKey(t),e.push(s.toString()),void 0!==r&&e.push(r.toString()),void 0!==i&&e.push(i.toString()),n&&e.push(n)},transformReply:void 0}},82557:(e,t)=>{"use strict";function s(e,t,s,i,n){e.pushKey(t),"string"==typeof s||s instanceof Buffer?e.push("FROMMEMBER",s):e.push("FROMLONLAT",s.longitude.toString(),s.latitude.toString()),"radius"in i?e.push("BYRADIUS",i.radius.toString(),i.unit):e.push("BYBOX",i.width.toString(),i.height.toString(),i.unit),r(e,n)}function r(e,t){t?.SORT&&e.push(t.SORT),t?.COUNT&&("number"==typeof t.COUNT?e.push("COUNT",t.COUNT.toString()):(e.push("COUNT",t.COUNT.value.toString()),t.COUNT.ANY&&e.push("ANY")))}Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeoSearchOptions=t.parseGeoSearchArguments=void 0,t.parseGeoSearchArguments=s,t.parseGeoSearchOptions=r,t.default={IS_READ_ONLY:!0,parseCommand(e,t,r,i,n){e.push("GEOSEARCH"),s(e,t,r,i,n)},transformReply:void 0}},82705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","ENCODING"),e.pushKey(t)},transformReply:void 0}},83340:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GEO_REPLY_WITH=void 0;let i=r(s(82557));t.GEO_REPLY_WITH={DISTANCE:"WITHDIST",HASH:"WITHHASH",COORDINATES:"WITHCOORD"},t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s,r,n,o){i.default.parseCommand(e,t,s,r,o),e.push(...n),e.preserve=n},transformReply(e,s){let r=new Set(s),i=0,n=r.has(t.GEO_REPLY_WITH.DISTANCE)&&++i,o=r.has(t.GEO_REPLY_WITH.HASH)&&++i,a=r.has(t.GEO_REPLY_WITH.COORDINATES)&&++i;return e.map(e=>{let t={member:e[0]};if(n&&(t.distance=e[n]),o&&(t.hash=e[o]),a){let[s,r]=e[a];t.coordinates={longitude:s,latitude:r}}return t})}}},83380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","LINKS")},transformReply:{2:e=>e.map(e=>({direction:e[1],node:e[3],"create-time":e[5],events:e[7],"send-buffer-allocated":e[9],"send-buffer-used":e[11]})),3:void 0}}},83401:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(23529));t.default={IS_READ_ONLY:!0,parseCommand(...e){let t=e[0];i.default.parseCommand(...e),t.push("NOVALUES")},transformReply:([e,t])=>({cursor:e,fields:t})}},83844:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default={sentinel:r(s(66193)).default}},84114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("LATENCY","DOCTOR")},transformReply:void 0}},84159:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("XINFO","GROUPS"),e.pushKey(t)},transformReply:{2:e=>e.map(e=>({name:e[1],consumers:e[3],pending:e[5],"last-delivered-id":e[7],"entries-read":e[9],lag:e[11]})),3:void 0}}},84168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HPTTL"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},84412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","FORGET",t)},transformReply:void 0}},84531:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i){if(e.push("VSIM"),e.pushKey(t),Array.isArray(s))for(let t of(e.push("VALUES",s.length.toString()),s))e.push((0,r.transformDoubleArgument)(t));else e.push("ELE",s);i?.COUNT!==void 0&&e.push("COUNT",i.COUNT.toString()),i?.EF!==void 0&&e.push("EF",i.EF.toString()),i?.FILTER&&e.push("FILTER",i.FILTER),i?.["FILTER-EF"]!==void 0&&e.push("FILTER-EF",i["FILTER-EF"].toString()),i?.TRUTH&&e.push("TRUTH"),i?.NOTHREAD&&e.push("NOTHREAD")},transformReply:void 0}},84573:e=>{"use strict";e.exports=JSON.parse('{"name":"@redis/client","version":"5.6.0","license":"MIT","main":"./dist/index.js","types":"./dist/index.d.ts","files":["dist/","!dist/tsconfig.tsbuildinfo"],"scripts":{"test":"nyc -r text-summary -r lcov mocha -r tsx \'./lib/**/*.spec.ts\'","release":"release-it"},"dependencies":{"cluster-key-slot":"1.1.2"},"devDependencies":{"@redis/test-utils":"*","@types/sinon":"^17.0.3","sinon":"^17.0.1"},"engines":{"node":">= 18"},"repository":{"type":"git","url":"git://github.com/redis/node-redis.git"},"bugs":{"url":"https://github.com/redis/node-redis/issues"},"homepage":"https://github.com/redis/node-redis/tree/master/packages/client","keywords":["redis"]}')},84576:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","ADDSLOTSRANGE"),(0,r.parseSlotRangesArguments)(e,t)},transformReply:void 0}},84742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PTTL"),e.pushKey(t)},transformReply:void 0}},85013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ACL","DRYRUN",t,...s)},transformReply:void 0}},85062:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("LINDEX"),e.pushKey(t),e.push(s.toString())},transformReply:void 0}},85764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("LPUSH"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},86043:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(46541));t.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(...e){let t=e[0];n.default.parseCommand(...e),t.push("WITHSCORES")},transformReply:{2:function(e){let t=[];for(let s of e){let e=Object.create(null);for(let t=0;t<s.length;t+=2){let r=s[t],n=i.transformDoubleReply[2](s[t+1]);e[r.toString()]=n}t.push(e)}return t},3:void 0}}},86757:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(34656));t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){n.default.parseCommand(e,t,s),e.push("RAW")},transformReply:{2:e=>({quantization:e[0],raw:e[1],l2Norm:i.transformDoubleReply[2](e[2]),...void 0!==e[3]&&{quantizationRange:i.transformDoubleReply[2](e[3])}}),3:e=>({quantization:e[0],raw:e[1],l2Norm:e[2],quantizationRange:e[3]})}}},86828:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("SRANDMEMBER"),e.pushKey(t)},transformReply:void 0}},86847:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(8955));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s){i.default.parseCommand(e,t),e.push(s.toString())},transformReply:void 0}},86884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("OBJECT","REFCOUNT"),e.pushKey(t)},transformReply:void 0}},87238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","REPLICATE",t)},transformReply:void 0}},87246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HTTL"),e.pushKey(t),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},87405:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=s(47470),n=r(s(86847));t.default={IS_READ_ONLY:n.default.IS_READ_ONLY,parseCommand(e,t,s){n.default.parseCommand(e,t,s),e.push("WITHSCORES")},transformReply:i.transformSortedSetReply}},87429:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","COUNTKEYSINSLOT",t.toString())},transformReply:void 0}},87632:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(82557);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,i,n,o){e.push("GEOSEARCHSTORE"),void 0!==t&&e.pushKey(t),(0,r.parseGeoSearchArguments)(e,s,i,n,o),o?.STOREDIST&&e.push("STOREDIST")},transformReply:void 0}},87661:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={parseCommand(e,t,s,i){e.push("ZINCRBY"),e.pushKey(t),e.push((0,r.transformDoubleArgument)(s),i)},transformReply:r.transformDoubleReply}},87803:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedisClientPool=void 0;let i=r(s(36440)),n=r(s(62537)),o=s(78474),a=s(29713),u=s(56602),l=s(29987),d=r(s(96952)),c=s(42611),h=s(3994),p=r(s(15955));class f extends o.EventEmitter{static #Z(e,t){let s=(0,l.getTransformReply)(e,t);return async function(...t){let r=new h.BasicCommandParser;return e.parseCommand(r,...t),this.execute(t=>t._executeCommand(e,r,this._commandOptions,s))}}static #eW(e,t){let s=(0,l.getTransformReply)(e,t);return async function(...t){let r=new h.BasicCommandParser;return e.parseCommand(r,...t),this._self.execute(t=>t._executeCommand(e,r,this._self._commandOptions,s))}}static #eX(e,t,s){let r=(0,l.functionArgumentsPrefix)(e,t),i=(0,l.getTransformReply)(t,s);return async function(...e){let s=new h.BasicCommandParser;return s.push(...r),t.parseCommand(s,...e),this._self.execute(e=>e._executeCommand(t,s,this._self._commandOptions,i))}}static #ez(e,t){let s=(0,l.scriptArgumentsPrefix)(e),r=(0,l.getTransformReply)(e,t);return async function(...t){let i=new h.BasicCommandParser;return i.pushVariadic(s),e.parseCommand(i,...t),this.execute(t=>t._executeScript(e,i,this._commandOptions,r))}}static #eZ=new p.default;static create(e,t){let s=f.#eZ.get(e);return s||((s=(0,l.attachConfig)({BaseClass:f,commands:i.default,createCommand:f.#Z,createModuleCommand:f.#eW,createFunctionCommand:f.#eX,createScriptCommand:f.#ez,config:e})).prototype.Multi=d.default.extend(e),f.#eZ.set(e,s)),Object.create(new s(e,t))}static #sS={minimum:1,maximum:100,acquireTimeout:3e3,cleanupDelay:3e3};#N;#g;#sy=new a.SinglyLinkedList;get idleClients(){return this._self.#sy.length}#sR=new a.DoublyLinkedList;get clientsInUse(){return this._self.#sR.length}get totalClients(){return this._self.#sy.length+this._self.#sR.length}#sC=new a.SinglyLinkedList;get tasksQueueLength(){return this._self.#sC.length}#v=!1;get isOpen(){return this._self.#v}#sO=!1;get isClosing(){return this._self.#sO}#e0;get clientSideCache(){return this._self.#e0}constructor(e,t){if(super(),this.#g={...f.#sS,...t},t?.clientSideCache)if(void 0===e&&(e={}),t.clientSideCache instanceof c.PooledClientSideCacheProvider)this.#e0=e.clientSideCache=t.clientSideCache;else{let s=t.clientSideCache;this.#e0=e.clientSideCache=new c.BasicPooledClientSideCache(s)}this.#N=n.default.factory(e).bind(void 0,e)}_self=this;_commandOptions;withCommandOptions(e){let t=Object.create(this._self);return t._commandOptions=e,t}#sb(e,t){let s=Object.create(this._self);return s._commandOptions=Object.create(this._commandOptions??null),s._commandOptions[e]=t,s}withTypeMapping(e){return this._self.#sb("typeMapping",e)}withAbortSignal(e){return this._self.#sb("abortSignal",e)}asap(){return this._self.#sb("asap",!0)}async connect(){if(this._self.#v)return;this._self.#v=!0;let e=[];for(;e.length<this._self.#g.minimum;)e.push(this._self.#sA());try{await Promise.all(e)}catch(e){throw this.destroy(),e}return this}async #sA(){let e=this._self.#sR.push(this._self.#N().on("error",e=>this.emit("error",e)));try{let t=e.value;await t.connect()}catch(t){throw this._self.#sR.remove(e),t}this._self.#sT(e)}execute(e){return new Promise((t,s)=>{let r=this._self.#sy.shift(),{tail:i}=this._self.#sC;if(!r){let r;this._self.#g.acquireTimeout>0&&(r=setTimeout(()=>{this._self.#sC.remove(n,i),s(new u.TimeoutError("Timeout waiting for a client"))},this._self.#g.acquireTimeout));let n=this._self.#sC.push({timeout:r,resolve:t,reject:s,fn:e});this.totalClients<this._self.#g.maximum&&this._self.#sA();return}let n=this._self.#sR.push(r);this._self.#sg(n,t,s,e)})}#sg(e,t,s,r){let i=r(e.value);i instanceof Promise?(i.then(t,s),i.finally(()=>this.#sT(e))):(t(i),this.#sT(e))}#sT(e){let t=this.#sC.shift();if(t){clearTimeout(t.timeout),this.#sg(e,t.resolve,t.reject,t.fn);return}this.#sR.remove(e),this.#sy.push(e.value),this.#sN()}cleanupTimeout;#sN(){this.totalClients<=this.#g.minimum||(clearTimeout(this.cleanupTimeout),this.cleanupTimeout=setTimeout(()=>this.#sM(),this.#g.cleanupDelay))}#sM(){let e=Math.min(this.#sy.length,this.totalClients-this.#g.minimum);for(let t=0;t<e;t++)this.#sy.shift().destroy()}sendCommand(e,t){return this.execute(s=>s.sendCommand(e,t))}MULTI(){return new this.Multi((e,t)=>this.execute(s=>s._executeMulti(e,t)),e=>this.execute(t=>t._executePipeline(e)),this._commandOptions?.typeMapping)}multi=this.MULTI;async close(){if(!this._self.#sO&&this._self.#v){this._self.#sO=!0;try{let e=[];for(let t of this._self.#sy)e.push(t.close());for(let t of this._self.#sR)e.push(t.close());await Promise.all(e),this.#e0?.onPoolClose(),this._self.#sy.reset(),this._self.#sR.reset()}catch(e){}finally{this._self.#sO=!1}}}destroy(){for(let e of this._self.#sy)e.destroy();for(let e of(this._self.#sy.reset(),this._self.#sR))e.destroy();this._self.#e0?.onPoolClose(),this._self.#sR.reset(),this._self.#v=!1}}t.RedisClientPool=f},87953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","ADDSLOTS"),e.pushVariadicNumber(t)},transformReply:void 0}},88199:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAILOVER_MODES=void 0,t.FAILOVER_MODES={FORCE:"FORCE",TAKEOVER:"TAKEOVER"},t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","FAILOVER"),t?.mode&&e.push(t.mode)},transformReply:void 0}},88217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("SETEX"),e.pushKey(t),e.push(s.toString(),r)},transformReply:void 0}},88390:(e,t)=>{"use strict";function s(e,t,s){if(e.pushKey(t),s?.BY&&e.push("BY",s.BY),s?.LIMIT&&e.push("LIMIT",s.LIMIT.offset.toString(),s.LIMIT.count.toString()),s?.GET)if(Array.isArray(s.GET))for(let t of s.GET)e.push("GET",t);else e.push("GET",s.GET);s?.DIRECTION&&e.push(s.DIRECTION),s?.ALPHA&&e.push("ALPHA")}Object.defineProperty(t,"__esModule",{value:!0}),t.parseSortArguments=void 0,t.parseSortArguments=s,t.default={IS_READ_ONLY:!0,parseCommand(e,t,r){e.push("SORT"),s(e,t,r)},transformReply:void 0}},88618:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("CLUSTER","GETKEYSINSLOT",t.toString(),s.toString())},transformReply:void 0}},88624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("ZREMRANGEBYRANK"),e.pushKey(t),e.push(s.toString(),r.toString())},transformReply:void 0}},88740:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(17051);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i){e.push("SSCAN"),e.pushKey(t),(0,r.parseScanArguments)(e,s,i)},transformReply:([e,t])=>({cursor:e,members:t})}},89706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("RENAMENX"),e.pushKeys([t,s])},transformReply:void 0}},89753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLIENT","TRACKINGINFO")},transformReply:{2:e=>({flags:e[1],redirect:e[3],prefixes:e[5]}),3:void 0}}},89882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("GETSET"),e.pushKey(t),e.push(s)},transformReply:void 0}},90043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s){e.push("XDEL"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},90051:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("GEOPOS"),e.pushKey(t),e.pushVariadic(s)},transformReply:e=>e.map(e=>null===e?null:{longitude:e[0],latitude:e[1]})}},90268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("CLUSTER","REPLICAS",t)},transformReply:void 0}},90856:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("VREM"),e.pushKey(t),e.push(s)},transformReply:s(47470).transformBooleanReply}},91022:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("COMMAND","GETKEYS"),e.push(...t)},transformReply:void 0}},91337:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(10331);t.default={IS_READ_ONLY:!0,parseCommand:(e,t)=>(e.push("MSETNX"),(0,r.parseMSetArguments)(e,t)),transformReply:void 0}},91374:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("VINFO"),e.pushKey(t)},transformReply:{2:e=>{let t=Object.create(null);for(let s=0;s<e.length;s+=2)t[e[s].toString()]=e[s+1];return t},3:void 0}}},91406:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s){e.push("PFMERGE"),e.pushKey(t),s&&e.pushKeys(s)},transformReply:void 0}},91613:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZMSCORE"),e.pushKey(t),e.pushVariadic(s)},transformReply:{2:(e,t,s)=>e.map((0,r.createTransformNullableDoubleReplyResp2Func)(t,s)),3:void 0}}},92070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,r){e.push("LSET"),e.pushKey(t),e.push(s.toString(),r)},transformReply:void 0}},92210:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CLUSTER","FLUSHSLOTS")},transformReply:void 0}},92277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("PFCOUNT"),e.pushKeys(t)},transformReply:void 0}},92436:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(58172));t.default={IS_READ_ONLY:!1,parseCommand(e,t,...s){e.push("BZMPOP",t.toString()),(0,o.parseZMPopArguments)(e,...s)},transformReply:o.default.transformReply}},92519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={parseCommand(e,t,s,r){e.push("HGETEX"),e.pushKey(t),r?.expiration&&("string"==typeof r.expiration?e.push(r.expiration):"PERSIST"===r.expiration.type?e.push("PERSIST"):e.push(r.expiration.type,r.expiration.value.toString())),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},94109:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("ZDIFF"),e.pushKeysLength(t)},transformReply:void 0}},94230:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,i){e.push("ZREMRANGEBYSCORE"),e.pushKey(t),e.push((0,r.transformStringDoubleArgument)(s),(0,r.transformStringDoubleArgument)(i))},transformReply:void 0}},94435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("SISMEMBER"),e.pushKey(t),e.push(s)},transformReply:void 0}},94492:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s,i,n){e.push("HPEXPIREAT"),e.pushKey(t),e.push((0,r.transformPXAT)(i)),n&&e.push(n),e.push("FIELDS"),e.pushVariadicWithLength(s)},transformReply:void 0}},95019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("XSETID"),e.pushKey(t),e.push(s),r?.ENTRIESADDED&&e.push("ENTRIESADDED",r.ENTRIESADDED.toString()),r?.MAXDELETEDID&&e.push("MAXDELETEDID",r.MAXDELETEDID)},transformReply:void 0}},95255:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scriptSha1=t.defineScript=void 0;let r=s(77598);function i(e){return(0,r.createHash)("sha1").update(e).digest("hex")}t.defineScript=function(e){return{...e,SHA1:i(e.SCRIPT)}},t.scriptSha1=i},95627:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i,n,o){e.push("XAUTOCLAIM"),e.pushKey(t),e.push(s,r,i.toString(),n),o?.COUNT&&e.push("COUNT",o.COUNT.toString())},transformReply:(e,t,s)=>({nextId:e[0],messages:e[1].map(r.transformStreamMessageNullReply.bind(void 0,s)),deletedMessages:e[2]})}},95661:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("COMMAND")},transformReply:e=>e.map(r.transformCommandReply)}},95787:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("ACL","LOAD")},transformReply:void 0}},96240:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("VCARD"),e.pushKey(t)},transformReply:void 0}},96564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("ZCARD"),e.pushKey(t)},transformReply:void 0}},96667:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e){e.push("CONFIG","REWRITE")},transformReply:void 0}},96844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t){e.push("DUMP"),e.pushKey(t)},transformReply:void 0}},96943:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("VGETATTR"),e.pushKey(t),e.push(s)},transformReply:s(47470).transformRedisJsonNullReply}},96952:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(36440)),n=r(s(26e3)),o=s(29987),a=s(3994);class u{static #Z(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return i.preserve=r.preserve,this.addCommand(i,s)}}static #eW(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return i.preserve=r.preserve,this._self.addCommand(i,s)}}static #eX(e,t,s){let r=(0,o.functionArgumentsPrefix)(e,t),i=(0,o.getTransformReply)(t,s);return function(...e){let s=new a.BasicCommandParser;s.push(...r),t.parseCommand(s,...e);let n=s.redisArgs;return n.preserve=s.preserve,this._self.addCommand(n,i)}}static #ez(e,t){let s=(0,o.getTransformReply)(e,t);return function(...t){let r=new a.BasicCommandParser;e.parseCommand(r,...t);let i=r.redisArgs;return i.preserve=r.preserve,this.#ei(e,i,s)}}static extend(e){return(0,o.attachConfig)({BaseClass:u,commands:i.default,createCommand:u.#Z,createModuleCommand:u.#eW,createFunctionCommand:u.#eX,createScriptCommand:u.#ez,config:e})}#J;#sm;#s_;#eq;constructor(e,t,s){this.#J=new n.default(s),this.#sm=e,this.#s_=t}SELECT(e,t){return this.#eq=e,this.#J.addCommand(["SELECT",e.toString()],t),this}select=this.SELECT;addCommand(e,t){return this.#J.addCommand(e,t),this}#ei(e,t,s){return this.#J.addScript(e,t,s),this}async exec(e=!1){return e?this.execAsPipeline():this.#J.transformReplies(await this.#sm(this.#J.queue,this.#eq))}EXEC=this.exec;execTyped(e=!1){return this.exec(e)}async execAsPipeline(){return 0===this.#J.queue.length?[]:this.#J.transformReplies(await this.#s_(this.#J.queue,this.#eq))}execAsPipelineTyped(){return this.execAsPipeline()}}t.default=u},97105:function(e,t,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&r(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});let o=n(s(26603));t.default={IS_READ_ONLY:o.default.IS_READ_ONLY,parseCommand(e,t,s,r,i,n,a){e.push("GEORADIUS"),(0,o.parseGeoRadiusArguments)(e,t,s,r,i,a),a?.STOREDIST?e.push("STOREDIST"):e.push("STORE"),e.pushKey(n)},transformReply:void 0}},97604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("HRANDFIELD"),e.pushKey(t),e.push(s.toString(),"WITHVALUES")},transformReply:{2:e=>{let t=[],s=0;for(;s<e.length;)t.push({field:e[s++],value:e[s++]});return t},3:e=>e.map(e=>{let[t,s]=e;return{field:t,value:s}})}}},97631:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("MGET"),e.pushKeys(t)},transformReply:void 0}},97782:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedisSentinelFactory=t.RedisSentinelClient=void 0;let i=s(78474),n=r(s(62537)),o=s(29987),a=r(s(36440)),u=s(5583),l=r(s(39502)),d=s(66995),c=s(58500),h=r(s(83844)),p=s(37715),f=s(42611);class m{#sv;#sP;_self;get isOpen(){return this._self.#sP.isOpen}get isReady(){return this._self.#sP.isReady}get commandOptions(){return this._self.#sI}#sI;constructor(e,t,s){this._self=this,this.#sP=e,this.#sv=t,this.#sI=s}static factory(e){let t=(0,o.attachConfig)({BaseClass:m,commands:a.default,createCommand:u.createCommand,createModuleCommand:u.createModuleCommand,createFunctionCommand:u.createFunctionCommand,createScriptCommand:u.createScriptCommand,config:e});return t.prototype.Multi=l.default.extend(e),(e,s,r)=>Object.create(new t(e,s,r))}static create(e,t,s,r){return m.factory(e)(t,s,r)}withCommandOptions(e){let t=Object.create(this);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let s=Object.create(this);return s._commandOptions=Object.create(this._self.#sI??null),s._commandOptions[e]=t,s}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}async _execute(e,t){if(void 0===this._self.#sv)throw Error("Attempted execution on released RedisSentinelClient lease");return await this._self.#sP.execute(t,this._self.#sv)}async sendCommand(e,t,s){return this._execute(e,e=>e.sendCommand(t,s))}async _executePipeline(e,t){return this._execute(e,e=>e._executePipeline(t))}async _executeMulti(e,t){return this._execute(e,e=>e._executeMulti(t))}MULTI(){return new this.Multi(this)}multi=this.MULTI;WATCH(e){if(void 0===this._self.#sv)throw Error("Attempted execution on released RedisSentinelClient lease");return this._execute(!1,t=>t.watch(e))}watch=this.WATCH;UNWATCH(){if(void 0===this._self.#sv)throw Error("Attempted execution on released RedisSentinelClient lease");return this._execute(!1,e=>e.unwatch())}unwatch=this.UNWATCH;release(){if(void 0===this._self.#sv)throw Error("RedisSentinelClient lease already released");let e=this._self.#sP.releaseClientLease(this._self.#sv);return this._self.#sv=void 0,e}}t.RedisSentinelClient=m;class _ extends i.EventEmitter{_self;#sP;#g;get isOpen(){return this._self.#sP.isOpen}get isReady(){return this._self.#sP.isReady}get commandOptions(){return this._self.#sI}#sI;#sD=()=>{};#sL;#sY=0;#sB;get clientSideCache(){return this._self.#sP.clientSideCache}constructor(e){super(),this._self=this,this.#g=e,e.commandOptions&&(this.#sI=e.commandOptions),this.#sP=new E(e),this.#sP.on("error",e=>this.emit("error",e)),this.#sP.on("topology-change",e=>{this.emit("topology-change",e)||this._self.#sD(`RedisSentinel: re-emit for topology-change for ${e.type} event returned false`)})}static factory(e){let t=(0,o.attachConfig)({BaseClass:_,commands:a.default,createCommand:u.createCommand,createModuleCommand:u.createModuleCommand,createFunctionCommand:u.createFunctionCommand,createScriptCommand:u.createScriptCommand,config:e});return t.prototype.Multi=l.default.extend(e),e=>Object.create(new t(e))}static create(e){return _.factory(e)(e)}withCommandOptions(e){let t=Object.create(this);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let s=Object.create(this);return s._self.#sI={...this._self.#sI||{},[e]:t},s}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}async connect(){return await this._self.#sP.connect(),this._self.#g.reserveClient&&(this._self.#sL=await this._self.#sP.getClientLease()),this}async _execute(e,t){let s;(!e||!this._self.#sP.useReplicas)&&(this._self.#sL?s=this._self.#sL:(this._self.#sB??=await this._self.#sP.getClientLease(),s=this._self.#sB,this._self.#sY++));try{return await this._self.#sP.execute(t,s)}finally{if(void 0!==s&&s===this._self.#sB&&0==--this._self.#sY){let e=this._self.#sP.releaseClientLease(s);this._self.#sB=void 0,e&&await e}}}async use(e){let t=await this._self.#sP.getClientLease();try{return await e(m.create(this._self.#g,this._self.#sP,t,this._self.#sI))}finally{let e=this._self.#sP.releaseClientLease(t);e&&await e}}async sendCommand(e,t,s){return this._execute(e,e=>e.sendCommand(t,s))}async _executePipeline(e,t){return this._execute(e,e=>e._executePipeline(t))}async _executeMulti(e,t){return this._execute(e,e=>e._executeMulti(t))}MULTI(){return new this.Multi(this)}multi=this.MULTI;async close(){return this._self.#sP.close()}destroy(){return this._self.#sP.destroy()}async SUBSCRIBE(e,t,s){return this._self.#sP.subscribe(e,t,s)}subscribe=this.SUBSCRIBE;async UNSUBSCRIBE(e,t,s){return this._self.#sP.unsubscribe(e,t,s)}unsubscribe=this.UNSUBSCRIBE;async PSUBSCRIBE(e,t,s){return this._self.#sP.pSubscribe(e,t,s)}pSubscribe=this.PSUBSCRIBE;async PUNSUBSCRIBE(e,t,s){return this._self.#sP.pUnsubscribe(e,t,s)}pUnsubscribe=this.PUNSUBSCRIBE;async acquire(){let e=await this._self.#sP.getClientLease();return m.create(this._self.#g,this._self.#sP,e,this._self.#sI)}getSentinelNode(){return this._self.#sP.getSentinelNode()}getMasterNode(){return this._self.#sP.getMasterNode()}getReplicaNodes(){return this._self.#sP.getReplicaNodes()}setTracer(e){e?this._self.#sD=t=>{e.push(t)}:this._self.#sD=()=>{},this._self.#sP.setTracer(e)}}t.default=_;class E extends i.EventEmitter{#v=!1;get isOpen(){return this.#v}#ef=!1;get isReady(){return this.#ef}#sU;#sj;#sw;#sK;#sx;#sH;#sF=!1;#sG=0;#sk;#sV;#sW=[];#sX;#sz;#sZ=[];#sq=0;#s$;get useReplicas(){return this.#s$>0}#sJ;#sQ;#s0;#s1;#G=!1;#sD=()=>{};#e0;get clientSideCache(){return this.#e0}#P(e){if(e?.clientSideCache&&e?.RESP!==3)throw Error("Client Side Caching is only supported with RESP3")}constructor(e){if(super(),this.#P(e),this.#sU=e.name,this.#sH=e.RESP,this.#sk=Array.from(e.sentinelRootNodes),this.#sQ=e.maxCommandRediscovers??16,this.#sz=e.masterPoolSize??1,this.#s$=e.replicaPoolSize??0,this.#sK=e.scanInterval??0,this.#sx=e.passthroughClientErrorEvents??!1,this.#sj=e.nodeClientOptions?{...e.nodeClientOptions}:{},void 0!==this.#sj.url)throw Error("invalid nodeClientOptions for Sentinel");if(e.clientSideCache)if(e.clientSideCache instanceof f.PooledClientSideCacheProvider)this.#e0=this.#sj.clientSideCache=e.clientSideCache;else{let t=e.clientSideCache;this.#e0=this.#sj.clientSideCache=new f.BasicPooledClientSideCache(t)}if(this.#sw=e.sentinelClientOptions?Object.assign({},e.sentinelClientOptions):{},this.#sw.modules=h.default,void 0!==this.#sw.url)throw Error("invalid sentinelClientOptions for Sentinel");this.#sX=new p.WaitQueue;for(let e=0;e<this.#sz;e++)this.#sX.push(e);this.#s0=new d.PubSubProxy(this.#sj,e=>this.emit("error",e))}#x(e,t,s){return n.default.create({RESP:this.#sH,...t,socket:{...t.socket,host:e.host,port:e.port,reconnectStrategy:s}})}getClientLease(){let e=this.#sX.shift();return void 0!==e?{id:e}:this.#sX.wait().then(e=>({id:e}))}releaseClientLease(e){let t=this.#sW[e.id];if(void 0!==t){let s=t.resetIfDirty();if(s)return s.then(()=>this.#sX.push(e.id))}this.#sX.push(e.id)}async connect(){if(this.#v)throw Error("already attempting to open");try{this.#v=!0,this.#sJ=this.#eR(),await this.#sJ,this.#ef=!0}finally{this.#sJ=void 0,this.#sK>0&&(this.#s1=setInterval(this.#s4.bind(this),this.#sK))}}async #eR(){let e=0;for(;;){if(this.#sD("starting connect loop"),e+=1,this.#G)return void this.#sD("in #connect and want to destroy");try{if(this.#sF=!1,await this.transform(this.analyze(await this.observe())),this.#sF){this.#sD("#connect: anotherReset is true, so continuing");continue}this.#sD("#connect: returning");return}catch(t){if(this.#sD(`#connect: exception ${t.message}`),!this.#ef&&e>this.#sQ)throw t;"no valid master node"!==t.message&&console.log(t),await (0,c.setTimeout)(1e3)}finally{this.#sD("finished connect")}}}async execute(e,t){let s=0;for(;;){void 0!==this.#sJ&&await this.#sJ;let r=this.#s2(t);if(!r.isReady){await this.#s4();continue}let i=r.options?.socket;this.#sD("attemping to send command to "+i?.host+":"+i?.port);try{return await e(r)}catch(e){if(++s>this.#sQ||!(e instanceof Error))throw e;if(void 0!==t&&(e.message.startsWith("READONLY")||!r.isReady)){await this.#s4();continue}throw e}}}async #s3(e){return await e.pSubscribe(["switch-master","[-+]sdown","+slave","+sentinel","[-+]odown","+slave-reconf-done"],(e,t)=>{this.#s7(t,e)},!0),e}async #s7(e,t){this.#sD("pubsub control channel message on "+e),this.#s4()}#s2(e){if(void 0!==e)return this.#sW[e.id];if(this.#sq>=this.#sZ.length&&(this.#sq=0),0==this.#sZ.length)throw Error("no replicas available for read");return this.#sZ[this.#sq++]}async #s4(){if(!1!=this.#ef&&!0!=this.#G){if(void 0!==this.#sJ)return this.#sF=!0,await this.#sJ;try{return this.#sJ=this.#eR(),await this.#sJ}finally{this.#sD("finished reconfgure"),this.#sJ=void 0}}}async close(){this.#G=!0,void 0!=this.#sJ&&await this.#sJ,this.#ef=!1,this.#e0?.onPoolClose(),this.#s1&&(clearInterval(this.#s1),this.#s1=void 0);let e=[];for(let t of(void 0!==this.#sV&&(this.#sV.isOpen&&e.push(this.#sV.close()),this.#sV=void 0),this.#sW))t.isOpen&&e.push(t.close());for(let t of(this.#sW=[],this.#sZ))t.isOpen&&e.push(t.close());this.#sZ=[],await Promise.all(e),this.#s0.destroy(),this.#v=!1}async destroy(){for(let e of(this.#G=!0,void 0!=this.#sJ&&await this.#sJ,this.#ef=!1,this.#e0?.onPoolClose(),this.#s1&&(clearInterval(this.#s1),this.#s1=void 0),void 0!==this.#sV&&(this.#sV.isOpen&&this.#sV.destroy(),this.#sV=void 0),this.#sW))e.isOpen&&e.destroy();for(let e of(this.#sW=[],this.#sZ))e.isOpen&&e.destroy();this.#sZ=[],this.#s0.destroy(),this.#v=!1,this.#G=!1}async subscribe(e,t,s){return this.#s0.subscribe(e,t,s)}async unsubscribe(e,t,s){return this.#s0.unsubscribe(e,t,s)}async pSubscribe(e,t,s){return this.#s0.pSubscribe(e,t,s)}async pUnsubscribe(e,t,s){return this.#s0.pUnsubscribe(e,t,s)}async observe(){for(let e of this.#sk){let t;try{this.#sD(`observe: trying to connect to sentinel: ${e.host}:${e.port}`),(t=this.#x(e,this.#sw,!1)).on("error",e=>this.emit("error",`obseve client error: ${e}`)),await t.connect(),this.#sD("observe: connected to sentinel");let[s,r,i]=await Promise.all([t.sentinel.sentinelSentinels(this.#sU),t.sentinel.sentinelMaster(this.#sU),t.sentinel.sentinelReplicas(this.#sU)]);return this.#sD("observe: got all sentinel data"),{sentinelConnected:e,sentinelData:s,masterData:r,replicaData:i,currentMaster:this.getMasterNode(),currentReplicas:this.getReplicaNodes(),currentSentinel:this.getSentinelNode(),replicaPoolSize:this.#s$,useReplicas:this.useReplicas}}catch(e){this.#sD(`observe: error ${e}`),this.emit("error",e)}finally{void 0!==t&&t.isOpen&&(this.#sD("observe: destroying sentinel client"),t.destroy())}}throw this.#sD("observe: none of the sentinels are available"),Error("None of the sentinels are available")}analyze(e){let t=(0,u.parseNode)(e.masterData);if(void 0===t)throw this.#sD(`analyze: no valid master node because ${e.masterData.flags}`),Error("no valid master node");t.host===e.currentMaster?.host&&t.port===e.currentMaster?.port?(this.#sD(`analyze: master node hasn't changed from ${e.currentMaster?.host}:${e.currentMaster?.port}`),t=void 0):this.#sD(`analyze: master node has changed to ${t.host}:${t.port} from ${e.currentMaster?.host}:${e.currentMaster?.port}`);let s=e.sentinelConnected;s.host===e.currentSentinel?.host&&s.port===e.currentSentinel.port?(this.#sD("analyze: sentinel node hasn't changed"),s=void 0):this.#sD(`analyze: sentinel node has changed to ${s.host}:${s.port}`);let r=[],i=new Map,n=new Set,o=new Set;if(e.useReplicas){let t=(0,u.createNodeList)(e.replicaData);for(let e of t)n.add(JSON.stringify(e));for(let[t,s]of e.currentReplicas)n.has(JSON.stringify(t))?(o.add(JSON.stringify(t)),s!=e.replicaPoolSize&&(i.set(t,e.replicaPoolSize-s),this.#sD(`analyze: adding ${t.host}:${t.port} to replicsToOpen`))):(r.push(t),this.#sD(`analyze: adding ${t.host}:${t.port} to replicsToClose`));for(let s of t)o.has(JSON.stringify(s))||(i.set(s,e.replicaPoolSize),this.#sD(`analyze: adding ${s.host}:${s.port} to replicsToOpen`))}return{sentinelList:[e.sentinelConnected].concat((0,u.createNodeList)(e.sentinelData)),epoch:Number(e.masterData["config-epoch"]),sentinelToOpen:s,masterToOpen:t,replicasToClose:r,replicasToOpen:i}}async transform(e){this.#sD("transform: enter");let t=[];if(e.sentinelToOpen){this.#sD("transform: opening a new sentinel"),void 0!==this.#sV&&this.#sV.isOpen?(this.#sD("transform: destroying old sentinel as open"),this.#sV.destroy(),this.#sV=void 0):this.#sD("transform: not destroying old sentinel as not open"),this.#sD(`transform: creating new sentinel to ${e.sentinelToOpen.host}:${e.sentinelToOpen.port}`);let s=e.sentinelToOpen,r=this.#x(e.sentinelToOpen,this.#sw,!1);r.on("error",e=>{this.#sx&&this.emit("error",Error(`Sentinel Client (${s.host}:${s.port}): ${e.message}`,{cause:e}));let t={type:"SENTINEL",node:(0,u.clientSocketToNode)(r.options.socket),error:e};this.emit("client-error",t),this.#s4()}),this.#sV=r,this.#sD("transform: adding sentinel client connect() to promise list");let i=this.#sV.connect().then(e=>this.#s3(e));t.push(i),this.#sD(`created sentinel client to ${e.sentinelToOpen.host}:${e.sentinelToOpen.port}`);let n={type:"SENTINEL_CHANGE",node:e.sentinelToOpen};this.#sD("transform: emiting topology-change event for sentinel_change"),this.emit("topology-change",n)||this.#sD("transform: emit for topology-change for sentinel_change returned false")}if(e.masterToOpen){this.#sD("transform: opening a new master");let s=[],r=[];for(let e of(this.#sD("transform: destroying old masters if open"),this.#sW))r.push(e.isWatching||e.isDirtyWatch),e.isOpen&&e.destroy();this.#sW=[],this.#sD("transform: creating all master clients and adding connect promises");for(let t=0;t<this.#sz;t++){let i=e.masterToOpen,n=this.#x(e.masterToOpen,this.#sj);n.on("error",e=>{this.#sx&&this.emit("error",Error(`Master Client (${i.host}:${i.port}): ${e.message}`,{cause:e}));let t={type:"MASTER",node:(0,u.clientSocketToNode)(n.options.socket),error:e};this.emit("client-error",t)}),r[t]&&n.setDirtyWatch("sentinel config changed in middle of a WATCH Transaction"),this.#sW.push(n),s.push(n.connect()),this.#sD(`created master client to ${e.masterToOpen.host}:${e.masterToOpen.port}`)}this.#sD("transform: adding promise to change #pubSubProxy node"),s.push(this.#s0.changeNode(e.masterToOpen)),t.push(...s);let i={type:"MASTER_CHANGE",node:e.masterToOpen};this.#sD("transform: emiting topology-change event for master_change"),this.emit("topology-change",i)||this.#sD("transform: emit for topology-change for master_change returned false"),this.#sG++}let s=new Set;for(let t of e.replicasToClose){let e=JSON.stringify(t);s.add(e)}let r=[],i=new Set;for(let e of this.#sZ){let t=(0,u.clientSocketToNode)(e.options.socket),n=JSON.stringify(t);if(s.has(n)||!e.isOpen){if(e.isOpen){let t=e.options?.socket;this.#sD(`destroying replica client to ${t?.host}:${t?.port}`),e.destroy()}if(!i.has(n)){let e={type:"REPLICA_REMOVE",node:t};this.emit("topology-change",e),i.add(n)}}else r.push(e)}if(this.#sZ=r,0!=e.replicasToOpen.size)for(let[s,r]of e.replicasToOpen){for(let e=0;e<r;e++){let e=this.#x(s,this.#sj);e.on("error",t=>{this.#sx&&this.emit("error",Error(`Replica Client (${s.host}:${s.port}): ${t.message}`,{cause:t}));let r={type:"REPLICA",node:(0,u.clientSocketToNode)(e.options.socket),error:t};this.emit("client-error",r)}),this.#sZ.push(e),t.push(e.connect()),this.#sD(`created replica client to ${s.host}:${s.port}`)}let e={type:"REPLICA_ADD",node:s};this.emit("topology-change",e)}if(e.sentinelList.length!=this.#sk.length){this.#sk=e.sentinelList;let t={type:"SENTINE_LIST_CHANGE",size:e.sentinelList.length};this.emit("topology-change",t)}await Promise.all(t),this.#sD("transform: exit")}getMasterNode(){if(0!=this.#sW.length){for(let e of this.#sW)if(e.isReady)return(0,u.clientSocketToNode)(e.options.socket)}}getSentinelNode(){if(void 0!==this.#sV)return(0,u.clientSocketToNode)(this.#sV.options.socket)}getReplicaNodes(){let e=new Map,t=new Map;for(let e of this.#sZ){let s=JSON.stringify((0,u.clientSocketToNode)(e.options.socket));e.isReady?t.set(s,(t.get(s)??0)+1):t.has(s)||t.set(s,0)}for(let[s,r]of t)e.set(JSON.parse(s),r);return e}setTracer(e){e?this.#sD=t=>{e.push(t)}:this.#sD=()=>{}}}class S extends i.EventEmitter{options;#sk;#s5=-1;constructor(e){super(),this.options=e,this.#sk=e.sentinelRootNodes}async updateSentinelRootNodes(){for(let e of this.#sk){let t=n.default.create({...this.options.sentinelClientOptions,socket:{...this.options.sentinelClientOptions?.socket,host:e.host,port:e.port,reconnectStrategy:!1},modules:h.default}).on("error",e=>this.emit(`updateSentinelRootNodes: ${e}`));try{await t.connect()}catch{t.isOpen&&t.destroy();continue}try{let s=await t.sentinel.sentinelSentinels(this.options.name);this.#sk=[e].concat((0,u.createNodeList)(s));return}finally{t.destroy()}}throw Error("Couldn't connect to any sentinel node")}async getMasterNode(){let e=!1;for(let t of this.#sk){let s=n.default.create({...this.options.sentinelClientOptions,socket:{...this.options.sentinelClientOptions?.socket,host:t.host,port:t.port,reconnectStrategy:!1},modules:h.default}).on("error",e=>this.emit(`getMasterNode: ${e}`));try{await s.connect()}catch{s.isOpen&&s.destroy();continue}e=!0;try{let e=await s.sentinel.sentinelMaster(this.options.name),t=(0,u.parseNode)(e);if(void 0===t)continue;return t}finally{s.destroy()}}if(e)throw Error("Master Node Not Enumerated");throw Error("couldn't connect to any sentinels")}async getMasterClient(){let e=await this.getMasterNode();return n.default.create({...this.options.nodeClientOptions,socket:{...this.options.nodeClientOptions?.socket,host:e.host,port:e.port}})}async getReplicaNodes(){let e=!1;for(let t of this.#sk){let s=n.default.create({...this.options.sentinelClientOptions,socket:{...this.options.sentinelClientOptions?.socket,host:t.host,port:t.port,reconnectStrategy:!1},modules:h.default}).on("error",e=>this.emit(`getReplicaNodes: ${e}`));try{await s.connect()}catch{s.isOpen&&s.destroy();continue}e=!0;try{let e=await s.sentinel.sentinelReplicas(this.options.name),t=(0,u.createNodeList)(e);if(0==t.length)continue;return t}finally{s.destroy()}}if(e)throw Error("No Replicas Nodes Enumerated");throw Error("couldn't connect to any sentinels")}async getReplicaClient(){let e=await this.getReplicaNodes();if(0==e.length)throw Error("no available replicas");return this.#s5++,this.#s5>=e.length&&(this.#s5=0),n.default.create({...this.options.nodeClientOptions,socket:{...this.options.nodeClientOptions?.socket,host:e[this.#s5].host,port:e[this.#s5].port}})}}t.RedisSentinelFactory=S},98179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCARD"),e.pushKey(t)},transformReply:void 0}},98318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r,i){e.push("RESTORE"),e.pushKey(t),e.push(s.toString(),r),i?.REPLACE&&e.push("REPLACE"),i?.ABSTTL&&e.push("ABSTTL"),i?.IDLETIME&&e.push("IDLETIME",i.IDLETIME.toString()),i?.FREQ&&e.push("FREQ",i.FREQ.toString())},transformReply:void 0}},98404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!0,parseCommand(e,t){e.push("SCRIPT","LOAD",t)},transformReply:void 0}},98743:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(77873));t.default={IS_READ_ONLY:i.default.IS_READ_ONLY,parseCommand(e,t,s){e.push("BZPOPMIN"),e.pushKeys(t),e.push(s.toString())},transformReply:i.default.transformReply}},98759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!1,parseCommand(e,t,s,r){e.push("COPY"),e.pushKeys([t,s]),r?.DB&&e.push("DB",r.DB.toString()),r?.REPLACE&&e.push("REPLACE")},transformReply:void 0}},99024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZINTERCARD"),e.pushKeysLength(t),"number"==typeof s?e.push("LIMIT",s.toString()):s?.LIMIT&&e.push("LIMIT",s.LIMIT.toString())},transformReply:void 0}},99388:function(e,t,s){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(s(36440)),n=s(78474),o=s(29987),a=r(s(26646)),u=r(s(77513)),l=s(56602),d=s(3994),c=s(41817),h=r(s(15955));class p extends n.EventEmitter{static #Z(e,t){let s=(0,o.getTransformReply)(e,t);return async function(...t){let r=new d.BasicCommandParser;return e.parseCommand(r,...t),this._self._execute(r.firstKey,e.IS_READ_ONLY,this._commandOptions,(t,i)=>t._executeCommand(e,r,i,s))}}static #eW(e,t){let s=(0,o.getTransformReply)(e,t);return async function(...t){let r=new d.BasicCommandParser;return e.parseCommand(r,...t),this._self._execute(r.firstKey,e.IS_READ_ONLY,this._self._commandOptions,(t,i)=>t._executeCommand(e,r,i,s))}}static #eX(e,t,s){let r=(0,o.functionArgumentsPrefix)(e,t),i=(0,o.getTransformReply)(t,s);return async function(...e){let s=new d.BasicCommandParser;return s.push(...r),t.parseCommand(s,...e),this._self._execute(s.firstKey,t.IS_READ_ONLY,this._self._commandOptions,(e,r)=>e._executeCommand(t,s,r,i))}}static #ez(e,t){let s=(0,o.scriptArgumentsPrefix)(e),r=(0,o.getTransformReply)(e,t);return async function(...t){let i=new d.BasicCommandParser;return i.push(...s),e.parseCommand(i,...t),this._self._execute(i.firstKey,e.IS_READ_ONLY,this._commandOptions,(t,s)=>t._executeScript(e,i,s,r))}}static #eZ=new h.default;static factory(e){let t=p.#eZ.get(e);return t||((t=(0,o.attachConfig)({BaseClass:p,commands:i.default,createCommand:p.#Z,createModuleCommand:p.#eW,createFunctionCommand:p.#eX,createScriptCommand:p.#ez,config:e})).prototype.Multi=u.default.extend(e),p.#eZ.set(e,t)),e=>Object.create(new t(e))}static create(e){return p.factory(e)(e)}_options;_slots;_self=this;_commandOptions;get slots(){return this._self._slots.slots}get clientSideCache(){return this._self._slots.clientSideCache}get masters(){return this._self._slots.masters}get replicas(){return this._self._slots.replicas}get nodeByAddress(){return this._self._slots.nodeByAddress}get pubSubNode(){return this._self._slots.pubSubNode}get isOpen(){return this._self._slots.isOpen}constructor(e){super(),this._options=e,this._slots=new a.default(e,this.emit.bind(this)),e?.commandOptions&&(this._commandOptions=e.commandOptions)}duplicate(e){return new(Object.getPrototypeOf(this)).constructor({...this._self._options,commandOptions:this._commandOptions,...e})}async connect(){return await this._self._slots.connect(),this}withCommandOptions(e){let t=Object.create(this);return t._commandOptions=e,t}_commandOptionsProxy(e,t){let s=Object.create(this);return s._commandOptions=Object.create(this._commandOptions??null),s._commandOptions[e]=t,s}withTypeMapping(e){return this._commandOptionsProxy("typeMapping",e)}_handleAsk(e){return async(t,s)=>{let r=Symbol("asking chain"),i=s?{...s}:{};return i.chainId=r,(await Promise.all([t.sendCommand([c.ASKING_CMD],{chainId:r}),e(t,i)]))[1]}}async _execute(e,t,s,r){let i=this._options.maxCommandRedirections??16,n=await this._slots.getClient(e,t),o=0,a=r;for(;;)try{return await a(n,s)}catch(s){if(a=r,++o>i||!(s instanceof Error))throw s;if(s.message.startsWith("ASK")){let e=s.message.substring(s.message.lastIndexOf(" ")+1),t=await this._slots.getMasterByAddress(e);if(t||(await this._slots.rediscover(n),t=await this._slots.getMasterByAddress(e)),!t)throw Error(`Cannot find node ${e}`);n=t,a=this._handleAsk(r);continue}if(s.message.startsWith("MOVED")){await this._slots.rediscover(n),n=await this._slots.getClient(e,t);continue}throw s}}async sendCommand(e,t,s,r){let i={...this._self._commandOptions,...r};return this._self._execute(e,t,i,(e,t)=>e.sendCommand(s,t))}MULTI(e){return new this.Multi(async(e,t,s)=>(await this._self._slots.getClient(e,t))._executeMulti(s),async(e,t,s)=>(await this._self._slots.getClient(e,t))._executePipeline(s),e,this._commandOptions?.typeMapping)}multi=this.MULTI;async SUBSCRIBE(e,t,s){return(await this._self._slots.getPubSubClient()).SUBSCRIBE(e,t,s)}subscribe=this.SUBSCRIBE;async UNSUBSCRIBE(e,t,s){return this._self._slots.executeUnsubscribeCommand(r=>r.UNSUBSCRIBE(e,t,s))}unsubscribe=this.UNSUBSCRIBE;async PSUBSCRIBE(e,t,s){return(await this._self._slots.getPubSubClient()).PSUBSCRIBE(e,t,s)}pSubscribe=this.PSUBSCRIBE;async PUNSUBSCRIBE(e,t,s){return this._self._slots.executeUnsubscribeCommand(r=>r.PUNSUBSCRIBE(e,t,s))}pUnsubscribe=this.PUNSUBSCRIBE;async SSUBSCRIBE(e,t,s){let r=this._self._options.maxCommandRedirections??16,i=Array.isArray(e)?e[0]:e,n=await this._self._slots.getShardedPubSubClient(i);for(let o=0;;o++)try{return await n.SSUBSCRIBE(e,t,s)}catch(e){if(++o>r||!(e instanceof l.ErrorReply))throw e;if(e.message.startsWith("MOVED")){await this._self._slots.rediscover(n),n=await this._self._slots.getShardedPubSubClient(i);continue}throw e}}sSubscribe=this.SSUBSCRIBE;SUNSUBSCRIBE(e,t,s){return this._self._slots.executeShardedUnsubscribeCommand(Array.isArray(e)?e[0]:e,r=>r.SUNSUBSCRIBE(e,t,s))}sUnsubscribe=this.SUNSUBSCRIBE;quit(){return this._self._slots.quit()}disconnect(){return this._self._slots.disconnect()}close(){return this._self._slots.clientSideCache?.onPoolClose(),this._self._slots.close()}destroy(){return this._self._slots.clientSideCache?.onPoolClose(),this._self._slots.destroy()}nodeClient(e){return this._self._slots.nodeClient(e)}getRandomNode(){return this._self._slots.getRandomNode()}getSlotRandomNode(e){return this._self._slots.getSlotRandomNode(e)}getMasters(){return this.masters}getSlotMaster(e){return this.slots[e].master}}t.default=p},99401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e){e.push("MEMORY","PURGE")},transformReply:void 0}},99431:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=s(47470);t.default={IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("ZUNION"),(0,r.parseZKeysArguments)(e,t),s?.AGGREGATE&&e.push("AGGREGATE",s.AGGREGATE)},transformReply:void 0}},99457:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CACHEABLE:!0,IS_READ_ONLY:!0,parseCommand(e,t,s){e.push("GEOHASH"),e.pushKey(t),e.pushVariadic(s)},transformReply:void 0}},99801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={NOT_KEYED_COMMAND:!0,IS_READ_ONLY:!1,parseCommand(e,t){e.push("FUNCTION","LIST"),t?.LIBRARYNAME&&e.push("LIBRARYNAME",t.LIBRARYNAME)},transformReply:{2:e=>e.map(e=>({library_name:e[1],engine:e[3],functions:e[5].map(e=>({name:e[1],description:e[3],flags:e[5]}))})),3:void 0}}}};